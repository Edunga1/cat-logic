<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.1"/><style data-href="/cat-logic/styles.7063392de47b3110fc97.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:0 0;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}*{box-sizing:border-box}body{margin:0}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style data-styled="" data-styled-version="5.3.11">.jKwTdT{box-sizing:border-box;background-color:#f5f5f5;padding:1rem 1rem 1rem 0;}/*!sc*/
.jKwTdT ul{list-style:none;padding-left:1rem;margin:0;font-size:.8rem;}/*!sc*/
.jKwTdT ul p{margin:0;}/*!sc*/
.jKwTdT a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g1[id="Toc__Container-sc-1f76i2s-0"]{content:"jKwTdT,"}/*!sc*/
.jzROSZ{overflow:auto;}/*!sc*/
.jzROSZ a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.jzROSZ code:not(pre code){background-color:#f5f5f5;border-radius:.5rem;padding:.2rem .4rem;}/*!sc*/
.jzROSZ pre:has(code){font-size:85%;background-color:#f5f5f5;border-radius:.5rem;padding:1rem;overflow:auto;}/*!sc*/
.jzROSZ img{max-width:100%;}/*!sc*/
.jzROSZ blockquote{border-left:4px solid #ddd;padding-left:1rem;margin-left:0;font-style:italic;}/*!sc*/
data-styled.g2[id="WikiContent__Container-sc-q3jb6a-0"]{content:"jzROSZ,"}/*!sc*/
.gcJKrk{padding-top:20rem;}/*!sc*/
data-styled.g3[id="Comments__Container-sc-1ajj4d9-0"]{content:"gcJKrk,"}/*!sc*/
.gqosYh{display:grid;grid-template-columns:1fr;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;}/*!sc*/
@media (min-width:700px){.gqosYh{grid-template-columns:minmax(300px,1fr) minmax(400px,1000px);}}/*!sc*/
data-styled.g4[id="Wiki__Container-sc-16q9onf-0"]{content:"gqosYh,"}/*!sc*/
.hKa-dnq{display:none;}/*!sc*/
@media (min-width:700px){.hKa-dnq{display:block;}}/*!sc*/
data-styled.g5[id="Wiki__Side-sc-16q9onf-1"]{content:"hKa-dnq,"}/*!sc*/
.kXmPAY{padding:0 1rem;overflow:auto;}/*!sc*/
data-styled.g6[id="Wiki__Main-sc-16q9onf-2"]{content:"kXmPAY,"}/*!sc*/
.dSeHES{margin:0;padding:1rem 0 0 1rem;font-size:1rem;}/*!sc*/
data-styled.g7[id="Wiki__RelatedLinksHeader-sc-16q9onf-3"]{content:"dSeHES,"}/*!sc*/
.ikXvAQ{list-style:none;padding-left:1rem;margin:0;}/*!sc*/
.ikXvAQ > li{padding:0;line-height:1;}/*!sc*/
data-styled.g8[id="Wiki__RelatedLinks-sc-16q9onf-4"]{content:"ikXvAQ,"}/*!sc*/
</style><link rel="sitemap" type="application/xml" href="/cat-logic/sitemap-index.xml"/><title data-gatsby-head="true">Cat Logic - Shell 명령어</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Wiki__Container-sc-16q9onf-0 gqosYh"><div class="Wiki__Side-sc-16q9onf-1 hKa-dnq"><div><div><h3 class="Wiki__RelatedLinksHeader-sc-16q9onf-3 dSeHES">Related Links</h3><ul class="Wiki__RelatedLinks-sc-16q9onf-4 ikXvAQ"><li><a href="../mac-os" style="font-size:0.5em;margin-right:0.5em">mac-os</a></li><li><a href="../vim" style="font-size:0.5em;margin-right:0.5em">vim</a></li><li><a href="../crontab" style="font-size:0.5em;margin-right:0.5em">crontab</a></li><li><a href="../tools" style="font-size:0.5em;margin-right:0.5em">tools</a></li><li><a href="../linux" style="font-size:0.5em;margin-right:0.5em">linux</a></li></ul></div></div></div><div class="Wiki__Main-sc-16q9onf-2 kXmPAY"><h1>Shell 명령어</h1><div class="Toc__Container-sc-1f76i2s-0 jKwTdT"><ul>
<li>
<p><a href="#shell-%EB%AA%85%EB%A0%B9%EC%96%B4">Shell 명령어</a></p>
<ul>
<li>
<p><a href="#man---%EB%A7%A4%EB%89%B4%EC%96%BC">man - 매뉴얼</a></p>
<ul>
<li><a href="#command1%EC%97%90%EC%84%9C-%EC%88%AB%EC%9E%90%EC%9D%98-%EC%9D%98%EB%AF%B8"><code class="language-text">COMMAND(1)</code>에서 숫자의 의미?</a></li>
</ul>
</li>
<li>
<p><a href="#set--ex"><code class="language-text">set -ex</code></a></p>
</li>
<li>
<p><a href="#bashrc-rc%EC%9D%98-%EC%9D%98%EB%AF%B8">.bash<strong>rc</strong> rc의 의미?</a></p>
</li>
<li>
<p><a href="#parameter-fallback-default-value">parameter fallback (default value)</a></p>
</li>
<li>
<p><a href="#redirections">Redirections</a></p>
</li>
<li>
<p><a href="#built-in-commands">Built-in Commands</a></p>
<ul>
<li>
<p><a href="#time---%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%8B%A4%ED%96%89%EC%8B%9C%EA%B0%84-%EC%B8%A1%EC%A0%95">time - 명령어 실행시간 측정</a></p>
</li>
<li>
<p><a href="#readlink---%EC%8B%AC%EB%B3%BC%EB%A6%AD-%EB%A7%81%ED%81%AC-%EA%B2%BD%EB%A1%9C-%ED%99%95%EC%9D%B8">readlink - 심볼릭 링크 경로 확인</a></p>
</li>
<li>
<p><a href="#sed---%ED%8C%8C%EC%9D%BC-%ED%8A%B9%EC%A0%95-%EB%9D%BC%EC%9D%B8%EB%A7%8C-%EC%9D%BD%EA%B8%B0">sed - 파일 특정 라인만 읽기</a></p>
</li>
<li>
<p><a href="#nohup---%EB%A9%88%EC%B6%94%EC%A7%80-%EC%95%8A%EA%B3%A0-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0">nohup - 멈추지 않고 명령어 실행하기</a></p>
<ul>
<li>
<p><a href="#stdout%EC%9D%80-nohupout%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%9C%EB%8B%A4">stdout은 <code class="language-text">nohup.out</code>에 저장된다.</a></p>
</li>
<li>
<p><a href="#background-job%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89%ED%95%98%EC%9E%90">Background Job으로 실행하자.</a></p>
</li>
<li>
<p><a href="#nohup%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89%ED%95%9C-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EB%A5%BC-%EC%A2%85%EB%A3%8C%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95"><code class="language-text">nohup</code>으로 실행한 프로세스를 종료하는 방법</a></p>
<ul>
<li><a href="#ps-aux%EB%A1%9C-%EC%B0%BE%EC%95%84%EB%B3%B4%EC%9E%90"><code class="language-text">ps aux</code>로 찾아보자</a></li>
<li><a href="#background%EB%A1%9C-%EB%9D%84%EC%9A%B4-%EA%B2%BD%EC%9A%B0-%EC%A2%80-%EB%8D%94-%EC%95%8C%EA%B8%B0-%EC%89%BD%EB%8B%A4">background로 띄운 경우 좀 더 알기 쉽다.</a></li>
<li><a href="#%EC%A2%80-%EB%8D%94-%EB%98%91%EB%98%91%ED%95%9C-%EB%B0%A9%EB%B2%95">좀 더 똑똑한 방법</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#tools">Tools</a></p>
<ul>
<li>
<p><a href="#marker---the-terminal-command-palette">marker - the terminal command palette</a></p>
</li>
<li>
<p><a href="#tmux">Tmux</a></p>
</li>
<li>
<p><a href="#tmuxinator">Tmuxinator</a></p>
<ul>
<li><a href="#%EC%A7%80%EC%97%AD%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EA%B2%BD%EC%9A%B0">지역적으로 사용할 경우</a></li>
<li><a href="#%EC%A0%84%EC%97%AD%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EA%B2%BD%EC%9A%B0">전역적으로 사용할 경우</a></li>
</ul>
</li>
<li>
<p><a href="#fzf">FZF</a></p>
<ul>
<li>
<p><a href="#fzf--git">FZF + git</a></p>
<ul>
<li><a href="#%EB%B8%8C%EB%9E%9C%EC%B9%98-%EB%AA%A9%EB%A1%9D-%EB%B0%8F-%EC%9E%91%EC%97%85-%EB%82%B4%EC%9A%A9">브랜치 목록 및 작업 내용</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#curl">curl</a></p>
<ul>
<li><a href="#%EC%9E%AC%EC%8B%9C%EB%8F%84---retry">재시도 <code class="language-text">--retry</code></a></li>
<li><a href="#url">URL</a></li>
</ul>
</li>
<li>
<p><a href="#ping">ping</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#python-shell-tools">python shell tools</a></p>
<ul>
<li><a href="#python--m-jsontool%EC%9C%BC%EB%A1%9C-json-beautify"><code class="language-text">python -m json.tool</code>으로 JSON beautify</a></li>
<li><a href="#python--m-httpserver%EB%A1%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%8B%A4%ED%96%89"><code class="language-text">python -m http.server</code>로 간단한 웹서버 실행</a></li>
</ul>
</li>
</ul>
</li>
</ul></div><div class="WikiContent__Container-sc-q3jb6a-0 jzROSZ">
<h2 id="man---매뉴얼" style="position:relative;"><a href="#man---%EB%A7%A4%EB%89%B4%EC%96%BC" aria-label="man   매뉴얼 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>man - 매뉴얼</h2>
<p>어떤 명령이든 <code class="language-text">man COMMAND</code>로 메뉴얼을 확인하자. 내장 명령어라면 대부분 제공한다.</p>
<p><a href="https://github.com/tldr-pages/tldr">tldr</a> 도구도 좋다.
브라우저로 검색할 필요 없이 <code class="language-text">tldr COMMAND</code>로 간단한 사용 예제도 볼 수 있다.</p>
<p>Bash에 대한 내용도 <code class="language-text">man bash</code>로 알 수 있다. <code class="language-text">if [ -e file ]</code>에서 <code class="language-text">-e</code>를 모르겠다면 메뉴얼에서 확인할 수 있다.</p>
<h3 id="command1에서-숫자의-의미" style="position:relative;"><a href="#command1%EC%97%90%EC%84%9C-%EC%88%AB%EC%9E%90%EC%9D%98-%EC%9D%98%EB%AF%B8" aria-label="command1에서 숫자의 의미 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">COMMAND(1)</code>에서 숫자의 의미?</h3>
<p><code class="language-text">man ls</code>의 경우에는 다음과 같이 명령어와 괄호안에 숫자가 함께 표기된다:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">man</span> <span class="token function">ls</span>
LS<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>           General Commands Manual           LS<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

NAME
     <span class="token function">ls</span> – list directory contents</code></pre></div>
<p>이는 section을 의미한다. 이에 대한 정보는 <code class="language-text">man</code> 명령어의 메뉴얼에서 확인할 수 있다!</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">man</span> <span class="token function">man</span>

The <span class="token function">man</span> utility finds and displays online manual documentation pages.  If mansect is provided, <span class="token function">man</span> restricts the search to the specific section of the manual.

The sections of the manual are:
     <span class="token number">1</span>.   General Commands Manual
     <span class="token number">2</span>.   System Calls Manual
     <span class="token number">3</span>.   Library Functions Manual
     <span class="token number">4</span>.   Kernel Interfaces Manual
     <span class="token number">5</span>.   File Formats Manual
     <span class="token number">6</span>.   Games Manual
     <span class="token number">7</span>.   Miscellaneous Information Manual
     <span class="token number">8</span>.   System Manager<span class="token string">'s Manual
     9.   Kernel Developer'</span>s Manual</code></pre></div>
<p>즉, <code class="language-text">LS(1)</code>는 일반 명령어 메뉴얼을 의미한다.</p>
<p><code class="language-text">intro</code>는 각종 명령어와 도구, shell 등에 대한 소개(introduction)를 담당하고 여러 섹션의 메뉴얼이 있는데,
<code class="language-text">man 1 intro</code>, <code class="language-text">man 3 intro</code>, <code class="language-text">man 9 intro</code> 등으로 각 section을 확인할 수 있다.</p>
<h2 id="set--ex" style="position:relative;"><a href="#set--ex" aria-label="set  ex permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">set -ex</code></h2>
<p>도커파일이나 스크립트를 보면 <code class="language-text">set -ex</code> 구문이 많이 보인다.</p>
<ul>
<li><code class="language-text">-e</code>: 각 라인의 명령어가 실행될 때 리턴값이 실패를 의미하면 종료한다.</li>
<li><code class="language-text">-x</code>: 실행하는 명령어를 출력한다.</li>
</ul>
<p>디버깅용으로 유용하다 함.</p>
<h2 id="bashrc-rc의-의미" style="position:relative;"><a href="#bashrc-rc%EC%9D%98-%EC%9D%98%EB%AF%B8" aria-label="bashrc rc의 의미 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.bash<strong>rc</strong> rc의 의미?</h2>
<p>Run Commands.</p>
<p><a href="https://superuser.com/questions/173165/what-does-the-rc-in-bashrc-etc-mean">https://superuser.com/questions/173165/what-does-the-rc-in-bashrc-etc-mean</a><br>
<a href="https://en.wikipedia.org/wiki/RUNCOM">https://en.wikipedia.org/wiki/RUNCOM</a></p>
<p><code class="language-text">.bashrc</code>, <code class="language-text">.npmrc</code> 등 자주 보여서 찾아봤다.</p>
<h2 id="parameter-fallback-default-value" style="position:relative;"><a href="#parameter-fallback-default-value" aria-label="parameter fallback default value permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>parameter fallback (default value)</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">echo ${VARIABLE:-word}</code></pre></div>
<p><code class="language-text">$VARIABLE</code>이 null 또는 unset 상태면 <code class="language-text">word</code>를 반환한다.</p>
<p>oh-my-zsh의 사용 예시:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="token variable">${ZSH_CUSTOM<span class="token operator">:-</span>$HOME<span class="token operator">/</span>.oh-my-zsh<span class="token operator">/</span>custom}</span>/plugins/zsh-syntax-highlighting</code></pre></div>
<p><code class="language-text">$ZSH_CUSTOM</code>이 없으면 <code class="language-text">~/.oh-my-zsh/custom</code>을 사용한다는 의미.</p>
<p>ref. <a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html">https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html</a></p>
<h2 id="redirections" style="position:relative;"><a href="#redirections" aria-label="redirections permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Redirections</h2>
<p><a href="https://www.gnu.org/software/bash/manual/html_node/Redirections.html">https://www.gnu.org/software/bash/manual/html_node/Redirections.html</a></p>
<p>링크에 나오는 내용. 다음 2개는 결과가 다르다.
순서에 따라 다른 동작을 하므로 주의할 필요가 있다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># 1</span>
<span class="token function">ls</span> <span class="token operator">></span> dirlist <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span></code></pre></div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># 2</span>
<span class="token function">ls</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">></span> dirlist</code></pre></div>
<p>#1은 stdout을 <em>dirlist</em>로 리다이렉트하고, stderr를 stdout으로 리다이렉트하는데,
stdout은 이미 <em>dirlist</em>로 리다이렉트되었으므로 stderr도 <em>dirlist</em>로 리다이렉트된다.
결론은 stdout과 stderr 모두 <em>dirlist</em>로 리다이렉트된다.</p>
<p>반면에 #2는 stderr을 stdout으로 리다이렉트하고, stdout을 <em>dirlist</em>로 리다이렉트한다.
결론은 각각 <em>dirlist</em>와 stdout으로 리다이렉트된다.</p>
<h2 id="built-in-commands" style="position:relative;"><a href="#built-in-commands" aria-label="built in commands permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Built-in Commands</h2>
<h3 id="time---명령어-실행시간-측정" style="position:relative;"><a href="#time---%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%8B%A4%ED%96%89%EC%8B%9C%EA%B0%84-%EC%B8%A1%EC%A0%95" aria-label="time   명령어 실행시간 측정 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>time - 명령어 실행시간 측정</h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ /usr/bin/time <span class="token function">git</span> fetch
        <span class="token number">2.28</span> real         <span class="token number">0.03</span> user         <span class="token number">0.02</span> sys</code></pre></div>
<ul>
<li>real: 총 소요시간</li>
<li>user: user mode에서 소요된 CPU time</li>
<li>sys: kernal mode에서 소요된 CPU time</li>
</ul>
<p><code class="language-text">-h</code> 옵션으로 익숙한 시간 단위로 표기할 수 있다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token builtin class-name">type</span> <span class="token parameter variable">-a</span> <span class="token function">time</span>
<span class="token function">time</span> is a reserved word
<span class="token function">time</span> is /usr/bin/time</code></pre></div>
<p><code class="language-text">time</code>은 셸 예약어로 되어있는데, 실행파일은 <code class="language-text">/usr/bin/time</code>에 있다.
예약어를 사용하면 <code class="language-text">time g fetch</code>와 같이 alias를 사용할 수 있고, 직접 실행파일을 사용하면 alias를 사용할 수 없다.</p>
<p>ref. <a href="https://linuxize.com/post/linux-time-command/">https://linuxize.com/post/linux-time-command/</a></p>
<h3 id="readlink---심볼릭-링크-경로-확인" style="position:relative;"><a href="#readlink---%EC%8B%AC%EB%B3%BC%EB%A6%AD-%EB%A7%81%ED%81%AC-%EA%B2%BD%EB%A1%9C-%ED%99%95%EC%9D%B8" aria-label="readlink   심볼릭 링크 경로 확인 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>readlink - 심볼릭 링크 경로 확인</h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ readlink <span class="token parameter variable">-f</span> <span class="token variable"><span class="token variable">`</span><span class="token function">which</span> <span class="token function">node</span><span class="token variable">`</span></span>
/home/linuxbrew/.linuxbrew/Cellar/node/19.9.0/bin/node</code></pre></div>
<p>심볼릭 링크를 따라가서 실제 경로를 알 수 있다.</p>
<h3 id="sed---파일-특정-라인만-읽기" style="position:relative;"><a href="#sed---%ED%8C%8C%EC%9D%BC-%ED%8A%B9%EC%A0%95-%EB%9D%BC%EC%9D%B8%EB%A7%8C-%EC%9D%BD%EA%B8%B0" aria-label="sed   파일 특정 라인만 읽기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sed - 파일 특정 라인만 읽기</h3>
<p><a href="https://unix.stackexchange.com/questions/288521/with-the-linux-cat-command-how-do-i-show-only-certain-lines-by-number">https://unix.stackexchange.com/questions/288521/with-the-linux-cat-command-how-do-i-show-only-certain-lines-by-number</a></p>
<p><code class="language-text">cat</code>은 전체라인만 읽지만 <code class="language-text">sed -n -e 1,3p -e 10p</code>은 1~3, 10 라인 읽을 수 있다.</p>
<p>sed, grep, awk 를 이용한 특정 라인 범위 내에서 특정 단어를 포함한 라인으로 좁히고 특정 형태로 출력하도록 조합할 수 있다:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-e</span> <span class="token number">1</span>,5446p data.txt <span class="token operator">|</span> <span class="token function">grep</span> <span class="token boolean">false</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1}'</span></code></pre></div>
<p>보통 <code class="language-text">sed</code>는 파일 내용을 수정하고 백업을 만드는데 사용했는데..</p>
<p><code class="language-text">-n</code>: 입력된 행을 표준 출력으로 보낸다.<br>
<code class="language-text">-e</code>: 여러개의 범위를 지정하려면 <code class="language-text">-e</code>로 구분한다. <code class="language-text">sed -n 1,3p data.txt</code> 이렇게 하나의 범위라면 <code class="language-text">-e</code>는 생략해도 된다.</p>
<h3 id="nohup---멈추지-않고-명령어-실행하기" style="position:relative;"><a href="#nohup---%EB%A9%88%EC%B6%94%EC%A7%80-%EC%95%8A%EA%B3%A0-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0" aria-label="nohup   멈추지 않고 명령어 실행하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>nohup - 멈추지 않고 명령어 실행하기</h3>
<p><code class="language-text">nohup</code>은 no hangup의 줄임말. 터미널을 종료해도 중지 시그널을 무시하고 진행한다.</p>
<hr>
<p><code class="language-text">nohup</code> 명령어로 스크립트를 실행하면,
세션이 끊어져도 스크립트가 진행된다는 것만 알았지,
실제로 사용해 본적이 없어서 간단한 예제로 정리.</p>
<p>사용하기 전에 가졌던 의문 3가지</p>
<ol>
<li>로그를 실시간으로 확인할 수 있는가?</li>
<li>터미널을 꺼도 동작하고 있는가?</li>
<li><code class="language-text">nohup</code>으로 실행한 프로세스를 어떻게 찾아서 끌 수 있는가?</li>
</ol>
<p>사용방법:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">nohup</span> COMMAND</code></pre></div>
<p><em>COMMAND</em> 에 환경변수를 전달하려면:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token assign-left variable">FOO</span><span class="token operator">=</span><span class="token string">'foo'</span> <span class="token function">nohup</span> COMMAND</code></pre></div>
<h4 id="stdout은-nohupout에-저장된다" style="position:relative;"><a href="#stdout%EC%9D%80-nohupout%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%9C%EB%8B%A4" aria-label="stdout은 nohupout에 저장된다 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>stdout은 <code class="language-text">nohup.out</code>에 저장된다.</h4>
<p>stdout은 <code class="language-text">nohup.out</code>에 저장된다.
명령어가 실행중이라면 <code class="language-text">tail -F nohup.out</code>으로 실시간으로 확인할 수 있다.</p>
<h4 id="background-job으로-실행하자" style="position:relative;"><a href="#background-job%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89%ED%95%98%EC%9E%90" aria-label="background job으로 실행하자 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Background Job으로 실행하자.</h4>
<p>그냥 <code class="language-text">&amp;</code> 없이 실행하면 foregorund로 돈다. <code class="language-text">nohup</code>만 사용한다고해서 background로 전환되지 않는다.
이 상태에서 <code class="language-text">ctrl + c</code>로 빠져나오면 <strong>스크립트가 종료</strong>된다.</p>
<p><code class="language-text">nohup COMMAND &amp;</code>로 백그라운드 잡으로 실행하자.</p>
<p>ref. <a href="https://www.cyberciti.biz/tips/nohup-execute-commands-after-you-exit-from-a-shell-prompt.html">https://www.cyberciti.biz/tips/nohup-execute-commands-after-you-exit-from-a-shell-prompt.html</a></p>
<h4 id="nohup으로-실행한-프로세스를-종료하는-방법" style="position:relative;"><a href="#nohup%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89%ED%95%9C-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EB%A5%BC-%EC%A2%85%EB%A3%8C%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95" aria-label="nohup으로 실행한 프로세스를 종료하는 방법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">nohup</code>으로 실행한 프로세스를 종료하는 방법</h4>
<h5 id="ps-aux로-찾아보자" style="position:relative;"><a href="#ps-aux%EB%A1%9C-%EC%B0%BE%EC%95%84%EB%B3%B4%EC%9E%90" aria-label="ps aux로 찾아보자 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">ps aux</code>로 찾아보자</h5>
<p><em>X.</em> <code class="language-text">ps aux | grep nohup</code> 결과는 없다.</p>
<p><em>O.</em> <code class="language-text">ps aux | grep COMMAND</code> 결과는 있다!</p>
<p>예를 들어 <code class="language-text">nohup ./tick.sh</code>로 실행한 경우 <code class="language-text">ps aux | grep tick</code> 검색하면:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">bash</span> alleb <span class="token number">33723</span> <span class="token number">0.0</span> <span class="token number">0.0</span> <span class="token number">4283996</span> <span class="token number">1252</span> ?? S <span class="token number">11</span>:16AM <span class="token number">0</span>:00.29 /bin/bash ./tick.sh</code></pre></div>
<p>PID를 알 수 있으므로 <code class="language-text">kill -9 33723</code>으로 종료할 수 있다.</p>
<h5 id="background로-띄운-경우-좀-더-알기-쉽다" style="position:relative;"><a href="#background%EB%A1%9C-%EB%9D%84%EC%9A%B4-%EA%B2%BD%EC%9A%B0-%EC%A2%80-%EB%8D%94-%EC%95%8C%EA%B8%B0-%EC%89%BD%EB%8B%A4" aria-label="background로 띄운 경우 좀 더 알기 쉽다 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>background로 띄운 경우 좀 더 알기 쉽다.</h5>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">~/workspace/nohup-test
❯ <span class="token function">nohup</span> ./tick.sh <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">10809</span>
appending output to nohup.out

~/workspace/nohup-test
❯ <span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token number">10809</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  + <span class="token number">10809</span> killed     <span class="token function">nohup</span> ./tick.sh</code></pre></div>
<p>Background Job으로 실행하면 PID가 바로 출력되어 알 수 있다.</p>
<h5 id="좀-더-똑똑한-방법" style="position:relative;"><a href="#%EC%A2%80-%EB%8D%94-%EB%98%91%EB%98%91%ED%95%9C-%EB%B0%A9%EB%B2%95" aria-label="좀 더 똑똑한 방법 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>좀 더 똑똑한 방법</h5>
<p>백그라운드로 전환 시 출력되는 PID를 파일로 저장하자.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">nohup</span> my_command <span class="token operator">></span> my.log <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$!</span> <span class="token operator">></span> save_pid.txt</code></pre></div>
<p><code class="language-text">$!</code>은 background로 돌린 PID를 저장하고 있다.<br>
터미널이 종료되어 PID를 찾을 수 없어도 파일로 남아있으니 안심이다.</p>
<p>파일의 PID를 읽어들여 종료할 수 있다:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> save_pid.txt<span class="token variable">`</span></span></code></pre></div>
<p>ref. <a href="https://stackoverflow.com/questions/17385794/how-to-get-the-process-id-to-kill-a-nohup-process/17389526">https://stackoverflow.com/questions/17385794/how-to-get-the-process-id-to-kill-a-nohup-process/17389526</a></p>
<h2 id="tools" style="position:relative;"><a href="#tools" aria-label="tools permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tools</h2>
<h3 id="marker---the-terminal-command-palette" style="position:relative;"><a href="#marker---the-terminal-command-palette" aria-label="marker   the terminal command palette permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>marker - the terminal command palette</h3>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/cat-logic/static/62b45e1525d107fdf23ba52e0f75fd3d/0d1a4/cli-marker-sample.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 19.594594594594593%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA3UlEQVR42kXPy26DMBAFUIMaqc0maVq1tnHCw4BDMIhX0lVaJOD/P+l2sFplcXRH8uhqzM59j6MxkGmGKI6hggBCCASUUkpHcAHOJeHk05GCuz33vu6rI3a7A9jP/Y6vYcDtesU8z5imyVmWBeM4Yqbsh2+UtkdZXpBlBlGU4XRKSERCKKUQhhqvhw8wQ9d1XYeOLs3zHHVdo2kaXEqLJDHQWiNNU5o1YvrB27vEy5bD857B2IZ4hD2sBdZatG2L/3ktXtPaCkVRoKosFedUFuJps6eyLXzfJ95fPvwCDfdtrA99VjQAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="marker sample"
        title=""
        src="/cat-logic/static/62b45e1525d107fdf23ba52e0f75fd3d/fcda8/cli-marker-sample.png"
        srcset="/cat-logic/static/62b45e1525d107fdf23ba52e0f75fd3d/12f09/cli-marker-sample.png 148w,
/cat-logic/static/62b45e1525d107fdf23ba52e0f75fd3d/e4a3f/cli-marker-sample.png 295w,
/cat-logic/static/62b45e1525d107fdf23ba52e0f75fd3d/fcda8/cli-marker-sample.png 590w,
/cat-logic/static/62b45e1525d107fdf23ba52e0f75fd3d/efc66/cli-marker-sample.png 885w,
/cat-logic/static/62b45e1525d107fdf23ba52e0f75fd3d/0d1a4/cli-marker-sample.png 1036w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p><a href="https://github.com/pindexis/marker">https://github.com/pindexis/marker</a></p>
<p>CTRL + SPACE 입력하면 저장한 명령어나 히스토리를 선택할 수 있다.
자주 사용하지만 너무 긴 명령어를 기록하는데 사용한다.
자주 히스토리에서 찾아서 입력하는 명령을 등록해서 사용하면 유용하다.</p>
<ul>
<li><code class="language-text">marker mark</code> - 명령어를 북마크한다.</li>
<li><code class="language-text">marker remove</code> - 북마크를 삭제한다.</li>
</ul>
<h3 id="tmux" style="position:relative;"><a href="#tmux" aria-label="tmux permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tmux</h3>
<p><a href="https://github.com/tmux/tmux">https://github.com/tmux/tmux</a></p>
<p>Terminal Multiplexer.</p>
<p><strong>Preview:</strong></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">~/workspace/cat-logic main*                                                                          <span class="token number">19</span>:13:40
❯ <span class="token function">ls</span>
README.md docs      sites

~/workspace/cat-logic main*                                                                          <span class="token number">19</span>:13:41
❯






 ❐ <span class="token function">cat</span>  ↑ 11d 1h 22m  <span class="token number">1</span> editor  <span class="token number">2</span> cli  <span class="token number">3</span> serv<span class="token operator">></span>  ↑ ◼◼◼◼◼◼◼◼◼◼ <span class="token number">100</span>% <span class="token operator">|</span> <span class="token number">19</span>:13 <span class="token operator">|</span> <span class="token number">28</span> Aug  allebpark  ip-192-168-0-9</code></pre></div>
<p>하나의 화면에서 여러개의 터미널을 제어할 수 있다.
터미널 앱을 종료하더라도 백그라운드로 실행된다.
언제든지 <code class="language-text">tmux</code> 명령어로 tmux session에 연결할 수 있다.
이것은 사실상 tmux 세션 내에서 실행되는 모든 명령어가 백그라운드로 실행되는 것을 의미하기 때문에
오래 걸리는 프로세스를 실행하고, 앱이 종료되어도 프로세스는 유지되니 마음이 좀 놓인다.</p>
<ul>
<li><code class="language-text">tmux</code>: 새 세션을 생성하거나 생성된 세션에 attach 한다.</li>
<li><code class="language-text">tmux new -s [NAME]</code>: 새 세션을 생성한다.</li>
</ul>
<p>기본적으로 <code class="language-text">C-b</code>키가 tmux shortcut의 시동키다.
나는 controll과 b 사이가 멀어서 <code class="language-text">C-a</code>로 사용한다:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"># ~/.tmux.conf.local
set -g prefix C-a</code></pre></div>
<h3 id="tmuxinator" style="position:relative;"><a href="#tmuxinator" aria-label="tmuxinator permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tmuxinator</h3>
<p><a href="https://github.com/tmuxinator/tmuxinator">https://github.com/tmuxinator/tmuxinator</a></p>
<p>tmux session을 관리하는데 도움을 주는 도구.
파일로 tmux 설정을 저장하거나, 저장된 파일로 tmux 세션을 생성한다.</p>
<p>설정 파일을 <code class="language-text">~/.config/tmuxinator/</code>에 저장하여 전역으로 사용하거나
프로젝트별로 <code class="language-text">./.tmuxinator.yml</code>에 저장하여 사용할 수 있다.
개인 프로젝트는 코드베이스에 포함하는 것도 좋겠다.</p>
<h4 id="지역적으로-사용할-경우" style="position:relative;"><a href="#%EC%A7%80%EC%97%AD%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EA%B2%BD%EC%9A%B0" aria-label="지역적으로 사용할 경우 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>지역적으로 사용할 경우</h4>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">project_name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>project

<span class="token key atrule">windows</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">editor</span><span class="token punctuation">:</span> vi
  <span class="token punctuation">-</span> <span class="token key atrule">cli</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> npm run develop</code></pre></div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ tmuxinator  <span class="token comment"># or tmuxinator start</span></code></pre></div>
<p>start 시 설정 이름을 생략하면 <code class="language-text">./.tmuxinator.yml</code>을 찾는다.</p>
<h4 id="전역적으로-사용할-경우" style="position:relative;"><a href="#%EC%A0%84%EC%97%AD%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%A0-%EA%B2%BD%EC%9A%B0" aria-label="전역적으로 사용할 경우 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>전역적으로 사용할 경우</h4>
<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>project
<span class="token key atrule">root</span><span class="token punctuation">:</span> ~/workspace/my<span class="token punctuation">-</span>project

<span class="token key atrule">windows</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">editor</span><span class="token punctuation">:</span> vi
  <span class="token punctuation">-</span> <span class="token key atrule">cli</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">server</span><span class="token punctuation">:</span> npm run develop</code></pre></div>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ tmuxinator my-project  <span class="token comment"># or tmuxinator start my-project</span></code></pre></div>
<p>start 시 설정 이름을 지정하면 <code class="language-text">~/.config/tmuxinator/</code>에서 <code class="language-text">name</code>을 찾는다.</p>
<h3 id="fzf" style="position:relative;"><a href="#fzf" aria-label="fzf permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FZF</h3>
<p><a href="https://github.com/junegunn/fzf">https://github.com/junegunn/fzf</a></p>
<p>A command-line fuzzy-finder. 검색 도구로 사용한다. 매우 추천하는 도구.
인터렉티브 UI를 잘 제공해서, 주 기능인 파일 검색외에도 리스트에 대한 UNIX 파이프라인 필터로 사용하기 유용하다.</p>
<p><img src="https://raw.githubusercontent.com/junegunn/i/master/fzf-preview.png" alt="fzf github preview"></p>
<p><strong>preview window scrolling</strong></p>
<p><code class="language-text">--preview</code> 옵션을 사용하면 미리보기 윈도우를 사용할 수 있는데(이미지의 오른쪽 코드 영역), 여기서 스크롤할 수 있다.
<code class="language-text">shift</code> + <code class="language-text">up/down</code> 또는 마우스 휠로 할 수 있다.</p>
<p><strong>현재 디렉토리 내에서 파일 검색</strong></p>
<p><code class="language-text">CTRL-T</code>를 누르면 파일 인터렉티브로 파일을 검색한다. 선택하면 파일 경로가 붙여 넣는다.
예를들어 <code class="language-text">cat </code>까지 입력하고 <code class="language-text">CTRL-T</code>로 파일을 찾아 선택하면 <code class="language-text">cat /path/to/file</code> 경로가 완성된다.</p>
<p>fzf가 없으면 보통, tab 두 번 눌러서 모든 파일을 확인할텐데, <code class="language-text">CTRL-T</code>를 사용하는 편이 더 편리하다.</p>
<h4 id="fzf--git" style="position:relative;"><a href="#fzf--git" aria-label="fzf  git permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FZF + git</h4>
<h5 id="브랜치-목록-및-작업-내용" style="position:relative;"><a href="#%EB%B8%8C%EB%9E%9C%EC%B9%98-%EB%AA%A9%EB%A1%9D-%EB%B0%8F-%EC%9E%91%EC%97%85-%EB%82%B4%EC%9A%A9" aria-label="브랜치 목록 및 작업 내용 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>브랜치 목록 및 작업 내용</h5>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">lsb <span class="token operator">=</span> <span class="token operator">!</span>git branch <span class="token punctuation">\</span>
  <span class="token operator">|</span> fzf <span class="token parameter variable">--preview</span> <span class="token string">'echo {} | cut -c3- | xargs git show --color=always'</span> <span class="token parameter variable">--height</span> <span class="token number">90</span>% <span class="token punctuation">\</span>
  <span class="token operator">|</span> <span class="token function">cut</span> -c3-</code></pre></div>
<p><code class="language-text">.gitconfig</code>에 <code class="language-text">lsb</code>로 alias 등록하였다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">~/dotfiles main 7s                                                         <span class="token number">15</span>:43:03
❯ g lsb
                     ╭─────────────────────────────────────────────────────────────╮
                     │ commit cb9064a2c2b8292df2b039366263e4261ed72161        <span class="token number">1</span>/20││
                     │ Author: edunga1 <span class="token operator">&lt;</span>goonr21@gmail.com<span class="token operator">></span>                        ││
                     │ Date:   Thu Jun <span class="token number">15</span> <span class="token number">14</span>:30:47 <span class="token number">2023</span> +0900                     ││
                     │                                                            ││
                     │     Remove pylint from python toolchain                    ││
                     │                                                            ││
                     │     ruff is preferred                                      ││
                     │                                                            ││
                     │ <span class="token function">diff</span> <span class="token parameter variable">--git</span> a/vim/lua/lsp/python.lua b/vim/lua/lsp/python.lu││
                     │ index eb8a1cc<span class="token punctuation">..</span>1de0888 <span class="token number">100644</span>                              ││
                     │ --- a/vim/lua/lsp/python.lua                               ││
                     │ +++ b/vim/lua/lsp/python.lua                               ││
                     │ @@ -9,7 +9,6 @@ <span class="token builtin class-name">return</span> function<span class="token punctuation">(</span>ns, lspconfig<span class="token punctuation">)</span>              │
    wip              │    ns.register<span class="token punctuation">(</span>ns.builtins.formatting.autopep8<span class="token punctuation">)</span>             │
<span class="token operator">></span> * main             │    ns.register<span class="token punctuation">(</span>ns.builtins.formatting.isort<span class="token punctuation">)</span>                │
  <span class="token number">2</span>/2 ────────────── │    ns.register<span class="token punctuation">(</span>ns.builtins.formatting.ruff<span class="token punctuation">)</span>                 │
<span class="token operator">></span>                    ╰─────────────────────────────────────────────────────────────╯</code></pre></div>
<p>브랜치 목록 <code class="language-text">git branch</code>와 함께 가장 위 커밋의 diff <code class="language-text">git diff</code>를 보여준다.</p>
<h3 id="curl" style="position:relative;"><a href="#curl" aria-label="curl permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>curl</h3>
<p><a href="https://antonz.org/mastering-curl/">https://antonz.org/mastering-curl/</a></p>
<p>curl mastering 가이드. 옵션 설명과 함께 다양한 예제로 안내한다.</p>
<h4 id="재시도---retry" style="position:relative;"><a href="#%EC%9E%AC%EC%8B%9C%EB%8F%84---retry" aria-label="재시도   retry permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>재시도 <code class="language-text">--retry</code></h4>
<p><code class="language-text">--retry</code>는 특정 상태 코드에서만 재시도한다.
메뉴얼에 따르면 <code class="language-text">408</code>, <code class="language-text">429</code>, <code class="language-text">500</code>, <code class="language-text">502</code>, <code class="language-text">503</code>, <code class="language-text">504</code>가 모두이다:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token parameter variable">--retry</span> <span class="token operator">&lt;</span>num<span class="token operator">></span>
      If a transient error is returned when <span class="token function">curl</span> tries to perform a transfer, it will retry this number of <span class="token builtin class-name">times</span> before giving up. Setting the number to <span class="token number">0</span> makes <span class="token function">curl</span> <span class="token keyword">do</span> no retries <span class="token punctuation">(</span>which is the
      default<span class="token punctuation">)</span>. Transient error means either: a timeout, an FTP 4xx response code or an HTTP <span class="token number">408</span>, <span class="token number">429</span>, <span class="token number">500</span>, <span class="token number">502</span>, <span class="token number">503</span> or <span class="token number">504</span> response code.</code></pre></div>
<p>일시적인 오류(transient error)가 반환되면 재시도 한다고 한다.
따라서 특정 상태 코드만 재시도 하는 거 같은데, 다른 상태코드는 서버에서 명시적으로 내려주었을 가능성이 있으니 재시도하지 않는 것이 옳아 보인다.
다만, python의 requests나 Spring WebFux의 WebClient의 retry 상태 코드는 공식 문서에서 확인하지 못했다.
만약 모든 상태에 대해서 재시도 한다면 옵션 사용에 고민이 필요해 보인다.</p>
<h4 id="url" style="position:relative;"><a href="#url" aria-label="url permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>URL</h4>
<p>URL에 <code class="language-text">[]</code> 사용하면 순차적으로 요청을 보낼 수 있다:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> http://httpbin.org/anything/<span class="token punctuation">\</span><span class="token punctuation">[</span><span class="token number">8</span>-11<span class="token punctuation">\</span><span class="token punctuation">]</span>.txt
<span class="token punctuation">{</span>
  <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"http://httpbin.org/anything/8.txt"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"http://httpbin.org/anything/9.txt"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"http://httpbin.org/anything/10.txt"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"http://httpbin.org/anything/11.txt"</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">[]</code>는 alphanumeric series를 받으며, leading zero도 사용할 수 있다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> http://httpbin.org/anything/<span class="token punctuation">\</span><span class="token punctuation">[</span>008-011<span class="token punctuation">\</span><span class="token punctuation">]</span>.txt
<span class="token punctuation">{</span>
  <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"http://httpbin.org/anything/008.txt"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"http://httpbin.org/anything/009.txt"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"http://httpbin.org/anything/010.txt"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  <span class="token string">"url"</span><span class="token builtin class-name">:</span> <span class="token string">"http://httpbin.org/anything/011.txt"</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">httpbin.org</code>는 HTTP 테스트하기 위한 사이트이므로 위 예제 코드를 바로 돌려볼 수 있다.</p>
<h3 id="ping" style="position:relative;"><a href="#ping" aria-label="ping permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ping</h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">ping</span> <span class="token number">123.123</span>.123.123
<span class="token function">ping</span> www.google.com</code></pre></div>
<p>네트워크 진단 도구. <a href="../network">포트 번호를 받지 않는다. ICMP 메시지를 이용한다.</a></p>
<p>호스트 전송 실패 예시:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">❯ <span class="token function">ping</span> <span class="token number">123.123</span>.123.123
PING <span class="token number">123.123</span>.123.123 <span class="token punctuation">(</span><span class="token number">123.123</span>.123.123<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
Request <span class="token function">timeout</span> <span class="token keyword">for</span> icmp_seq <span class="token number">0</span>
Request <span class="token function">timeout</span> <span class="token keyword">for</span> icmp_seq <span class="token number">1</span>
Request <span class="token function">timeout</span> <span class="token keyword">for</span> icmp_seq <span class="token number">2</span>
Request <span class="token function">timeout</span> <span class="token keyword">for</span> icmp_seq <span class="token number">3</span></code></pre></div>
<p>호스트 응답 성공 예시:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">❯ <span class="token function">ping</span> www.google.com
PING www.google.com <span class="token punctuation">(</span><span class="token number">142.250</span>.199.100<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
<span class="token number">64</span> bytes from <span class="token number">142.250</span>.199.100: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">112</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">61.641</span> ms
<span class="token number">64</span> bytes from <span class="token number">142.250</span>.199.100: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">112</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">68.523</span> ms
<span class="token number">64</span> bytes from <span class="token number">142.250</span>.199.100: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">112</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">70.667</span> ms
<span class="token number">64</span> bytes from <span class="token number">142.250</span>.199.100: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">112</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">67.562</span> ms</code></pre></div>
<h2 id="python-shell-tools" style="position:relative;"><a href="#python-shell-tools" aria-label="python shell tools permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>python shell tools</h2>
<p>몇몇 파이썬 모듈은 CLI로 제공한다.</p>
<h3 id="python--m-jsontool으로-json-beautify" style="position:relative;"><a href="#python--m-jsontool%EC%9C%BC%EB%A1%9C-json-beautify" aria-label="python  m jsontool으로 json beautify permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">python -m json.tool</code>으로 JSON beautify</h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token builtin class-name">echo</span> <span class="token string">'{"foo":"bar"}'</span> <span class="token operator">|</span> python <span class="token parameter variable">-m</span> json.tool
<span class="token punctuation">{</span>
    <span class="token string">"foo"</span><span class="token builtin class-name">:</span> <span class="token string">"bar"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>API 마이그레이션 중 응답 diff를 보기 위해서 formatting 일관성을 맞춘다거나,
위 예제처럼 whitespace를 제거해서 보기 어려운 형태를 바꾸는 등 용도로 유용하다.</p>
<hr>
<p>어떻게 stdout으로 출력하는 지 코드를 좀 살펴봤다.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> argparse

parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
options <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>
outfile <span class="token operator">=</span> options<span class="token punctuation">.</span>outfile

<span class="token keyword">with</span> outfile<span class="token punctuation">:</span>
  json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> outfile<span class="token punctuation">,</span> sort_keys<span class="token operator">=</span>sort_keys<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
  outfile<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">json.dump</code> 또는 <code class="language-text">json.load</code>가 받는 인자는 <a href="https://docs.python.org/3/glossary.html#term-file-like-object">File object</a>로 추상화되어 있다.
stdout 또한 File object로 쓰기 <code class="language-text">write()</code> 할 수 있어서 함께 처리가능한 것 같다.</p>
<h3 id="python--m-httpserver로-간단한-웹서버-실행" style="position:relative;"><a href="#python--m-httpserver%EB%A1%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%9B%B9%EC%84%9C%EB%B2%84-%EC%8B%A4%ED%96%89" aria-label="python  m httpserver로 간단한 웹서버 실행 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">python -m http.server</code>로 간단한 웹서버 실행</h3>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ python <span class="token parameter variable">-m</span> http.server
$ python <span class="token parameter variable">-m</span> http.server <span class="token number">8080</span></code></pre></div>
<p>현재 디렉토리를 호스팅한다. python 2에서는 <code class="language-text">python -m SimpleHTTPServer</code>.</p></div><div class="Comments__Container-sc-1ajj4d9-0 gcJKrk"><hr/><div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/wiki/shell/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-adf0ad85d5744a13b71d.js\"],\"component---src-components-gatsby-templates-wiki-tsx\":[\"/component---src-components-gatsby-templates-wiki-tsx-5c2e2980702c72fc27d4.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-8f631674f884ce01bddf.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-8aeda40fb7691513019f.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="1ba1d7a9855d8a5628c2";</script><script src="/cat-logic/webpack-runtime-f0007e39228a9611ee2e.js" async></script><script src="/cat-logic/app-adf0ad85d5744a13b71d.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>