<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.12.9"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style data-styled="" data-styled-version="5.3.11">.jKwTdT{box-sizing:border-box;background-color:#f5f5f5;padding:1rem 1rem 1rem 0;}/*!sc*/
.jKwTdT ul{list-style:none;padding-left:1rem;margin:0;font-size:.8rem;}/*!sc*/
.jKwTdT ul p{margin:0;}/*!sc*/
.jKwTdT a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g1[id="Toc__Container-sc-1f76i2s-0"]{content:"jKwTdT,"}/*!sc*/
.jzROSZ{overflow:auto;}/*!sc*/
.jzROSZ a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.jzROSZ code:not(pre code){background-color:#f5f5f5;border-radius:.5rem;padding:.2rem .4rem;}/*!sc*/
.jzROSZ pre:has(code){font-size:85%;background-color:#f5f5f5;border-radius:.5rem;padding:1rem;overflow:auto;}/*!sc*/
.jzROSZ img{max-width:100%;}/*!sc*/
.jzROSZ blockquote{border-left:4px solid #ddd;padding-left:1rem;margin-left:0;font-style:italic;}/*!sc*/
data-styled.g2[id="WikiContent__Container-sc-q3jb6a-0"]{content:"jzROSZ,"}/*!sc*/
.gcJKrk{padding-top:20rem;}/*!sc*/
data-styled.g3[id="Comments__Container-sc-1ajj4d9-0"]{content:"gcJKrk,"}/*!sc*/
.gqosYh{display:grid;grid-template-columns:1fr;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;}/*!sc*/
@media (min-width:700px){.gqosYh{grid-template-columns:minmax(300px,1fr) minmax(400px,1000px);}}/*!sc*/
data-styled.g4[id="Wiki__Container-sc-16q9onf-0"]{content:"gqosYh,"}/*!sc*/
.hKa-dnq{display:none;}/*!sc*/
@media (min-width:700px){.hKa-dnq{display:block;}}/*!sc*/
data-styled.g5[id="Wiki__Side-sc-16q9onf-1"]{content:"hKa-dnq,"}/*!sc*/
.kXmPAY{padding:0 1rem;overflow:auto;}/*!sc*/
data-styled.g6[id="Wiki__Main-sc-16q9onf-2"]{content:"kXmPAY,"}/*!sc*/
.dSeHES{margin:0;padding:1rem 0 0 1rem;font-size:1rem;}/*!sc*/
data-styled.g7[id="Wiki__RelatedLinksHeader-sc-16q9onf-3"]{content:"dSeHES,"}/*!sc*/
.ikXvAQ{list-style:none;padding-left:1rem;margin:0;}/*!sc*/
.ikXvAQ > li{padding:0;line-height:1;}/*!sc*/
data-styled.g8[id="Wiki__RelatedLinks-sc-16q9onf-4"]{content:"ikXvAQ,"}/*!sc*/
</style><link rel="sitemap" type="application/xml" href="/cat-logic/sitemap-index.xml"/><title data-gatsby-head="true">Cat Logic - Vim</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Wiki__Container-sc-16q9onf-0 gqosYh"><div class="Wiki__Side-sc-16q9onf-1 hKa-dnq"><h3 class="Wiki__RelatedLinksHeader-sc-16q9onf-3 dSeHES">Related Links</h3><ul class="Wiki__RelatedLinks-sc-16q9onf-4 ikXvAQ"><li><a href="../vimwiki" style="font-size:0.5em;margin-right:0.5em">vimwiki</a></li><li><a href="../mac-os" style="font-size:0.5em;margin-right:0.5em">mac-os</a></li><li><a href="../shell" style="font-size:0.5em;margin-right:0.5em">shell</a></li><li><a href="../python" style="font-size:0.5em;margin-right:0.5em">python</a></li><li><a href="../tools" style="font-size:0.5em;margin-right:0.5em">tools</a></li></ul></div><div class="Wiki__Main-sc-16q9onf-2 kXmPAY"><h1>Vim</h1><div class="Toc__Container-sc-1f76i2s-0 jKwTdT"><ul>
<li>
<p><a href="#vim">Vim</a></p>
<ul>
<li>
<p><a href="#neovim">Neovim</a></p>
<ul>
<li><a href="#lua-%EA%B0%80%EC%9D%B4%EB%93%9C">Lua 가이드</a></li>
<li><a href="#%EB%82%B4%EC%9E%A5-language-server-protocol-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0">내장 Language Server Protocol 사용하기</a></li>
</ul>
</li>
<li>
<p><a href="#%EB%8F%84%EC%9B%80%EB%A7%90-help">도움말 <code>:help</code></a></p>
<ul>
<li><a href="#usr_12txt-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A1%B0%ED%95%A9%EC%97%90-%EA%B4%80%ED%95%9C-%ED%8C%81"><code>usr_12.txt</code> 명령어 조합에 관한 팁</a></li>
</ul>
</li>
<li>
<p><a href="#use-cases">Use cases</a></p>
<ul>
<li><a href="#%ED%8C%8C%EC%9D%BC-%EA%B2%80%EC%83%89">파일 검색</a></li>
</ul>
</li>
<li>
<p><a href="#%EB%82%B4%EC%9E%A5-%EA%B8%B0%EB%8A%A5">내장 기능</a></p>
<ul>
<li>
<p><a href="#quickfix--location-list">quickfix &#x26; location list</a></p>
<ul>
<li><a href="#commands">commands</a></li>
<li><a href="#grep">grep</a></li>
<li><a href="#cdo-ldo-%EA%B2%80%EC%83%89%EB%90%9C-%EB%AA%A8%EB%93%A0-entry%EC%97%90-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%81%EC%9A%A9"><code>cdo</code>, <code>ldo</code> 검색된 모든 entry에 명령어 적용</a></li>
<li><a href="#cfdo-lfdo-%EA%B2%80%EC%83%89%EB%90%9C-%EB%AA%A8%EB%93%A0-%ED%8C%8C%EC%9D%BC%EC%97%90-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%81%EC%9A%A9"><code>cfdo</code>, <code>lfdo</code> 검색된 모든 파일에 명령어 적용</a></li>
<li><a href="#bufdo-%EB%AA%A8%EB%93%A0-buffer-%ED%8C%8C%EC%9D%BC%EC%97%90-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%81%EC%9A%A9"><code>bufdo</code> 모든 buffer 파일에 명령어 적용</a></li>
<li><a href="#user-function">User Function</a></li>
</ul>
</li>
<li>
<p><a href="#fuzzy-%EB%A7%A4%EC%B9%AD-matchfuzzy">Fuzzy 매칭: <code>matchfuzzy()</code></a></p>
</li>
<li>
<p><a href="#make-and-makeprg"><code>:make</code> and <code>makeprg</code></a></p>
<ul>
<li><a href="#build-integration---how-to-do-90-of-what-plugins-do">build integration - How to Do 90% of What Plugins Do</a></li>
</ul>
</li>
<li>
<p><a href="#matchit">matchit</a></p>
</li>
<li>
<p><a href="#%ED%84%B0%EB%AF%B8%EB%84%90-%EC%97%90%EB%AE%AC%EB%A0%88%EC%9D%B4%ED%84%B0-terminal">터미널 에뮬레이터: <code>:terminal</code></a></p>
</li>
</ul>
</li>
<li>
<p><a href="#%EA%B5%AC%EB%AC%B8-%EA%B0%95%EC%A1%B0">구문 강조</a></p>
</li>
<li>
<p><a href="#registers">Registers</a></p>
</li>
<li>
<p><a href="#variables">Variables</a></p>
<ul>
<li><a href="#path"><code>path</code></a></li>
</ul>
</li>
<li>
<p><a href="#plugin-%EB%A7%8C%EB%93%A4%EA%B8%B0">Plugin 만들기</a></p>
<ul>
<li><a href="#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%A1%B0">프로젝트 구조</a></li>
<li><a href="#autoload"><code>autoload</code></a></li>
<li><a href="#ftplugin"><code>ftplugin</code></a></li>
<li><a href="#plug-sid"><code>&#x3C;Plug></code> <code>&#x3C;SID></code></a></li>
</ul>
</li>
<li>
<p><a href="#plugins">Plugins</a></p>
<ul>
<li>
<p><a href="#chrisbracsvvim">chrisbra/csv.vim</a></p>
<ul>
<li><a href="#features">Features</a></li>
</ul>
</li>
<li>
<p><a href="#tpopevim-fugitive">tpope/vim-fugitive</a></p>
<ul>
<li><a href="#git"><code>:Git</code></a></li>
<li><a href="#git-mergetool"><code>:Git mergetool</code></a></li>
</ul>
</li>
<li>
<p><a href="#rmagattiauto-session">rmagatti/auto-session</a></p>
<ul>
<li><a href="#startify%EC%97%90-%EC%84%B8%EC%85%98-%EB%AA%A9%EB%A1%9D-%ED%91%9C%EC%8B%9C%ED%95%98%EA%B8%B0">Startify에 세션 목록 표시하기</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#%EC%9A%A9%EC%96%B4">용어</a></p>
<ul>
<li><a href="#---more---%EB%9D%BC%EA%B3%A0-%EC%B6%9C%EB%A0%A5%EB%90%98%EB%8A%94-pager"><code>-- More --</code>라고 출력되는 pager</a></li>
</ul>
</li>
<li>
<p><a href="#tips">Tips</a></p>
<ul>
<li>
<p><a href="#mapping-%EC%8B%9C-cr-vs-cmdcr">mapping 시 <code>:...&#x3C;cr></code> vs <code>&#x3C;cmd>...&#x3C;cr></code></a></p>
</li>
<li>
<p><a href="#%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC%EB%A7%81-%ED%95%98%EA%B8%B0">프로파일링 하기</a></p>
</li>
<li>
<p><a href="#text-object-%EA%B0%9C%EC%84%A0%ED%95%98%EA%B8%B0">text object 개선하기</a></p>
<ul>
<li><a href="#vim-pythonsense">vim-pythonsense</a></li>
<li><a href="#vim-expand-region">vim-expand-region</a></li>
</ul>
</li>
<li>
<p><a href="#command-%EB%8C%80%EC%8B%A0-command%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90"><code>command</code> 대신 <code>command!</code>를 사용하자.</a></p>
</li>
<li>
<p><a href="#%EC%98%B5%EC%85%98%EC%9D%B4-%EC%96%B4%EB%8A%90-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%EB%B3%80%EA%B2%BD%EB%90%98%EC%97%88%EB%8A%94%EC%A7%80-%EC%95%8C%EB%A0%A4%EB%A9%B4-verbose">옵션이 어느 파일에서 변경되었는지 알려면 <code>:verbose</code></a></p>
</li>
<li>
<p><a href="#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98%EB%90%98%EC%96%B4-%EC%9E%88%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0">플러그인 설치되어 있는지 확인하기</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#issues">Issues</a></p>
<ul>
<li><a href="#typescript-filetype-%EB%AC%B8%EC%A0%9C">Typescript filetype 문제</a></li>
<li><a href="#vim-colors-solarized-colorscheme-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%B4-%EC%A0%90%EC%A0%90-%EB%8A%90%EB%A0%A4%EC%A7%80%EA%B2%8C-%EB%A7%8C%EB%93%9C%EB%8A%94-%ED%98%84%EC%83%81"><code>vim-colors-solarized</code> colorscheme 플러그인이 점점 느려지게 만드는 현상</a></li>
<li><a href="#ubuntu%EC%97%90-%EC%84%A4%EC%B9%98%ED%95%9C-vim%EC%9D%B4-%EC%8B%9C%EC%9E%91-%EC%8B%9C-vimrc%EC%97%90%EC%84%9C-%EB%A7%8E%EC%9D%80-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%ED%98%84%EC%83%81">Ubuntu에 설치한 vim이 시작 시 <code>.vimrc</code>에서 많은 에러가 발생하는 현상</a></li>
</ul>
</li>
<li>
<p><a href="#%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%82%AC">관련 기사</a></p>
</li>
</ul>
</li>
</ul></div><div class="WikiContent__Container-sc-q3jb6a-0 jzROSZ">
<p>터미널 기반 텍스트 편집기.</p>
<p>My <a href="https://github.com/Edunga1/dotfiles/blob/master/vim/.vimrc">.vimrc</a>를 dotfiles에 올려두었다.</p>
<hr>
<p>vim 보다 <a href="https://github.com/neovim/neovim">neovim</a>을 사용중이다.
neovim은 vim의 fork라 호환성이 유지돼서 바로 넘어가더라도 큰 문제가 없다.
다만 설정을 조금 수정해야 하는데, neovim 메뉴얼 <code>:h nvim-from-vim</code>에 잘 설명되어 있다.
vim에서 제공하는 기능은 대부분 neovim에서도 사용할 수 있다. 다만 2023년 11월 기준으로 vim 9.0은 아직인 듯.</p>
<p><a href="https://en.wikipedia.org/wiki/Vim_(text_editor)">Wikipedia</a> 배포 내역을 보면,
8.0 이전까지는 배포가 느렸지만, 8.0부터는 모던 에디터들의 추세에 맞춰 팝업 Window와 비동기 I/O 등이 추가되었다.
이전에는 Bram이 대부분 혼자서 개발하느라 느렸던 것으로 알고있다.
<a href="https://github.com/vim/vim#sponsoring">GitHub vim 저장소</a>를 보면 Bram은 직장에 복귀했다고 한다.
그래서 8.0 이후로는 다양한 사람들이 기여하고 있다.</p>
<hr>
<p>vimscript라는 자체 스크립트를 제공하는데, 학습하기 꽤 어려운 언어이다.
<a href="https://www.reddit.com/r/neovim/comments/l1mne8/learning_vimscript_vs_lua/">어떤 글</a>에서는 정규식에 빗대어, 학습하는 것이 아니라 그냥 사용하는 것이라고 한다:</p>
<blockquote>
<p>Vimscript is like regex, you don't learn it, just use it.</p>
</blockquote>
<p>창시자인 Bram Moolenaar의 <a href="https://yozm.wishket.com/magazine/detail/2183/">23년 인터뷰 중</a>에서 플러그인을 많이 사용하지 않는다고 한다:</p>
<blockquote>
<p>사실 저는 배포판에 포함된 플러그인(matchit, termdebug 등)을 제외하고는 플러그인 자체를 많이 사용하지 않습니다. 필요한 기능이 있으면 간단한 것은 바로 만들거나 Vim 베이스에 추가하는 편입니다.</p>
</blockquote>
<hr>
<p>Vim 자체는 텍스트 편집기일 뿐이기 때문에, IDE처럼 사용하기 위해서는 플러그인이 필요하다.
자세한 사항은 아래의 <a href="#%EB%82%B4%EC%9E%A5-language-server-protocol-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0">내장 Language Server Protocol 사용하기</a>를 참고하자.</p>
<h2 id="neovim" style="position:relative;"><a href="#neovim" aria-label="neovim permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Neovim</h2>
<p>Neovim은 vim을 fork하고, vimscript와 더불어 lua도 지원하며, 더 확장된 기능을 제공한다.</p>
<p><a href="https://github.com/neovim/neovim">https://github.com/neovim/neovim</a></p>
<p>검색해보면 neovim 커뮤니티에서는 vim에 대한 불만이 많이 보인다. :0<br>
아무래도 원작자인 Bram의 방향성과 상충되어서가 아닐까. 잘 모르겠다.</p>
<p>neovim으로 이전한 이유는 <a href="../language-server-protocol">LSP</a>를 사용하기 위함이었다.
neovim은 LSP를 자체적으로 제공한다. 바닐라 vim은 <a href="https://github.com/neoclide/coc.nvim">coc.nvim</a>을 사용해야 한다.
coc.nvim은 자체 플러그인 기능으로 편리하게 다양한 언어 서버를 설치할 수 있어서 편리하지만, neovim 자체 기능 보다는 느리다.
솔직하게 말하면 답답할 정도.</p>
<p>개인적으로는 Lua를 <a href="./game.md#ultima-online">Ultima Online</a>의 스크립트 언어로 사용한 경험을 비추어 보았을 때,
딱히 생산성이나 편의성이 높지는 않았다. 다만 vimscript 보다는 학습 곡선이 낮다.</p>
<p>vim에서 사용하는 변수, 옵션, 함수를 lua 스크립트에서도 사용할 수 있다.
그래서 <code>.vimrc</code> 내용을 lua로 이전할 수 있는데, 나는 그냥 vimscript로 사용중이다.</p>
<p>lua 스크립트로만 초기화할 수 있는 부분이 있다. neovim 전용 플러그인들이다.
neovim에 맞춰진 플러그인은 ~.nvim 이라는 접미사를 붙이는 것이 관례인데,
이런 플러그인들은 lua 스크립트로 include해서 직접 초기화하는 방식을 사용하기도 한다.
<a href="https://github.com/neovim/nvim-lspconfig">nvim-lsp</a>를 보면 <code>require'lspconfig'.pyright.setup{}</code> 처럼 사용한다.
어쨌든 대부분 설정들은 lua나 vimscript 모두 제공하므로 취향껏 사용하면 된다.</p>
<p>vim과 다른점은 <code>:h vim-differences</code>에서 확인하자.</p>
<h3 id="lua-가이드" style="position:relative;"><a href="#lua-%EA%B0%80%EC%9D%B4%EB%93%9C" aria-label="lua 가이드 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lua 가이드</h3>
<p><a href="https://github.com/nanotee/nvim-lua-guide#modules">https://github.com/nanotee/nvim-lua-guide#modules</a></p>
<ul>
<li>내 custom lua 파일을 가져올 때 lua/ 내에서 찾는다.
<ul>
<li>runtimepath간 이름 충돌이 발생할 수 있다.</li>
</ul>
</li>
</ul>
<p><code>init.vim</code> 대신 <code>init.lua</code>에서 설정을 명세할 수 있다.</p>
<p>vim 함수를 <code>:call Foo()</code>로 호출하는 것처럼, lua 함수도 <code>:lua Foo()</code>로 호출할 수 있다.
예를들어 LSP에 설정된 코드 액션 매핑이 있는데:</p>
<deckgo-highlight-code language="lua"  >
          <code slot="code">vim.keymap.set(&#39;n&#39;, &#39;&lt;space&gt;ca&#39;, vim.lsp.buf.code_action, bufopts)</code>
        </deckgo-highlight-code>
<p>직접 호출하려면 <code>:lua vim.lsp.buf.code_action()</code>로 호출한다.</p>
<h3 id="내장-language-server-protocol-사용하기" style="position:relative;"><a href="#%EB%82%B4%EC%9E%A5-language-server-protocol-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0" aria-label="내장 language server protocol 사용하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>내장 Language Server Protocol 사용하기</h3>
<p>Noevim은 자체적으로 <a href="../language-server-protocol">Language Server Protocol</a>을 제공한다.</p>
<p>Vim을 IDE처럼 사용하기 위해서는 몇 가지 플러그인이 필요하다.</p>
<p><a href="https://github.com/Edunga1/dotfiles/blob/master/vim/.vimrc#L28-L33">.vimrc</a>에 다음 플러그인을 추가한다.</p>
<deckgo-highlight-code   >
          <code slot="code">Plug &#39;neovim/nvim-lspconfig&#39;
Plug &#39;williamboman/mason.nvim&#39;
Plug &#39;williamboman/mason-lspconfig.nvim&#39;
Plug &#39;jose-elias-alvarez/null-ls.nvim&#39;</code>
        </deckgo-highlight-code>
<p>각 플러그인의 역할은 다음과 같다:</p>
<ul>
<li><a href="https://github.com/neovim/nvim-lspconfig">nvim-lspconfig</a>: LSP 설정할 수 있다. 이것만 필수사항.</li>
<li><a href="https://github.com/williamboman/mason.nvim">mason &#x26; mason-lspconfig</a>: language server와 개발 도구를 관리한다. 직접 executable 설치해야 하는 수고를 덜 수 있다.</li>
<li><a href="https://github.com/jose-elias-alvarez/null-ls.nvim">null-ls</a>: diagnostic, linter, code action을 사용할 수 있게한다. 아쉽게도 23년에 개발 중단되었다. 그러나 여전히 사용할만하다.</li>
</ul>
<p>lua init 파일에서 다음과 같이 설정한다:</p>
<deckgo-highlight-code language="lua"  >
          <code slot="code">-- null-ls 설정은 생략
require(&quot;mason&quot;).setup()
require(&quot;mason-lspconfig&quot;).setup()
require&#39;lspconfig&#39;.tsserver.setup{}</code>
        </deckgo-highlight-code>
<p>Language Server를 설치한다: <code>:MasonInstall typescript-language-server</code><br>
<code>:Mason</code> 명령으로 대화형 UI를 통해 목록을 확인하고 설치할 수 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/cat-logic/static/66a0c6ba3b5880441ce3191032dbcdb4/d8c86/nvim-mason-example.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVR42pWTS0/CQBSF+1fUIAqosFDSBmKMFgiFEFaEqCzcNqFQyqstffBmAX/5eO8IRkSJLr7MtDP39NxHpZOzU1SrVUGlUkG5XEapVIKmadBozeVyuH94Ih6hqiqKxaI4/wrf5dhoNAopnkojDAMixGg0EkwmE6xWKwHvw/EYAZ3znfl8juVyucdiscBms0E2m4WUvE2j1W5D13UYhoE27TudjsAkrG4XlmVhMBggCAJ4nncAm5hOp5BlGVIsEUev1xP0+30B71nAcxx4W9ccyII/4fu+cK4oCqSbuwxc18VwOBSwUJdcGc0mdNuGTWn6W8FdSVjgV8FEIiYEOVWGBaezGV7rdSimCYcuhkfcHQheXKfgUmomBTPsziUXLySYoRqGJB58c3Q85XTm0yE3hQW5m8+1GrKtFny6+C/BxNUlHNuhrpqiszbVbUyj8tZoQKXuOrTf1fA39rocTcrCIb/kr/BMMTxfK56z7fMxOG69Xn/M4XksLqa/UCiIlSeepz+fz/8Z/ps4NhKJ4B0+vvQYgMYsZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="mason example"
        title=""
        src="/cat-logic/static/66a0c6ba3b5880441ce3191032dbcdb4/fcda8/nvim-mason-example.png"
        srcset="/cat-logic/static/66a0c6ba3b5880441ce3191032dbcdb4/12f09/nvim-mason-example.png 148w,
/cat-logic/static/66a0c6ba3b5880441ce3191032dbcdb4/e4a3f/nvim-mason-example.png 295w,
/cat-logic/static/66a0c6ba3b5880441ce3191032dbcdb4/fcda8/nvim-mason-example.png 590w,
/cat-logic/static/66a0c6ba3b5880441ce3191032dbcdb4/efc66/nvim-mason-example.png 885w,
/cat-logic/static/66a0c6ba3b5880441ce3191032dbcdb4/c83ae/nvim-mason-example.png 1180w,
/cat-logic/static/66a0c6ba3b5880441ce3191032dbcdb4/d8c86/nvim-mason-example.png 1663w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>이제 설치한 language server가 지원하는 파일을 열면 자동으로 LSP가 활성화된다.<br>
<code>:LspInfo</code>로 현재 활성화된 LSP 목록을 확인할 수 있다.</p>
<hr>
<ul>
<li><a href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md">nvim-lspconfig/server_configurations.md</a>에서 설정 가능한 language server 목록을 확인할 수 있다.</li>
<li><a href="https://github.com/jose-elias-alvarez/null-ls.nvim/blob/main/doc/BUILTIN_CONFIG.md">null-js/BUILTIN_CONFIG</a> 제공하는 lsp 도구 목록</li>
</ul>
<h2 id="도움말-help" style="position:relative;"><a href="#%EB%8F%84%EC%9B%80%EB%A7%90-help" aria-label="도움말 help permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>도움말 <code>:help</code></h2>
<p><code>:h help</code></p>
<p>vim 도움말. 명령어, 함수, 변수 등 키워드로 도움말을 제공한다.<br>
평소에도 자주 사용하고, vim의 많은 기능을 사용하기 위해선 필수적이다.</p>
<p><code>:h KEYWORD</code>로 사용한다.
키워드 전체를 입력하지 않아도 된다.
키워드 일부만 입력해도 가장 근접한 키워드를 찾는다.
예를들어 <code>:h usr_12.txt</code> 대신 <code>:h 12.txt</code>.</p>
<p>메뉴얼 내용 중 색상으로 강조된 단어를 만나면 도움말이 있는 키워드다.
<code>CTRL-]</code>로 이동하자 <code>:h CTRL-]</code>.</p>
<h3 id="usr_12txt-명령어-조합에-관한-팁" style="position:relative;"><a href="#usr_12txt-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A1%B0%ED%95%A9%EC%97%90-%EA%B4%80%ED%95%9C-%ED%8C%81" aria-label="usr_12txt 명령어 조합에 관한 팁 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>usr_12.txt</code> 명령어 조합에 관한 팁</h3>
<p><code>:h usr_12.txt</code></p>
<p>유용한 명령어 조합에 대한 팁이 담긴 메뉴얼이다.</p>
<p><code>:h 12.4</code>는 모든 줄을 역정렬하는 방법을 설명한다.</p>
<p><code>:global/^/move 0</code>로 전체 줄을 역정렬할 수 있다. <code>move 0</code>가 이동할 줄 번호를 의미하므로, <code>move 10</code>이면 10번째 아래의 모든 줄만 역정렬한다.</p>
<h2 id="use-cases" style="position:relative;"><a href="#use-cases" aria-label="use cases permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use cases</h2>
<h3 id="파일-검색" style="position:relative;"><a href="#%ED%8C%8C%EC%9D%BC-%EA%B2%80%EC%83%89" aria-label="파일 검색 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>파일 검색</h3>
<p><a href="https://github.com/junegunn/fzf.vim">fzf.vim</a>이 제공하는 기능 몇가지를 사용한다.</p>
<ol>
<li>ctrl + p</li>
</ol>
<deckgo-highlight-code language="vim"  >
          <code slot="code">nnoremap &lt;expr&gt; &lt;C-p&gt; (len(system(&#39;git rev-parse&#39;)) ? &#39;:Files&#39; : &#39;:GFiles --exclude-standard --others --cached&#39;).&quot;\&lt;cr&gt;&quot;</code>
        </deckgo-highlight-code>
<p>이 방법은 별도 검색창이 출력되고, interactive하게 파일 이름을 검색한다.</p>
<ol start="2">
<li><code>:Rg</code> or <code>:Ag</code></li>
</ol>
<p>각각 <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a>, <a href="https://github.com/ggreer/the_silver_searcher">the_silver_searcher를</a> 사용한다.
따라서 각 도구 설치가 필요하다.</p>
<p>보통 <code>:Rg wiki</code>와 같은 방법으로 명령어를 통해서 1차 검색하고 검색창에서 추가 필터링한다.
이 방법은 파일 내용도 함께 검색한다.</p>
<p>두 도구 차이점은 모르겠다. 검색 결과는 조금 다르다.</p>
<h2 id="내장-기능" style="position:relative;"><a href="#%EB%82%B4%EC%9E%A5-%EA%B8%B0%EB%8A%A5" aria-label="내장 기능 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>내장 기능</h2>
<h3 id="quickfix--location-list" style="position:relative;"><a href="#quickfix--location-list" aria-label="quickfix  location list permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>quickfix &#x26; location list</h3>
<p><code>:h quickfix</code> <code>:h location-list</code></p>
<p>파일 위치를 목록으로 관리한다.
quickfix는 모든 창에서, location-list는 현재 창에서만 유지한다는 점이 다르다.</p>
<p>ref. <a href="https://freshman.tech/vim-quickfix-and-location-list/">https://freshman.tech/vim-quickfix-and-location-list/</a></p>
<p>목록에 나타난 코드를 한꺼번에 수정할 수 있는데, 동시에 여러 파일을 수정하는 용도로 사용한다.</p>
<h4 id="commands" style="position:relative;"><a href="#commands" aria-label="commands permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>commands</h4>
<ul>
<li><code>cnext</code>: 다음 지점으로.</li>
<li><code>cprevious</code>: 이전 지점으로.</li>
<li><code>copen</code>: 목록을 연다.</li>
</ul>
<p>location-list의 명령어는 prefix <code>c</code> -> <code>l</code> 바꾸면 대응한다.</p>
<h4 id="grep" style="position:relative;"><a href="#grep" aria-label="grep permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>grep</h4>
<p>e.g. <code>:vimgrep /myfunc/ **/*.c</code></p>
<p><code>:h vimgrep</code> <code>:grep</code> <code>:lgrep</code>(location-list)</p>
<p>패턴을 검색하고 결과를 quickfix 목록으로 만든다.</p>
<h4 id="cdo-ldo-검색된-모든-entry에-명령어-적용" style="position:relative;"><a href="#cdo-ldo-%EA%B2%80%EC%83%89%EB%90%9C-%EB%AA%A8%EB%93%A0-entry%EC%97%90-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%81%EC%9A%A9" aria-label="cdo ldo 검색된 모든 entry에 명령어 적용 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>cdo</code>, <code>ldo</code> 검색된 모든 entry에 명령어 적용</h4>
<p><code>cdo s/foo/bar</code> <code>ldo s/foo/bar</code></p>
<p>quickfix, location-list 검색 결과에 명령어를 적용한다.</p>
<p>grep으로 검색하고, cdo로 적용, 예시:</p>
<ol>
<li><code>:vimgrep foo **/*.md</code> 모든 <code>md</code> 파일에서 <code>foo</code> 검색한다.</li>
<li><code>:copen</code> 검색 결과 확인하고.</li>
<li><code>cdo s/foo/bar</code> 검색 결과에서 <code>foo</code> -> <code>bar</code> 대체한다.</li>
</ol>
<p><code>:cdo s/foo/bar | update</code></p>
<p><code>| update</code>를 사용하면 수정과 함께 저장한다.</p>
<h4 id="cfdo-lfdo-검색된-모든-파일에-명령어-적용" style="position:relative;"><a href="#cfdo-lfdo-%EA%B2%80%EC%83%89%EB%90%9C-%EB%AA%A8%EB%93%A0-%ED%8C%8C%EC%9D%BC%EC%97%90-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%81%EC%9A%A9" aria-label="cfdo lfdo 검색된 모든 파일에 명령어 적용 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>cfdo</code>, <code>lfdo</code> 검색된 모든 파일에 명령어 적용</h4>
<p><code>:cfdo %s/foo/bar</code> or <code>:ldo %s/foo/bar</code></p>
<p><code>cdo</code>와 차이점은 파일 모든 내용에 대해서 적용한다는 점이 다르다. 검색 목록에서 보이지 않는 라인도 적용되니 주의.</p>
<h4 id="bufdo-모든-buffer-파일에-명령어-적용" style="position:relative;"><a href="#bufdo-%EB%AA%A8%EB%93%A0-buffer-%ED%8C%8C%EC%9D%BC%EC%97%90-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%81%EC%9A%A9" aria-label="bufdo 모든 buffer 파일에 명령어 적용 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>bufdo</code> 모든 buffer 파일에 명령어 적용</h4>
<p><code>:bufdo %s/foo/bar</code></p>
<p>모든 buffer에 대해서 적용하므로 <code>:buffers</code>등 명령어로 적용 대상을 잘 확인하자.</p>
<h4 id="user-function" style="position:relative;"><a href="#user-function" aria-label="user function permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User Function</h4>
<p>사용자 함수에 대한 메뉴얼은 <code>:help userfunc</code>에서 설명한다.</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">function! MyFunction() abort
  echo &quot;Hello World!&quot;
endfunction</code>
        </deckgo-highlight-code>
<p>위 함수는 <code>:call MyFunction()</code>으로 호출할 수 있다.</p>
<p><code>function!</code>의 <code>!</code>는 함수가 이미 존재하면 덮어쓴다는 의미다.
<code>function</code>은 함수가 이미 존재하면 에러가 발생한다.
<code>:help E122</code>에서 설명한다.</p>
<p><code>abort</code>는 에러가 발생하면 함수를 거기서 종료한다. <code>:help func-abort</code>에서 설명한다.</p>
<hr>
<deckgo-highlight-code language="vim"  >
          <code slot="code">function s:MyFunction()
  echo &quot;Hello World!&quot;
endfunction</code>
        </deckgo-highlight-code>
<p><code>s:</code>를 붙이면 local function이 된다.
함수는 정의된 스크립트에서만 호출할 수 있다. 즉, <code>call MyFunction()</code>로 호출할 수 없다.
vim은 많은 플러그인을 통해 함수가 정의되어 이름 충돌할 수 있으므로 local function을 사용하는 것이 좋다.</p>
<h3 id="fuzzy-매칭-matchfuzzy" style="position:relative;"><a href="#fuzzy-%EB%A7%A4%EC%B9%AD-matchfuzzy" aria-label="fuzzy 매칭 matchfuzzy permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fuzzy 매칭: <code>matchfuzzy()</code></h3>
<p><code>:h matchfuzzy()</code></p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">:echo matchfuzzy([&#39;red apple&#39;, &#39;yello banana&#39;], &#39;ra&#39;)  &quot; [&#39;red apple&#39;]</code>
        </deckgo-highlight-code>
<p>dictionary를 검색할 수도 있다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">let s:lst = [
  \ {&#39;name&#39;: &#39;john&#39;, &#39;age&#39;: 20},
  \ {&#39;name&#39;: &#39;jane&#39;, &#39;age&#39;: 30},
  \ {&#39;name&#39;: &#39;joe&#39;, &#39;age&#39;: 40},
  \ {&#39;name&#39;: &#39;jill&#39;, &#39;age&#39;: 50},
  \]

echo s:lst-&gt;matchfuzzy(&#39;je&#39;, {&#39;key&#39;: &#39;name&#39;})
&quot; [{&#39;age&#39;: 40, &#39;name&#39;: &#39;joe&#39;}, {&#39;age&#39;: 30, &#39;name&#39;: &#39;jane&#39;}]</code>
        </deckgo-highlight-code>
<p>fuzzy search하는 함수.</p>
<h3 id="make-and-makeprg" style="position:relative;"><a href="#make-and-makeprg" aria-label="make and makeprg permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>:make</code> and <code>makeprg</code></h3>
<p><code>:make</code> 명령은 <code>makeprg</code>에 설정한 것을 실행한다.
출력이 quickfix 양식이면 quckfix과 연동할 수 있다!</p>
<h4 id="build-integration---how-to-do-90-of-what-plugins-do" style="position:relative;"><a href="#build-integration---how-to-do-90-of-what-plugins-do" aria-label="build integration   how to do 90 of what plugins do permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>build integration - How to Do 90% of What Plugins Do</h4>
<p><a href="https://youtu.be/XA2WjJbmmoM?t=3062">https://youtu.be/XA2WjJbmmoM?t=3062</a></p>
<p>영상 52분의 build integration 주제에서 설명한다.
vim 내에서 테스트를 실행하고, 실패한 테스트가 있으면 quickfix를 통해 실패 지점으로 네비게이션할 수 있다.</p>
<p>영상 일련 과정:</p>
<ol>
<li><code>makeprg</code> 설정한다.: <code>set makeprg=bundle\ exec\ rspec\ -f\ QuckfixFormatter</code></li>
<li><code>:make</code> 명령으로 <code>rspec</code> 테스트 실행한다.</li>
<li>테스트 실패한 지점을 quickfix로 보여준다.</li>
</ol>
<p><code>rspec</code>명령에 <code>--format QuckfixFormatter</code> 옵션으로 quickfix에서 사용할 수 있는 양식으로 출력된다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/cat-logic/static/0e51a27dd2009420be4c85af56503f9e/c1328/rspec-formatter.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 16.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsElEQVR42i2O0YqDMBREgwjSLe0SjCYqMUZNLdW42/7/v51m3T4MlzkMc0cs24YLATtNDLcbpne4dWV8PplfL4afnTF5v3hO8kwhT3xdz3xfLhRFQZZl5HmOEOJfIRWtjwdLKttj5M/P3mO7jt894vuecRjYUqlLz8I0E9KA+3JnS2NiTIOco65rqqpCWGvRWtM0zQHN5x5KXEp5BMuyPJiqFEopjDG0Kdu27UcdRmveuKFPOhq4gR4AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="rspec formatter"
        title=""
        src="/cat-logic/static/0e51a27dd2009420be4c85af56503f9e/fcda8/rspec-formatter.png"
        srcset="/cat-logic/static/0e51a27dd2009420be4c85af56503f9e/12f09/rspec-formatter.png 148w,
/cat-logic/static/0e51a27dd2009420be4c85af56503f9e/e4a3f/rspec-formatter.png 295w,
/cat-logic/static/0e51a27dd2009420be4c85af56503f9e/fcda8/rspec-formatter.png 590w,
/cat-logic/static/0e51a27dd2009420be4c85af56503f9e/c1328/rspec-formatter.png 866w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>다만 기본 제공되는 것은 아니고, 플러그인 같아 보인다. 문서에는 <code>QuickfixFormatter</code>에 대한 내용이 없다.</p>
<p>ref. python traceback을 quickfix와 연동할 수 없냐는 질문: <a href="https://vi.stackexchange.com/questions/5110/quickfix-support-for-python-tracebacks">Quickfix support for Python tracebacks</a></p>
<h3 id="matchit" style="position:relative;"><a href="#matchit" aria-label="matchit permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>matchit</h3>
<p><code>:h matchit</code></p>
<p><code>%</code>로 짝에 맞는 문자열로 커서를 이동한다.</p>
<p>괄호의 경우 <code>{</code>에서 사용하면 반대편 <code>}</code>으로 이동한다.
HTML 태그의 경우 <code>&#x3C;div></code>에서 사용하면 <code>&#x3C;/div></code>로 이동한다.
그 외 xml, latex 등 다양한 언어를 지원한다고 한다.</p>
<p>이전에는 없었던 기능인가 보다.
<a href="https://github.com/vim-scripts/matchit.zip/">matchit.zip</a>이라는 플러그인으로 제공되기도 했다.
내 경우 다른 사람이 사용하던 <code>.vimrc</code>로 시작했는데, matchit.zip이 포함되어 있었다.</p>
<h3 id="터미널-에뮬레이터-terminal" style="position:relative;"><a href="#%ED%84%B0%EB%AF%B8%EB%84%90-%EC%97%90%EB%AE%AC%EB%A0%88%EC%9D%B4%ED%84%B0-terminal" aria-label="터미널 에뮬레이터 terminal permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>터미널 에뮬레이터: <code>:terminal</code></h3>
<p><code>:h terminal</code></p>
<p>vim에서 터미널을 실행한다. vim 터미널은 터미널 모드로 전환한다.
<code>tmap</code>으로 매핑 설정한다. <code>:h mapmode-t</code>.</p>
<p>다른 모드와 달리 커서가 동작하지 않고, 키 입력이 터미널로 전달되는데, <code>CTRL-\ CTRL-N</code>으로 normal 모드로 전환할 수 있다.
아무 모드에서나 normal 모드로 전환하는 단축키다. <code>:h t_CTRL-\_CTRL-N</code>.</p>
<hr>
<p><code>:terminal ls</code>와 같이 시작 명령어를 지정할 수 있다.<br>
나는 markdown 파일 작업 중 <code>:terminal mdcat %</code>으로 현재 파일의 preview 보는 용도로 사용한다.<br>
<a href="https://github.com/swsnr/mdcat">mdcat</a>은 markdown용 cat이다.</p>
<h2 id="구문-강조" style="position:relative;"><a href="#%EA%B5%AC%EB%AC%B8-%EA%B0%95%EC%A1%B0" aria-label="구문 강조 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>구문 강조</h2>
<p><code>:h syntax</code></p>
<p><code>syntax on</code>으로 구문 강조를 활성화한다. vim은 기본적으로 언어별 문법 강조를 제공한다.<br>
그 목록은 메뉴얼에서 확인할 수 있다. <code>ft-&#x3C;LANGUAGE>-syntax</code> 이름으로 언어별 메뉴얼이 제공된다.<br>
예를들어 <code>:h ft-python-syntax</code>로 파이썬 문법 강조에 대한 메뉴얼을 확인할 수 있다.</p>
<p>neovim은 <a href="https://github.com/nvim-treesitter/nvim-treesitter">nvim-treesitter</a> 플러그인으로 언어별 요소를 분석하여 더 정교하게 구문을 분석한다.
<strong>하지만 기본 <code>colorscheme</code>으로는 정교한 구문 강조를 지원하지 않는다</strong>.<br>
<a href="https://github.com/nvim-treesitter/nvim-treesitter/wiki/Gallery">tresitter wiki의 gallery</a>에서 treesitter를 지원하는 <code>colorscheme</code>을 설치하자.</p>
<h2 id="registers" style="position:relative;"><a href="#registers" aria-label="registers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Registers</h2>
<p><code>:h registers</code></p>
<p>자주 사용하는 특수 레지스터는 알아두면 좋다.</p>
<ol>
<li><code>+</code> 클립보드 레지스터. 정확히는 selection register. 클립보드가 활성되지 않으면 unnamed register와 같다.</li>
<li><code>"</code> unnamed register. d, c, s, x 등으로 삭제된 내용이 저장된다.</li>
<li><code>_</code> black hole register. 읽는 용도로 사용하지 않는다. 덮어쓸 때 삭제된 내용을 저장하지 않는 용도로 쓴다.
<ul>
<li>e.g. <code>"_dd</code> 현재 라인을 삭제하지만 unnamed register에 저장하지 않는다.</li>
</ul>
</li>
</ol>
<p><code>let @</code>을 사용하면 직접 register에 값을 할당할 수 있다.
응용하면, <code>+</code> register에 클립보드를 연결했다면, 클립보드에 현재 파일 경로를 저장할 수 있다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">:let @+=expand(&#39;%&#39;)</code>
        </deckgo-highlight-code>
<h2 id="variables" style="position:relative;"><a href="#variables" aria-label="variables permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variables</h2>
<h3 id="path" style="position:relative;"><a href="#path" aria-label="path permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>path</code></h3>
<p><code>:find</code> 검색 범위를 결정한다.
<code>:find foo</code> 파일이나 디렉토리를 검색하고 연다,
<cr> 대신 <tab>으로 모든 결과를 가져오자.</p>
<p><a href="https://youtu.be/GyPXYF6jgwk?t=325">https://youtu.be/GyPXYF6jgwk?t=325</a>
netrw, find 사용법</p>
<p><code>set path+=**</code> <code>**</code>를 추가하면 현재 폴더 내 모든 범위를 검색한다.
<code>**</code> 사용하기 전과 비교해보면 검색 수가 달라지는 것을 알 수 있다.
<code>.gitignore</code>의 무시한 파일, <code>node_modules</code> 같이 무거운 폴더도 검색된다.</p>
<h2 id="plugin-만들기" style="position:relative;"><a href="#plugin-%EB%A7%8C%EB%93%A4%EA%B8%B0" aria-label="plugin 만들기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugin 만들기</h2>
<p><code>:h write-plugin</code> nvim의 사용자 메뉴얼 플러그인 작성 섹션.</p>
<h3 id="프로젝트-구조" style="position:relative;"><a href="#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%A1%B0" aria-label="프로젝트 구조 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>프로젝트 구조</h3>
<deckgo-highlight-code language="bash"  >
          <code slot="code">.
│   # 폴더 내의 모든 파일을 자동으로 로드한다.
├── autoload
│   └── vimwiki_link
│       └── base.vim
│   # 파일 타입에 따라 자동으로 로드한다.
└── ftplugin
    │   # `vimwiki/script.vim`과 `vimwiki.vim` 파일 모두
    │   # vimwiki 파일 타입인 버퍼를 열면 자동으로 로드한다.
    ├── vimwiki
    │   └── script.vim
    └── vimwiki.vim</code>
        </deckgo-highlight-code>
<h3 id="autoload" style="position:relative;"><a href="#autoload" aria-label="autoload permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>autoload</code></h3>
<p><code>:h autoload</code></p>
<p><code>autoload/vimwiki_link/base.vim</code> 파일이 있으면 <code>vimwiki_link#base#Function()</code> 함수 이름으로 정의한다.</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code"># autoload/vimwiki_link/base.vim
function! vimwiki_link#base#follow_link() abort
  # ...
endfunction</code>
        </deckgo-highlight-code>
<p>폴더 및 파일 이름이 네임스페이스가 된다. 만약 다른 네임스페이스로 선언하면 에러가 발생한다.</p>
<h3 id="ftplugin" style="position:relative;"><a href="#ftplugin" aria-label="ftplugin permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>ftplugin</code></h3>
<ul>
<li><code>:h ftplugin</code></li>
<li><code>:h ftplugin-name</code></li>
</ul>
<p><code>ftplugin/</code> 디렉토리 아래에 <code>filetype.vim</code> 파일 타입을 이름으로 만들면, 파일 타입에 따라 자동 로드된다.
디렉토리나 파일 이름의 prefix로 파일 타입을 지정해도 된다:</p>
<blockquote>
<p>The generic names for the filetype plugins are:</p>
<p>ftplugin/<filetype>.vim
ftplugin/<filetype>_<name>.vim
ftplugin/<filetype>/<name>.vim</p>
</blockquote>
<deckgo-highlight-code language="vim"  >
          <code slot="code">&quot; ftplugin/vimwiki.vim
command! -buffer VimwikiSmartLink call vimwiki_link#base#follow_link()

nnoremap &lt;silent&gt;&lt;script&gt;&lt;buffer&gt; &lt;Plug&gt;VimwikiSmartLink :VimwikiSmartLink&lt;CR&gt;
nnoremap &lt;CR&gt;&lt;CR&gt; &lt;Plug&gt;VimwikiSmartLink</code>
        </deckgo-highlight-code>
<p>보통 파일 타입에 맞는 명령어를 정의하거나 매핑을 생성하고
<code>autoload</code>의 함수를 호출하는 구조로 많이 사용하는 거 같다.</p>
<p>nvim이라면 <code>~/.config/nvim/ftplugin</code> 디렉토리에 파일을 만들면 된다.</p>
<h3 id="plug-sid" style="position:relative;"><a href="#plug-sid" aria-label="plug sid permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>&#x3C;Plug></code> <code>&#x3C;SID></code></h3>
<p><code>:h using-&#x3C;Plug></code></p>
<blockquote>
<p>Both <SID> and <Plug> are used to avoid that mappings of typed keys interfere
with mappings that are only to be used from other mappings.</p>
</blockquote>
<p>매핑할 때 사용하는 특수 키 이름이다. 매핑 충돌을 피하기 위한 대책이다.
이 특수 키로 먼저 매핑하고, 실제 키에 매핑한다.</p>
<p>예를들어 vimwiki에는 다음과 같은 코드가 있다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">nnoremap &lt;silent&gt;&lt;script&gt;&lt;buffer&gt; &lt;Plug&gt;VimwikiFollowLink :VimwikiFollowLink&lt;CR&gt;

&quot; ... 중간 생략

&quot; map_key는 최종적으로 :map 같은 명령어를 실행한다.
call vimwiki#u#map_key(&#39;n&#39;, &#39;&lt;CR&gt;&#39;, &#39;&lt;Plug&gt;VimwikiFollowLink&#39;)</code>
        </deckgo-highlight-code>
<h2 id="plugins" style="position:relative;"><a href="#plugins" aria-label="plugins permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugins</h2>
<p>사용중인 플러그인.</p>
<h3 id="chrisbracsvvim" style="position:relative;"><a href="#chrisbracsvvim" aria-label="chrisbracsvvim permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>chrisbra/csv.vim</h3>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/cat-logic/static/a0263c7cc2a0ff2c19eae5792ce5a208/fe8a7/csv-vim-sample.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVR42lWS2ZKjMAxFCYHQwdjGYBabzSxJOr3N/3/dHbFMZuZBBaUqjs6V8Ow0Y+g0KlOiKhUak6HqO7RGwVQF3lSP6ChW9sisRWZq5F2LSjNoGcLqC3RV401aeJfnJ3jHcCVoXMYQ9B4+bhBtAmEFQu1wTkeclUNg7/DnG3xHva8f8DEDzz1kjY9kaXEqOnjX+ztkyxA3OZgmoEkQTQ6qiak4wnyAL1fogKBeELgZASUISEQMGYQiYO2DzwYnbXegaAhoNVhBQEvAZaRnjLRJcHkB3Qt4prgrkP8BGgJOBn7REvDxpHgrkAwLBmkZotsMSUMU1W44boYhAc/jP0CnIbIdKMYafr4ZPsAPw2Qz5IjmkcBXMlwju80wWIHmAB6Rea9eQD5anPKGgO8fu2FbICkZ7XA3TOkoGfUvuj8M3WYYjMsO/PiCmIoNqGiH6VDAT8kwpkmSPmaN3iOTbXRfoPoEivr/RSbDYCKgowN9fkO4HJKunFsyvLfwzbpDmiQHDtaXEHW875B+m92Qk6H7e+UVuDwQzBOCn1+Qc4G08KBb2uGzw6lu8Bsrsd3sWBi1AAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="csv.vim sample"
        title=""
        src="/cat-logic/static/a0263c7cc2a0ff2c19eae5792ce5a208/fcda8/csv-vim-sample.png"
        srcset="/cat-logic/static/a0263c7cc2a0ff2c19eae5792ce5a208/12f09/csv-vim-sample.png 148w,
/cat-logic/static/a0263c7cc2a0ff2c19eae5792ce5a208/e4a3f/csv-vim-sample.png 295w,
/cat-logic/static/a0263c7cc2a0ff2c19eae5792ce5a208/fcda8/csv-vim-sample.png 590w,
/cat-logic/static/a0263c7cc2a0ff2c19eae5792ce5a208/efc66/csv-vim-sample.png 885w,
/cat-logic/static/a0263c7cc2a0ff2c19eae5792ce5a208/c83ae/csv-vim-sample.png 1180w,
/cat-logic/static/a0263c7cc2a0ff2c19eae5792ce5a208/fe8a7/csv-vim-sample.png 1223w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>csv 파일의 highlighting, 열과 행에 대한 처리 도구를 제공한다.</p>
<p>newline이 포함되면 큰 따옴표로 묶어서 표현되기도 하는데, 인식 못하는 문제가 있다.</p>
<h4 id="features" style="position:relative;"><a href="#features" aria-label="features permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features</h4>
<p><code>:DeleteColumn 2-4</code> 2~4열 제거. <code>:DeleteColumn 2</code> 2열만 제거</p>
<h3 id="tpopevim-fugitive" style="position:relative;"><a href="#tpopevim-fugitive" aria-label="tpopevim fugitive permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>tpope/vim-fugitive</h3>
<p><a href="https://github.com/tpope/vim-fugitive">https://github.com/tpope/vim-fugitive</a></p>
<h4 id="git" style="position:relative;"><a href="#git" aria-label="git permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>:Git</code></h4>
<p><a href="https://vi.stackexchange.com/a/28251.md">Git Fugitive how to git add a visually selected chunk of code - stackexchange</a></p>
<p><code>:Git</code> 실행하면 현재 git status를 보여준다.
여기서 꽤 많은 일을 처리할 수 있는데, <code>g?</code> 입력하면 도움말을 볼 수 있다.</p>
<p>파일 경로에서 Enter 누르면 해당 파일의 Buffer를 연다.</p>
<p>원하는 라인만 stage 또는 unstage 하거나, discard 하고 싶다면:</p>
<ol>
<li>먼저 변경하려는 파일에서 <code>></code> 눌러 변경 사항을 확인</li>
<li>원하는 라인으로 이동해서 visual mode로 선택 후 실행</li>
</ol>
<ul>
<li><code>s</code>: stage</li>
<li><code>u</code>: unstage</li>
<li><code>X</code>: discard</li>
</ul>
<p>unsage 하려면 Staged 목록에서 보여지므로 이동하여 <code>u</code> 눌러야 한다.</p>
<p><code>:Git</code> 입력하면 이렇게 표시된다:</p>
<deckgo-highlight-code language="fugitive"  >
          <code slot="code">Head: main
Merge: origin/main
Help: g?

Unstaged (1)
M docs/wiki/vim.md

Staged (1)
M docs/wiki/vim.md</code>
        </deckgo-highlight-code>
<h4 id="git-mergetool" style="position:relative;"><a href="#git-mergetool" aria-label="git mergetool permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>:Git mergetool</code></h4>
<p><code>git mergetool</code>과 같다. merge conflicts 처리하는 용도로 사용하는데, fugitive는 충돌 지점을 quickfix로 보여준다.</p>
<p>quickfix로 충돌 지점을 점프하고, <code>GWrite</code>(<code>git add</code>와 같음)로 stage에 반영한다.</p>
<h3 id="rmagattiauto-session" style="position:relative;"><a href="#rmagattiauto-session" aria-label="rmagattiauto session permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>rmagatti/auto-session</h3>
<p><a href="https://github.com/rmagatti/auto-session">https://github.com/rmagatti/auto-session</a></p>
<p>자동으로 세션을 저장하고 복구해주는 neovim 플러그인.
<code>vi</code> 명령어로 인자 없이 열면 최근에 종료한 세션에서 다시 시작한다.
lua 스크립트에서 <code>require().setup</code> 해야해서, neovim만 가능할 듯 싶다.</p>
<p>세션 정보는 <code>stdpath('data')/sessions</code>에 저장된다.</p>
<p>세션 복구를 원치 않는다면 <code>vi -</code>와 같이 사용하자.
또는 복구 후에 <code>:SessionDelete</code>로 삭제하고 vim을 종료하면 다음 한 번은 복구하지 않는다.</p>
<h4 id="startify에-세션-목록-표시하기" style="position:relative;"><a href="#startify%EC%97%90-%EC%84%B8%EC%85%98-%EB%AA%A9%EB%A1%9D-%ED%91%9C%EC%8B%9C%ED%95%98%EA%B8%B0" aria-label="startify에 세션 목록 표시하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Startify에 세션 목록 표시하기</h4>
<p>Startify에서 시작 화면에서 auto-session이 저장한 세션을 보여주도록 연동해서 사용하고 있다.</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">function s:sessions()
  let path = stdpath(&#39;data&#39;)..&quot;/sessions/&quot;
  let sessions = systemlist(&#39;ls &#39;.path)
  return map(sessions, &#39;{
        \ &quot;line&quot;: substitute(v:val, &quot;%&quot;, &quot;/&quot;, &quot;g&quot;),
        \ &quot;cmd&quot;: &quot;SessionRestoreFromFile &quot;.path.v:val
        \ }&#39;)
endfunction

let g:startify_lists = [
  \ { &#39;type&#39;: function(&#39;s:sessions&#39;), &#39;header&#39;: [&#39;   Sessions&#39;] },
  \ { &#39;type&#39;: &#39;files&#39;,     &#39;header&#39;: [&#39;   MRU&#39;]            },
  \ { &#39;type&#39;: &#39;dir&#39;,       &#39;header&#39;: [&#39;   MRU &#39;. getcwd()] },
  \ { &#39;type&#39;: &#39;bookmarks&#39;, &#39;header&#39;: [&#39;   Bookmarks&#39;]      },
  \ { &#39;type&#39;: &#39;commands&#39;,  &#39;header&#39;: [&#39;   Commands&#39;]       },
  \ ]</code>
        </deckgo-highlight-code>
<p>그러면 Startify 시작화면이 다음과 같이 세션 목록을 보여준다.</p>
<deckgo-highlight-code   >
          <code slot="code">[e]  &lt;empty buffer&gt;

Sessions

[0]  /home/dupark/dotfiles.vim
[1]  /home/dupark/workspace/cat-logic.vim
[2]  /home/dupark/workspace/game-cosmic-cat-conquest.vim

MRU

[3]  ~/workspace/cat-logic/docs/wiki/vim.md
[4]  ~/workspace/cat-logic/docs/wiki/machine-learning.md
[5]  ~/workspace/cat-logic/docs/wiki/book.md
[6]  ~/dotfiles/vim/.vimrc
[7]  ~/dotfiles/README.md
[8]  ~/dotfiles/vim/vim-include/vim-startify.vim</code>
        </deckgo-highlight-code>
<p>auto-session에서 세션 파일 명에 <code>%</code> 포함하고 있어서 이상하게 보이긴 한다.</p>
<h2 id="용어" style="position:relative;"><a href="#%EC%9A%A9%EC%96%B4" aria-label="용어 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>용어</h2>
<h3 id="---more---라고-출력되는-pager" style="position:relative;"><a href="#---more---%EB%9D%BC%EA%B3%A0-%EC%B6%9C%EB%A0%A5%EB%90%98%EB%8A%94-pager" aria-label="   more   라고 출력되는 pager permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>-- More --</code>라고 출력되는 pager</h3>
<p><code>-- More --</code>로 프롬프트가 출력되면 pager를 사용하고 있다는 뜻이다.</p>
<p><code>:let</code>이나 <code>:highlight</code> 등 명령어를 입력하면 <code>-- More --</code> 메시지가 있는 pager로 진입한다.</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">Special        xxx ctermfg=224 guifg=Orange
SpecialChar    xxx links to Special
Delimiter      xxx links to Special
SpecialComment xxx links to Special
Debug          xxx links to Special
DiagnosticError xxx ctermfg=1 guifg=Red
DiagnosticWarn xxx ctermfg=3 guifg=Orange
DiagnosticInfo xxx ctermfg=4 guifg=LightBlue
DiagnosticHint xxx ctermfg=7 guifg=LightGrey
-- More -- SPACE/d/j: screen/page/line down, b/u/k: up, q: quit</code>
        </deckgo-highlight-code>
<p><code>:h pager</code>로 pager에 대한 정보를 알 수 있다.</p>
<p>메뉴얼 화면 같은 경우 버퍼로 열리는데, 반면에 pager는 다른 화면과 달라서 처음 만나면 당혹스럽다.
어쨌든 <code>q</code>를 입력하면 빠져나오고 <code>hjklud</code>키로 이동도 된다.
그러나 검색 기능은 없다 :(</p>
<p>하지만 <code>:redir</code>을 통한 출력 전환으로 레지스터로 저장하면 하여 버퍼에 가져오면 된다.</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">:redir @a    &quot; a 레지스터에 출력을 전환
:highlight   &quot; pager로 출력되는 명령어 실행
G&lt;CR&gt;        &quot; 맨 아래로 이동하고 빠져나오자. 보여진 만큼만 저장된다.
:redir end   &quot; 출력 전환 종료
&quot;ap          &quot; a 레지스터 내용 붙여넣기</code>
        </deckgo-highlight-code>
<p><a href="https://vi.stackexchange.com/q/5729">How can I perform a search when vim displays content using "more" pager?</a><br>
이 질문에서 정보를 얻었다.</p>
<p>덧글에 pipeline을 통한 짧은 버전도 있다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">redir @a | sil highlight | redir end   &quot; @a 전환, 명령(silently), 전환 종료
&quot;ap                                    &quot; a 레지스터 붙여넣기</code>
        </deckgo-highlight-code>
<p>명령어로 만들어둬도 좋겠다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">command! -nargs=1 -complete=command Redir redir @a | sil &lt;args&gt; | redir end | echo &quot;Saved to @a&quot;</code>
        </deckgo-highlight-code>
<p>이렇게 사용할 수 있다:
<code>:Redir highlight</code>
<code>:Redir let</code></p>
<h2 id="tips" style="position:relative;"><a href="#tips" aria-label="tips permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips</h2>
<h3 id="mapping-시-cr-vs-cmdcr" style="position:relative;"><a href="#mapping-%EC%8B%9C-cr-vs-cmdcr" aria-label="mapping 시 cr vs cmdcr permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>mapping 시 <code>:...&#x3C;cr></code> vs <code>&#x3C;cmd>...&#x3C;cr></code></h3>
<ul>
<li><code>nnoremap [w :lprevious&#x3C;cr></code></li>
<li><code>nnoremap [w &#x3C;cmd>lprevious&#x3C;cr></code></li>
</ul>
<p>두 코드 모두 <code>[w</code> 단축키에 <code>lprevious&#x3C;cr></code> 명령을 매핑한다.</p>
<p><code>:h &#x3C;cmd></code></p>
<blockquote>
<p>The <Cmd> pseudokey begins a "command mapping", which executes the command
directly (without changing modes).  Where you might use ":...<CR>" in the
{rhs} of a mapping, you can instead use "<Cmd>...<CR>".</p>
</blockquote>
<p><code>&#x3C;cmd></code>는 모드 변경없이 명령을 실행한다고 되어있다.</p>
<p>두 방식을 비교해보면, <code>:...&#x3C;cr></code>는 실행한 명령어가 입력창에 남아있다.
반면에 <code>&#x3C;cmd>...&#x3C;cr></code>는 남아있지 않다.</p>
<h3 id="프로파일링-하기" style="position:relative;"><a href="#%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC%EB%A7%81-%ED%95%98%EA%B8%B0" aria-label="프로파일링 하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>프로파일링 하기</h3>
<p>이유없이 느려진다면 프로파일링 해보자.</p>
<p>아래 함수 내용을 직접 실행하거나, 번거로우니 함수 자체를 정의해두고 <code>:call StartProfiling()</code> 호출하자.
느려지게 만드는 액션을 하고 <code>:profile stop</code> 또는 vim에서 나가면, <code>vim-profiling.log</code> 파일이 생성된다.</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">function! StartProfiling()
  :profile start vim-profiling.log
  :profile file *
  :profile func *
  echo &#39;profiling is started. log file: vim-profiling.log&#39;
endfunction</code>
        </deckgo-highlight-code>
<h3 id="text-object-개선하기" style="position:relative;"><a href="#text-object-%EA%B0%9C%EC%84%A0%ED%95%98%EA%B8%B0" aria-label="text object 개선하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>text object 개선하기</h3>
<p>vim에서 기본적으로 <code>viw</code>로 단어를, <code>vip</code>로 문단을 선택할 수 있다.
더 나아가서 각 언어에 맞게 함수, 클래스를 선택할 수 있는 방법이 있다.</p>
<p>선택 단위를 text object라 한다. <code>:h text-objects</code> 참고하자.</p>
<p><a href="../python">Python</a>은 들여쓰기로, <a href="../javascript">Javscript</a>는 중괄호로 함수를 표현한다.
이렇게 언어마다 달라지는 부분을 표현하기 위해서 저마다 설정이 필요하다.</p>
<p>파이썬에 맞는 text object를 제공하거나,
Selection을 점진적으로 확장/축소하는 기능을 제공하는 플러그인이 있다.</p>
<h4 id="vim-pythonsense" style="position:relative;"><a href="#vim-pythonsense" aria-label="vim pythonsense permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>vim-pythonsense</h4>
<p><a href="https://github.com/jeetsukumaran/vim-pythonsense">vim-pythonsense</a></p>
<p><a href="https://github.com/bps/vim-textobj-python">vim-textobj-python</a> 이건 제대로 동작하지 않았다.</p>
<p><strong>vim-pythonsense</strong> 플러그인은 파이썬의 Text Object를 제공한다.
뿐만 아니라 Text Object로 점프하는 기능도 제공하는데,
나는 이 기능은 막았다.</p>
<p>설정을 통해 키 매핑을 비활성화 할 수 있다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">let g:is_pythonsense_suppress_motion_keymaps = 0
let g:is_pythonsense_suppress_keymaps = 0
let g:is_pythonsense_alternate_motion_keymaps = 0</code>
        </deckgo-highlight-code>
<h4 id="vim-expand-region" style="position:relative;"><a href="#vim-expand-region" aria-label="vim expand region permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>vim-expand-region</h4>
<p><a href="https://github.com/terryma/vim-expand-region">terryma/vim-expand-region</a></p>
<p>Expand Selection, Shrink Selection 기능을 제공하는 플러그인.</p>
<p>VSCode, Intellij 에서도 이 기능이 있다.</p>
<p><code>+</code> 키를 누르면 단어 -> 문자열 -> 괄호 -> 한 줄 -> 함수 -> 클래스 순서로
점진적으로 Selection 한다. <code>-</code> 키는 그 반대로 동작한다.</p>
<p><code>vim-textobj-python</code> 플러그인이 없으면, 함수, 클래스 레벨에서 제대로 동작하지 않는다.</p>
<p>별다른 설정을 하지 않으면, 첫 레벨부터 렉이 있어서,
다음과 같이 설정하여 사용하고 있다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">call expand_region#custom_text_objects(&#39;python&#39;, {
  \ &#39;af&#39; :1,
  \ &#39;if&#39; :1,
  \ &#39;ac&#39; :1,
  \ &#39;ic&#39; :1,
  \ })</code>
        </deckgo-highlight-code>
<h3 id="command-대신-command를-사용하자" style="position:relative;"><a href="#command-%EB%8C%80%EC%8B%A0-command%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%9E%90" aria-label="command 대신 command를 사용하자 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>command</code> 대신 <code>command!</code>를 사용하자.</h3>
<p><code>.vimrc</code>를 리로드하면 이미 정의된 command라고 에러가 나는 경우가 있다:</p>
<deckgo-highlight-code language="bash"  >
          <code slot="code">Error detected while processing /home/pair/.vimrc:
line  375:
E174: Command already exists: add ! to replace it</code>
        </deckgo-highlight-code>
<p>해결하기 위해선 힌트 그대로, <code>!</code> 만 붙여주면 된다. 그러면 replace 하므로 에러가 발생하지 않는다.</p>
<p>다음과 같은 구문이 있으면</p>
<deckgo-highlight-code language="bash"  >
          <code slot="code">command TestCore call &lt;SID&gt;run_test_core()</code>
        </deckgo-highlight-code>
<p>다음과 같이 변경해주면 된다.</p>
<deckgo-highlight-code language="bash"  >
          <code slot="code">command! TestCore call &lt;SID&gt;run_test_core()</code>
        </deckgo-highlight-code>
<h3 id="옵션이-어느-파일에서-변경되었는지-알려면-verbose" style="position:relative;"><a href="#%EC%98%B5%EC%85%98%EC%9D%B4-%EC%96%B4%EB%8A%90-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%EB%B3%80%EA%B2%BD%EB%90%98%EC%97%88%EB%8A%94%EC%A7%80-%EC%95%8C%EB%A0%A4%EB%A9%B4-verbose" aria-label="옵션이 어느 파일에서 변경되었는지 알려면 verbose permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>옵션이 어느 파일에서 변경되었는지 알려면 <code>:verbose</code></h3>
<p><code>:verbose set filetype?</code></p>
<p>파일 타입을 어느 파일에서 결정했는지 알려면 위처럼 사용하면 된다.</p>
<p>뒤에 물음표는 꼭 붙이자. <code>filetype</code>처럼 값을 받는 옵션이 아닌 <code>hlsearch</code>처럼 on/off 하는 형태라면 <code>verbose</code>가 무시되고 옵션 변경을 한다.
다시 <code>verbose</code>로 확인하더라도 방금 명령어로 변경했기 때문에 제대로된 출처를 알 수 없다.</p>
<h3 id="플러그인-설치되어-있는지-확인하기" style="position:relative;"><a href="#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98%EB%90%98%EC%96%B4-%EC%9E%88%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0" aria-label="플러그인 설치되어 있는지 확인하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>플러그인 설치되어 있는지 확인하기</h3>
<p>특정 플러그인을 설정하기 위해서, 설치되어 있는지 확인해야 할 때가 있다.<br>
설치 여부를 판단하지 않으면 vim 실행 시 에러 문구가 출력되어 번거롭다.</p>
<p>vim 기능으로는 제공하지 않는다.</p>
<p>Package Manager로 <a href="https://github.com/junegunn/vim-plug">vim-plug</a>를 사용한다면 <code>plugs</code> 변수를 확인하는 방법이 유효하다.</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">if !has_key(plugs, &#39;sonokai&#39;)
  &quot; &#39;sonokai&#39; not installed
  finish
endif

&quot; do something with &#39;sonokai&#39;</code>
        </deckgo-highlight-code>
<p><code>plugs</code>는 dictionary로 플러그인 이름을 key로 가지고 있다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">&quot; echo plugs로 구조를 확인할 수 있다.
{&#39;sonokai&#39;: {&#39;uri&#39;: &#39;https://git::@github.com/sainnhe/sonokai.git&#39;, &#39;dir&#39;: &#39;/home/dupark/.local/share/nvim/plugged/sonokai/&#39;, &#39;frozen&#39;: 0, &#39;branch&#39;: &#39;&#39;}}</code>
        </deckgo-highlight-code>
<h2 id="issues" style="position:relative;"><a href="#issues" aria-label="issues permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Issues</h2>
<h3 id="typescript-filetype-문제" style="position:relative;"><a href="#typescript-filetype-%EB%AC%B8%EC%A0%9C" aria-label="typescript filetype 문제 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Typescript filetype 문제</h3>
<p>typescript language server에서 JSX 문법을 확인하지 못한다면 파일 타입을 확인해보자.
<code>:set ft?</code>로 확인했을 때 <code>typescriptreact</code>가 아니라 <code>typescript</code>면 문제가 있다.</p>
<p><code>:set filetype=typescriptreact</code>로 변경하면 JSX의 하이라이팅이나 타입 체크가 정상적으로 동작한다.</p>
<p><code>.vimrc</code>에 filetype을 변경하도록 설정하자:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">&quot; set filetypes as typescriptreact
autocmd BufNewFile,BufRead *.tsx,*.jsx set filetype=typescriptreact</code>
        </deckgo-highlight-code>
<p>ref. <a href="https://github.com/peitalin/vim-jsx-typescript#vim-jsx-typescript">https://github.com/peitalin/vim-jsx-typescript#vim-jsx-typescript</a></p>
<blockquote>
<p>Changelog: filetypes were updated from typescript.tsx to typescriptreact Please set filetypes as typescriptreact, not typescript.tsx as in prior versions in your .vimrc if you have any issues</p>
</blockquote>
<p>ref. <a href="https://github.com/leafgarland/typescript-vim/issues/158#issuecomment-589954199">https://github.com/leafgarland/typescript-vim/issues/158#issuecomment-589954199</a></p>
<blockquote>
<p>This brings a new problem. Typescript language server excepts from a typescript file to not have JSX in it. Which means that &#x3C;> is considered a type assertion, JSX is not recognized as JSX but as regular Typescript syntax and the list goes on.</p>
</blockquote>
<h3 id="vim-colors-solarized-colorscheme-플러그인이-점점-느려지게-만드는-현상" style="position:relative;"><a href="#vim-colors-solarized-colorscheme-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%B4-%EC%A0%90%EC%A0%90-%EB%8A%90%EB%A0%A4%EC%A7%80%EA%B2%8C-%EB%A7%8C%EB%93%9C%EB%8A%94-%ED%98%84%EC%83%81" aria-label="vim colors solarized colorscheme 플러그인이 점점 느려지게 만드는 현상 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>vim-colors-solarized</code> colorscheme 플러그인이 점점 느려지게 만드는 현상</h3>
<p>vimwiki로 문서 수정할 때, <code>&#x3C;cr></code> <em>엔터를 꾹 누르고 있으면 점점 느려지는</em> 문제.
vimwiki가 키보드 엔터 시 함수 호출이 많다. 그래서 더욱 돋보이는 듯 하다.</p>
<deckgo-highlight-code   >
          <code slot="code">FUNCTIONS SORTED ON TOTAL TIME
count  total (s)   self (s)  function
    4   1.671452   0.000150  &lt;SNR&gt;199_CR()
    4   1.669305   0.000430  vimwiki#lst#kbd_cr()
    4   1.667958   0.000952  &lt;SNR&gt;211_cr_on_empty_line()
    1   0.261215   0.000028  vimwiki#u#count_exe()
    1   0.261187   0.000350  vimwiki#lst#kbd_o()
    5   0.093622   0.009607  &lt;SNR&gt;211_get_corresponding_item()
   16   0.087560   0.002484  airline#check_mode()</code>
        </deckgo-highlight-code>
<p>프로파일링 해보니, 엔터가 입력될 때 마다 거의 초단위로 시간이 소요되었다.</p>
<p>결론은 colorscheme 옵션을 제거하면 괜찮다. 프로파일링으로는 딱히 힌트를 얻지 못했다.
<code>soliarized</code>로 사용하고 있었다:</p>
<deckgo-highlight-code language="vim"  >
          <code slot="code">colorscheme solarized</code>
        </deckgo-highlight-code>
<p>플러그인을 하나씩 제외하면서 테스트하는 것으로 원인을 찾을 수 있었다.
기본 테마도 나름 볼만하다 :|</p>
<p><code>:echo g:colors_name</code>로 현재 colorscheme을 알 수 있다. 변수를 찾을 수 없으면 사용하지 않는 것.</p>
<p>colorscheme을 제외하고 재현하면 간헐적으로 느려지긴 한다. 하지만 곧바로 복구된다. colorscheme을 사용할 때는 한 번 느려지면 다시 vim 실행하기 전까지는 복구되지 않는다.</p>
<h3 id="ubuntu에-설치한-vim이-시작-시-vimrc에서-많은-에러가-발생하는-현상" style="position:relative;"><a href="#ubuntu%EC%97%90-%EC%84%A4%EC%B9%98%ED%95%9C-vim%EC%9D%B4-%EC%8B%9C%EC%9E%91-%EC%8B%9C-vimrc%EC%97%90%EC%84%9C-%EB%A7%8E%EC%9D%80-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%ED%98%84%EC%83%81" aria-label="ubuntu에 설치한 vim이 시작 시 vimrc에서 많은 에러가 발생하는 현상 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ubuntu에 설치한 vim이 시작 시 <code>.vimrc</code>에서 많은 에러가 발생하는 현상</h3>
<p>askubuntu 질문: <a href="https://askubuntu.com/questions/284957/vi-getting-multiple-sorry-the-command-is-not-available-in-this-version-af">vi, getting multiple "Sorry, the command is not available in this version..." after reinstall</a></p>
<p>올바른 vim 버전인지 확인하자. vim.tiny로 설치되었을 수 있다:</p>
<deckgo-highlight-code language="bash"  >
          <code slot="code">$ readlink -f `which vim`
/usr/bin/vim.tiny</code>
        </deckgo-highlight-code>
<p>ubuntu에서는 풀 버전의 vim을 설치하지 않는다고 한다. <code>/usr/bin/vim.basic</code>을 가르켜야 한다.
최근에는 neovim을 사용하고 있어서 이 편이 더 좋을지도.</p>
<h2 id="관련-기사" style="position:relative;"><a href="#%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%82%AC" aria-label="관련 기사 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>관련 기사</h2>
<p>"Vim은 제 인생에서 매우 중요한 부분입니다” Vim 창시자 인터뷰<br>
<a href="https://yozm.wishket.com/magazine/detail/2183/">https://yozm.wishket.com/magazine/detail/2183/</a></p></div><div class="Comments__Container-sc-1ajj4d9-0 gcJKrk"><hr/><div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/wiki/vim/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-e101619dec43049db7ea.js\"],\"component---src-components-gatsby-templates-wiki-tsx\":[\"/component---src-components-gatsby-templates-wiki-tsx-69f802432ab926eb02b8.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-edf762ada97e4ebbea88.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-cc3d6b8d2b3cfeddb733.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="8193acbf7c21d4904637";</script><script src="/cat-logic/webpack-runtime-fa2d919ffee3e852f2e7.js" async></script><script src="/cat-logic/app-e101619dec43049db7ea.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>