<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.6.0"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div><ul>
<li>
<p><a href="#swagger">Swagger</a></p>
</li>
<li>
<p><a href="#swagger-core">Swagger Core</a></p>
<ul>
<li><a href="#enum-class%EC%97%90%EC%84%9C-jackson-jsonformat%EC%9D%B4-%EC%A0%81%EC%9A%A9%EB%90%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EB%AC%B8%EC%A0%9C">enum class에서 Jackson <code>@JsonFormat</code>이 적용되지 않는 문제</a></li>
</ul>
</li>
</ul></div><div><h1>Swagger</h1>
<p>REST 웹 서비스를 위한 문서화 도구</p>
<h1>Swagger Core</h1>
<p><a href="https://github.com/swagger-api/swagger-core">https://github.com/swagger-api/swagger-core</a></p>
<p><a href="https://github.com/springdoc/springdoc-openapi">springdoc-openapi</a>는 Swagger Core를 기반으로 만들어졌다.
따라서 <a href="spring-framework.md">Spring Framework</a>를 사용하는 경우 문서화에서 발생하는 이슈는 대부분 swagger-core와 관련이 있다.</p>
<h2>enum class에서 Jackson <code>@JsonFormat</code>이 적용되지 않는 문제</h2>
<p>Github Issue: <a href="https://github.com/swagger-api/swagger-core/issues/3691">https://github.com/swagger-api/swagger-core/issues/3691</a></p>
<p>다음과 같이 kotlin 코드를 작성하였다.</p>
<pre><code class="language-kotlin">data class Response(
  @JsonUnwrapped
  val status: Status,
  val data: Any?
)

@JsonFormat(shape = JsonFormat.Shape.OBJECT)
enum class Status(val code: Int, val message: String) {
  SUCCESS(0, "success"),
  FAIL(1, "fail")
}
</code></pre>
<p>내가 예상한 serialization 결과:</p>
<pre><code class="language-json">{
  "code": 0,
  "message": "success"
  "data": null
}
</code></pre>
<p>실제 serialization 결과:</p>
<pre><code class="language-json">{
  "status": "SUCCESS",
  "data": null
}
</code></pre>
<p><code>@JsonUnwrapped</code>, <code>@JsonFormat</code>이 적용되지 않았다.
아직 별다른 해결 방법이 없는 모양. 이슈에서 관련 로직을 <a href="https://github.com/utybo/Tegral/issues/55">재작성한다</a>는 거 같다.</p></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/wiki/1f2ef23a-0ba9-53ab-a41f-f059a38f9fdb/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-81fc23a5f8ac4aaeaf7f.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-7bfef5ca48decc695459.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-6d43a8f7f51ecc1860ec.js\"],\"component---src-pages-wiki-markdown-remark-id-tsx\":[\"/component---src-pages-wiki-markdown-remark-id-tsx-b2b1547370b411798096.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="82f7bb400a9c12ba81db";</script><script src="/webpack-runtime-bb36b49e6b0a9e88dd23.js" async></script><script src="/framework-9b6d338de49a676a1843.js" async></script><script src="/app-81fc23a5f8ac4aaeaf7f.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>