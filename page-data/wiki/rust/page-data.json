{"componentChunkName":"component---src-components-gatsby-templates-wiki-tsx","path":"/wiki/rust/","result":{"data":{"file":{"fields":{"gitLogLatestHash":"d24b42fdf6609e4737f2be024da5c603759f22c8","gitLogLatestDate":"2024-05-05T06:07:45Z"},"childMarkdownRemark":{"headings":[{"value":"Rust Programming Language"}],"fields":{"slug":"/rust/","relatedDocs":[{"slug":"javascript","similarity":0.5512807875},{"slug":"web","similarity":0.5562252452},{"slug":"2016-08-27-gdg-webtech-workshop-nnn","similarity":0.5639548833},{"slug":"crontab","similarity":0.3665666809},{"slug":"gradle","similarity":0.5081829158},{"slug":"idea-methodology","similarity":0.4426327695},{"slug":"2016-11-16-google-campus-two-things-you-must-keep-in-google-play","similarity":0.564787603},{"slug":"spring-framework","similarity":0.5419622153},{"slug":"aws","similarity":0.4646454571},{"slug":"git","similarity":0.5261753506},{"slug":"algorithm-practice","similarity":0.3943288087},{"slug":"docker","similarity":0.4540923071},{"slug":"scp","similarity":0.248450177},{"slug":"mac-os","similarity":0.495769479},{"slug":"testing","similarity":0.6022900531},{"slug":"machine-learning","similarity":0.6248741869},{"slug":"devops","similarity":0.4704327555},{"slug":"python","similarity":0.5873658641},{"slug":"object-oriented-programming","similarity":0.6176193075},{"slug":"linux","similarity":0.4423907667},{"slug":"sfml","similarity":0.6381512404},{"slug":"windows","similarity":0.478245957},{"slug":"markdown","similarity":0.5109731795},{"slug":"cat-logic","similarity":0.5041825039},{"slug":"vuejs","similarity":0.3036382024},{"slug":"shell","similarity":0.5796155579},{"slug":"html","similarity":0.3825642642},{"slug":"vimenter-2023","similarity":0.5890946358},{"slug":"data-analysis","similarity":0.5222944863},{"slug":"hardware","similarity":0.450185159},{"slug":"programming-convention","similarity":0.4037837683},{"slug":"webgl","similarity":0.442429452},{"slug":"sentry","similarity":0.3395407089},{"slug":"valve","similarity":0.4385402313},{"slug":"security","similarity":0.3841157314},{"slug":"reactjs","similarity":0.5402824316},{"slug":"airflow","similarity":0.3573343928},{"slug":"computer-graphics","similarity":0.3098896294},{"slug":"elasticsearch","similarity":0.4837835045},{"slug":"unicode","similarity":0.3314958969},{"slug":"logging","similarity":0.2980739967},{"slug":"tools","similarity":0.621702832},{"slug":"programming-paradigm","similarity":0.62476214},{"slug":"system-failures","similarity":0.4173781012},{"slug":"amazon-redshift","similarity":0.3162494384},{"slug":"inspiration","similarity":0.526343594},{"slug":"gatsbyjs","similarity":0.5670636997},{"slug":"design-pattern","similarity":0.6041625691},{"slug":"game","similarity":0.5471004788},{"slug":"kubernetes","similarity":0.3991534243},{"slug":"llm-tools","similarity":0.5295684225},{"slug":"nodejs","similarity":0.695174925},{"slug":"continuous-integration-and-deployment","similarity":0.3994026611},{"slug":"rust","similarity":1},{"slug":"book","similarity":0.5317629316},{"slug":"jetbrains","similarity":0.573508005},{"slug":"quotation","similarity":0.3477044506},{"slug":"postgresql","similarity":0.3854338177},{"slug":"jira","similarity":0.3401716848},{"slug":"swagger","similarity":0.3750653239},{"slug":"architecture","similarity":0.5704647288},{"slug":"unity3d","similarity":0.5297047815},{"slug":"jargon","similarity":0.5280607096},{"slug":"language-server-protocol","similarity":0.4099109991},{"slug":"clean-code","similarity":0.5424450551},{"slug":"java","similarity":0.576744429},{"slug":"windows-subsystem-for-linux","similarity":0.5600214571},{"slug":"test-driven-development","similarity":0.4278881233},{"slug":"philosophy","similarity":0.6549976022},{"slug":"github","similarity":0.5173476295},{"slug":"network","similarity":0.3495513483},{"slug":"kotlin","similarity":0.5839711176},{"slug":"c-sharp","similarity":0.4515725558},{"slug":"angularjs","similarity":0.510850631},{"slug":"vim","similarity":0.5331656336},{"slug":"ionic-framework","similarity":0.3516729},{"slug":"physics","similarity":0.4660480975},{"slug":"html-canvas","similarity":0.3860575576},{"slug":"reverse-engineering","similarity":0.3630776711},{"slug":"space","similarity":0.290698797},{"slug":"css","similarity":0.4226410217},{"slug":"code-review","similarity":0.5525789675},{"slug":"software-development","similarity":0.6152622231},{"slug":"database","similarity":0.6154804407},{"slug":"reactive-extensions","similarity":0.3530614118},{"slug":"redis","similarity":0.3398249006},{"slug":"mail","similarity":0.2444687753},{"slug":"experience-review","similarity":0.3600242429},{"slug":"google-analytics","similarity":0.3187266108},{"slug":"data-structure","similarity":0.4590271547},{"slug":"vimwiki","similarity":0.4843253486},{"slug":"embeddings","similarity":0.4479894816},{"slug":"추론 애플리케이션","similarity":0.4383535743}]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#rust-programming-language\">Rust Programming Language</a></p>\n<ul>\n<li>\n<p><a href=\"#%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\">환경 구축하기</a></p>\n<ul>\n<li><a href=\"#cargo\">Cargo</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">프로젝트 시작하기</a></p>\n</li>\n<li>\n<p><a href=\"#journey-to-rust\">Journey to Rust</a></p>\n<ul>\n<li><a href=\"#lifetime\">Lifetime</a></li>\n<li><a href=\"#ownership\">Ownership</a></li>\n<li><a href=\"#null-safety\">Null Safety</a></li>\n<li><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\">테스트 코드 작성하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#articles-and-references\">Articles and References</a></p>\n</li>\n</ul>\n</li>\n</ul>","html":"<h1 id=\"rust-programming-language\" style=\"position:relative;\"><a href=\"#rust-programming-language\" aria-label=\"rust programming language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rust Programming Language</h1>\n<p>Rust를 <a href=\"../sfml\">SFML</a>로 처음 시작중이다.</p>\n<p><a href=\"https://www.rust-lang.org/\">https://www.rust-lang.org/</a></p>\n<p>top-down 방식으로 배우기에는 Rust는 꽤 어려운 언어인 거 같다. 학습곡선이 높은 언어로 유명한 언어이기도 하다.</p>\n<h2 id=\"환경-구축하기\" style=\"position:relative;\"><a href=\"#%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0\" aria-label=\"환경 구축하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>환경 구축하기</h2>\n<p>Ubuntu on WSL, OSX 환경에서 주로 개발해서 Homebrew로 설치했다.</p>\n<p><code class=\"language-text\">rust</code> Formula도 있지만, <code class=\"language-text\">rustup</code>을 사용하자. <code class=\"language-text\">rustup</code>은 <code class=\"language-text\">rust</code>의 버전 관리나 toolchain을 관리할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ brew <span class=\"token function\">install</span> rustup-init</code></pre></div>\n<p>설치 후, <code class=\"language-text\">rustup-init</code>을 실행하면 <code class=\"language-text\">rust</code>와 <code class=\"language-text\">cargo</code>를 설치하는 과정이 시작된다.</p>\n<p>어떤 경로에 설치될 지 물어보는데, 그냥 Enter를 눌러서 기본 경로에 설치했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ rustup-init\n<span class=\"token comment\"># ...</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> Proceed with standard installation <span class=\"token punctuation\">(</span>default - just press enter<span class=\"token punctuation\">)</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> Customize installation\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> Cancel installation</code></pre></div>\n<p><code class=\"language-text\">rustc</code>, <code class=\"language-text\">cargo</code>가 설치되었는지 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">❯ rustc <span class=\"token parameter variable\">--version</span>\nrustc <span class=\"token number\">1.72</span>.1 <span class=\"token punctuation\">(</span>d5c2e9c34 <span class=\"token number\">2023</span>-09-13<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>Homebrew<span class=\"token punctuation\">)</span>\n\n\n❯ <span class=\"token function\">cargo</span> <span class=\"token parameter variable\">--version</span>\n<span class=\"token function\">cargo</span> <span class=\"token number\">1.72</span>.1</code></pre></div>\n<h3 id=\"cargo\" style=\"position:relative;\"><a href=\"#cargo\" aria-label=\"cargo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cargo</h3>\n<p>cargo는 패키지 매니저이다.</p>\n<p>패키지는 몇 개 사이트에서 찾을 수 있는 것으로 보인다.\nSFML 패키지를 docs.rs, crates.io 2개 사이트에서 찾을 수 있었다.</p>\n<ul>\n<li><a href=\"https://docs.rs/crate/sfml/latest\">https://docs.rs/crate/sfml/latest</a></li>\n<li><a href=\"https://crates.io/crates/sfml\">https://crates.io/crates/sfml</a></li>\n</ul>\n<p>docs.rs는 라이브러리 문서화에 특화되어 있는 것으로 보인다.<br>\ncrates.io처럼 <code class=\"language-text\">cargo add sfml</code>와 같은 설치 명령어 안내 문구가 없다.</p>\n<h2 id=\"프로젝트-시작하기\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\"프로젝트 시작하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝트 시작하기</h2>\n<p><code class=\"language-text\">cargo</code> 명령어로 프로젝트를 생성하거나 패키지를 설치할 수 있다.</p>\n<p>다음은 <code class=\"language-text\">sfml-rust-start</code> 이름의 프로젝트를 생성하는 명령어이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cargo</span> new sfml-rust-start\n     Created binary <span class=\"token punctuation\">(</span>application<span class=\"token punctuation\">)</span> <span class=\"token variable\"><span class=\"token variable\">`</span>sfml-rust-start<span class=\"token variable\">`</span></span> package\n\n$ <span class=\"token builtin class-name\">cd</span> sfml-rust-start\n\n$ tree <span class=\"token parameter variable\">-a</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token builtin class-name\">.</span>\n├── Cargo.toml\n├── .git\n├── .gitignore\n└── src\n    └── main.rs</code></pre></div>\n<p><code class=\"language-text\">Cargo.toml</code> 파일과 함께 git 저장소가 생성된다.\nhello world를 출력하는 기본적인 코드가 <code class=\"language-text\">src/main.rs</code>에 작성되어 있다.</p>\n<p>현재 디렉토리를 프로젝트로 만들고 싶다면 <code class=\"language-text\">cargo init</code> 명령어를 사용한다.</p>\n<p>Rust 코드를 실행해보자. <code class=\"language-text\">rustc</code>로 컴파일하면 실행 파일이 생성된다:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ rustc src/main.rs\n$ ./main\nHello, world<span class=\"token operator\">!</span></code></pre></div>\n<h2 id=\"journey-to-rust\" style=\"position:relative;\"><a href=\"#journey-to-rust\" aria-label=\"journey to rust permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Journey to Rust</h2>\n<p>24년의 시작을 Rust로 시작했다.</p>\n<p>문법을 따로 공부하지 않고, 무작정 사용해보고 있다. 물론 아무런 도움이 없는 것은 아니다.\n<a href=\"../machine-learning\">ChatGPT</a>와 <a href=\"../language-server-protocol\">LSP</a>를 적극 활용하고 있다.</p>\n<p>간단한 <a href=\"https://github.com/Edunga1/rust-sfml-practice\">SFML Rust</a> 프로젝트로 시작한다.</p>\n<p>ChatGPT가 아니었으면 더 험난했을 것 같다. ChatGPT 덕분에 언어의 러닝커브를 줄일 수 있었다.\n<code class=\"language-text\">trait</code>은 다른 언어에도 있는 개념이지만, lifetime은 예상치 못했다. LSP가 없었더라면 수 많은 에러에 만신창이가 되었을 것이다.</p>\n<p>immutable을 우선하는 것과 <a href=\"https://doc.rust-lang.org/rust-by-example/scope/lifetime/struct.html\">lifetime</a>을 보면 Rust가 메모리 안전성을 중요시하는 것을 알 거 같다.\n그래도 lifetime의 <code class=\"language-text\">&lt;'a></code>는 뭔가 어색하다. 특히 <code class=\"language-text\">'static</code>은 더욱.</p>\n<p>강의를 보거나 하지 않고, 필요할 때 마다 찾아보고 있어서, 정확한 정보가 아니겠지만 일단 여기에 정리해둔다.</p>\n<h3 id=\"lifetime\" style=\"position:relative;\"><a href=\"#lifetime\" aria-label=\"lifetime permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lifetime</h3>\n<p>C언어는 <a href=\"https://ko.m.wikipedia.org/wiki/%ED%97%88%EC%83%81_%ED%8F%AC%EC%9D%B8%ED%84%B0\">Dangling Pointer</a> 문제가 있다.<br>\n포인터가 유효한 객체를 가리키지 않는 것이다. 다음은 Wikipedia의 예시이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>dp <span class=\"token operator\">=</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">/* ... */</span>\n   <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">char</span> c<span class=\"token punctuation\">;</span>\n       dp <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>c<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n     <span class=\"token comment\">/* c falls out of scope */</span>\n     <span class=\"token comment\">/* dp is now a dangling pointer */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">dp</code>는 <code class=\"language-text\">c</code>를 가리키고 있지만, <code class=\"language-text\">c</code>가 스코프를 벗어나면 메모리 해제되고, <code class=\"language-text\">dp</code>는 더 이상 유효한 포인터가 아니다.</p>\n<p>Rust는 참조 수명을 통해 이 문제를 방지한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token comment\">// compile error</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> r<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n        r <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"r: {}\"</span><span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 컴파일 되지 않는다. <code class=\"language-text\">x</code>의 수명이 <code class=\"language-text\">r</code>의 수명보다 짧기 때문이다.</p>\n<h3 id=\"ownership\" style=\"position:relative;\"><a href=\"#ownership\" aria-label=\"ownership permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ownership</h3>\n<p>Ownership은 메모리 문제를 해결하는 개념이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> foo <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> bar <span class=\"token operator\">=</span> foo<span class=\"token punctuation\">;</span>                           <span class=\"token comment\">// moved value from `foo` to `bar`</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The value is: {:?}\"</span><span class=\"token punctuation\">,</span> foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// error</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The value is: {:?}\"</span><span class=\"token punctuation\">,</span> bar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// ok</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>코드는 컴파일 되지 않는다. <code class=\"language-text\">foo</code>의 소유권이 <code class=\"language-text\">bar</code>로 이동되었기 때문이다. 그래서 <code class=\"language-text\">foo</code>를 사용할 수 없다.</p>\n<p>해결하기 위해선 Copy, Clone, Borrowing 등을 사용해서 소유권을 해결해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> foo <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> bar <span class=\"token operator\">=</span> foo<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The value is: {:?}\"</span><span class=\"token punctuation\">,</span> foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Clone을 사용하여 해결한 코드이다.\n<code class=\"language-text\">clone()</code>은 rust에서 <code class=\"language-text\">Clone</code> trait를 구현한 것이다. 이제 <code class=\"language-text\">foo</code>, <code class=\"language-text\">bar</code> 모두 사용할 수 있다.</p>\n<hr>\n<p>소유권 문제는 다음 예제에서 두드러진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">dummy</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \t<span class=\"token comment\">// x is dropped</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dummy</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// This line won't compile</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">dummy()</code> 함수로 <code class=\"language-text\">x</code>의 값을 넘기고, <code class=\"language-text\">x</code>의 값은 <code class=\"language-text\">dummy()</code>에서 사라진다.\n그래서 <code class=\"language-text\">main()</code>에서 <code class=\"language-text\">x</code>를 사용할 수 없다. 간단한 코드지만 처음보면 잘 이해되지 않는 부분.</p>\n<p>ref. <a href=\"https://indosaram.github.io/rust-python-book/ch5-02.html#%EA%B0%92%EC%97%90-%EB%8C%80%ED%95%9C-%EC%86%8C%EC%9C%A0%EA%B6%8C\">https://indosaram.github.io/rust-python-book/ch5-02.html#%EA%B0%92%EC%97%90-%EB%8C%80%ED%95%9C-%EC%86%8C%EC%9C%A0%EA%B6%8C</a></p>\n<h3 id=\"null-safety\" style=\"position:relative;\"><a href=\"#null-safety\" aria-label=\"null safety permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Null Safety</h3>\n<p>rust는 Null Safety 언어이다. Null 대신 <code class=\"language-text\">Option</code>을 사용하는데 여기에도 Ownership이 적용된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> opt <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> opt<span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The value is: {:?}\"</span><span class=\"token punctuation\">,</span> opt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// error</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 컴파일 되지 않는다. <code class=\"language-text\">opt</code>의 소유권이 <code class=\"language-text\">value</code>로 이동되었기 때문이다. 그래서 <code class=\"language-text\">opt</code>를 더 이상 사용할 수 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> opt <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, Rust!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> opt<span class=\"token punctuation\">.</span><span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The value is: {:?}\"</span><span class=\"token punctuation\">,</span> opt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ok</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">take()</code>는 <code class=\"language-text\">Option</code>의 소유권을 가져가는 메소드이다. <code class=\"language-text\">opt</code>는 <code class=\"language-text\">None</code>이 된다.</p>\n<h3 id=\"테스트-코드-작성하기\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"테스트 코드 작성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트 코드 작성하기</h3>\n<p>Rust는 유닛 테스트 코드를 테스트하려는 코드와 함께 작성하는 것이 일반적이다.</p>\n<p><a href=\"https://doc.rust-lang.org/book/ch11-03-test-organization.html#testing-private-functions\">https://doc.rust-lang.org/book/ch11-03-test-organization.html#testing-private-functions</a></p>\n<div class=\"gatsby-highlight\" data-language=\"rust\"><pre class=\"language-rust\"><code class=\"language-rust\"><span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add_two</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">internal_adder</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">internal_adder</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-></span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{</span>\n    a <span class=\"token operator\">+</span> b\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token attribute attr-name\">#[cfg(test)]</span>\n<span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">tests</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">use</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">::</span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token attribute attr-name\">#[test]</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">internal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token function\">internal_adder</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>The <code class=\"language-text\">#[cfg(test)]</code> annotation on the tests module tells Rust to compile and run the test code only when you run <code class=\"language-text\">cargo test</code>, not when you run <code class=\"language-text\">cargo build</code>.</p>\n</blockquote>\n<p>위와 같이 같은 파일에 위치 시키고 <code class=\"language-text\">#[cfg(test)]</code>로 테스트 코드를 작성한다.\n<code class=\"language-text\">#[cfg(test)]</code>는 <code class=\"language-text\">cargo test</code> 명령어로 실행할 때만 컴파일 되도록 한다. 운영 코드의 빌드에는 포함되지 않는다.</p>\n<blockquote>\n<p>You’ll see that because integration tests go in a different directory, they don’t need the <code class=\"language-text\">#[cfg(test)]</code> annotation.</p>\n</blockquote>\n<p>통합 테스트는 다른 디렉토리에 위치하므로 <code class=\"language-text\">#[cfg(test)]</code> 주석이 필요 없다.</p>\n<p>테스트를 위한 모듈 임포트는 <code class=\"language-text\">mod tests</code> 내에서 이루어지기 때문에 운영 코드와 분리된다.</p>\n<p>이건 GPT에 물어본 내용이라 정확하지 않지만, 레이아웃은 <code class=\"language-text\">대상1</code> - <code class=\"language-text\">대상1 테스트</code> - <code class=\"language-text\">대상2</code> - <code class=\"language-text\">대상2 테스트</code> 레이아웃을 가진다고 한다.</p>\n<p><a href=\"https://github.com/BurntSushi/ripgrep/blob/master/crates/globset/src/glob.rs\">Ripgrep의 테스트 코드</a>를 참고해보면 이 레이아웃을 따르고 있다.</p>\n<p><code class=\"language-text\">carog test</code>는 <code class=\"language-text\">src/</code> 내의 테스트만 실행한다. <code class=\"language-text\">cargo test --all</code>로 workspace 내 모든 테스트를 실행한다.</p>\n<h2 id=\"articles-and-references\" style=\"position:relative;\"><a href=\"#articles-and-references\" aria-label=\"articles and references permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Articles and References</h2>\n<p><a href=\"https://news.hada.io/topic?id=14521\">Rust로 게임 개발 3년 후에 떠나며</a></p>\n<p>Rust의 아쉬운 점을 서술한 글이다.</p>\n<p>빠르게 반복 개발되어야 하는 게임 개발에서 Rust는 적합하지 않았다고 한다.\n게임 개발의 핵심은 프로토타이핑을 통한 플레이 경험의 향상이지, 크래시가 없는 코드가 우선이 아니라고 한다.</p>\n<p>리팩토링에 의한 코드의 재구조화 문제.<br>\n익숙해지는 문제와 별개로 Borrow Checker나 요구 사항 변경으로 인한 코드 변경이 대규모 코드 구조 변경을 유발한다고 한다.\nIndirection(Box, Rc 등을 말함)은 코드를 장황하게 만들고, 상태 관리하기 어렵게 한다고.</p>\n<p>생산성을 떨어뜨리는 에코 시스템.<br>\n반복 개발 필요한 상황에서 Hot Reloading이 중요한데, Rust 라이브러리가 있지만 부족하다고한다.\nProcedural Macro는 컴파일 시간을 늘리는 반면에, C#의 리플렉션은 사용하기 쉽고 퍼포먼스의 영향이 있지만 빠르게 개발할 수 있게 한다고.\nOrphan Rule(잘 모르겠다)은 안전성을 위해서 생산성을 크게 떨어뜨린다고 한다. 라이브러리가 아닌 애플리케이션 코드에서는 끌 수 있어야 한다고 주장한다.</p>\n<p>Rust의 안정성에 대해서.<br>\n동적 Borrow Checking은 예상하지 못하는 크래시를 발생시킨다고 한다.\n<code class=\"language-text\">RefCell</code>을 통한 <code class=\"language-text\">.borrow_mut()</code>에서 크래시를 겪었다고. 게임에서 <code class=\"language-text\">RefCell</code>은 유용하지만 어렵게 만든다고 한다.</p>\n<p>반면에 장점도 있다.<br>\n컴파일만 되면 보통을 잘 동작한다. 크게 노력하지 않아도 퍼포먼스가 좋다.\nRust Analyzer로 IDE 사용성이 크게 개선되었다고 한다. Trait과 Enum이 잘 설계되어 있다고 한다.</p>\n<p>Rust 입문자로써 내 생각.<br>\n아직 시작 단계지만 어느정도 공감한 부분이 있다. 특히 생산성 부분이다.\nRust의 코드는 Borrow 수정으로 코드의 너무 많은 부분이 변경되어야 한다는 점이다.\n이건 매우 고통스럽다. Rust Analyzer나 GitHub Copilot이 아니었다면 진작에 포기했었을 것이다.\n대부분 암시적인 python, javascript과 달리 Rust는 대부분 명시해야 한다. 그래서 장황한 코드를 만드는 것이 아닌가 싶다.\n하지만 안정성을 위해서 설계된 것이니 공감은 한다.</p>\n<hr>\n<p><a href=\"https://indosaram.github.io/rust-python-book/\">파이썬 프로그래머를 위한 러스트</a></p>\n<p>한국어로 작성된 e-book이다. 파이썬에 익숙한 사람이라면 이 책이 적절할 듯. 나는 pdf로 다운받아서 보고 있다.</p>\n<p>환경 구성부터 시작한다. Bottom-up 방식으로 설명한다.\n나는 Top-down 방식으로 Rust를 시작해서 고통스러운 부분이 있었다.\nRust는 Bottom-up 방식으로 배우는 편이 좋은 거 같다.</p>"}}},"pageContext":{"id":"4cd0f711-0eba-5100-a66d-4105c7b3b504"}},"staticQueryHashes":[],"slicesMap":{}}