{"componentChunkName":"component---src-components-gatsby-templates-wiki-tsx","path":"/wiki/kotlin/","result":{"data":{"file":{"fields":{"gitLogs":[{"hash":"7988bf841e6b4ce599bac64ba6e5ced76f08a94a","date":"2025-01-09T19:17:27+09:00"},{"hash":"b2ef750cf995c72c775031aaa28179e4235ebd9e","date":"2024-12-26T12:29:55+09:00"},{"hash":"d1f05929137ed346dc22791f38cc4c12367e5743","date":"2024-12-13T17:04:46+09:00"},{"hash":"0b4066cfd673bc0be7664df707db49d46be9a26d","date":"2024-09-16T14:08:03Z"},{"hash":"490c0b73330d2c17c32ba8c579444d458ce96608","date":"2024-08-26T11:38:47Z"},{"hash":"72988cae43cb01811ba8536aa8249cee5e312f06","date":"2024-08-12T12:30:22Z"},{"hash":"8f3c8c17851e7a2114b244096a522eb0abb816f6","date":"2024-05-10T12:05:01+09:00"},{"hash":"c554cc7c94e192dabf364484a9eeea8e165a0cc5","date":"2024-05-09T11:17:37Z"},{"hash":"06dfb4e71fac5b4164f00ebd9c9854cdfd580208","date":"2024-02-19T11:44:31+09:00"},{"hash":"d117161c8777260ca84daf0fbc4bab6537ee32f8","date":"2023-12-10T07:41:38Z"}]},"childMarkdownRemark":{"headings":[{"value":"Kotlin Programming Language"}],"fields":{"slug":"/kotlin/","relatedDocs":[{"slug":"javascript","similarity":0.5480509441},{"slug":"web","similarity":0.5305790619},{"slug":"2016-08-27-gdg-webtech-workshop-nnn","similarity":0.5114538447},{"slug":"crontab","similarity":0.3665796078},{"slug":"gradle","similarity":0.6518141047},{"slug":"idea-methodology","similarity":0.4520722952},{"slug":"podman","similarity":0.3089414455},{"slug":"2016-11-16-google-campus-two-things-you-must-keep-in-google-play","similarity":0.5411800631},{"slug":"spring-framework","similarity":0.672566791},{"slug":"aws","similarity":0.5036241803},{"slug":"git","similarity":0.4668319034},{"slug":"algorithm-practice","similarity":0.3760335568},{"slug":"docker","similarity":0.4583216898},{"slug":"scp","similarity":0.2504041051},{"slug":"mac-os","similarity":0.450968434},{"slug":"testing","similarity":0.6470686346},{"slug":"machine-learning","similarity":0.4951982938},{"slug":"devops","similarity":0.4243380336},{"slug":"python","similarity":0.5368948651},{"slug":"object-oriented-programming","similarity":0.6145599085},{"slug":"linux","similarity":0.3435178519},{"slug":"sfml","similarity":0.4771772278},{"slug":"windows","similarity":0.4198745268},{"slug":"markdown","similarity":0.4830126461},{"slug":"cat-logic","similarity":0.5800434831},{"slug":"vuejs","similarity":0.3662229427},{"slug":"shell","similarity":0.5716458566},{"slug":"html","similarity":0.488397468},{"slug":"vimenter-2023","similarity":0.5365898035},{"slug":"data-analysis","similarity":0.5391139643},{"slug":"hardware","similarity":0.3195863766},{"slug":"programming-convention","similarity":0.4246220709},{"slug":"webgl","similarity":0.418814339},{"slug":"sentry","similarity":0.3937927845},{"slug":"valve","similarity":0.3759814463},{"slug":"security","similarity":0.3747564749},{"slug":"reactjs","similarity":0.5414961648},{"slug":"airflow","similarity":0.3883112701},{"slug":"computer-graphics","similarity":0.2554802653},{"slug":"elasticsearch","similarity":0.5491169078},{"slug":"unicode","similarity":0.3326871952},{"slug":"logging","similarity":0.3361376283},{"slug":"tools","similarity":0.5847534618},{"slug":"programming-paradigm","similarity":0.6365028874},{"slug":"system-failures","similarity":0.3414322258},{"slug":"company","similarity":0.4053215519},{"slug":"amazon-redshift","similarity":0.312233887},{"slug":"inspiration","similarity":0.3893293656},{"slug":"gatsbyjs","similarity":0.5816548472},{"slug":"design-pattern","similarity":0.6607808279},{"slug":"tmux","similarity":0.4922672154},{"slug":"game","similarity":0.416919813},{"slug":"kubernetes","similarity":0.4174835636},{"slug":"nodejs","similarity":0.655781942},{"slug":"continuous-integration-and-deployment","similarity":0.4047688181},{"slug":"rust","similarity":0.6214432646},{"slug":"book","similarity":0.3790864554},{"slug":"jetbrains","similarity":0.6323972415},{"slug":"quotation","similarity":0.3290306723},{"slug":"postgresql","similarity":0.4645825688},{"slug":"jira","similarity":0.3887450772},{"slug":"large-language-model","similarity":0.6007177248},{"slug":"swagger","similarity":0.549359368},{"slug":"architecture","similarity":0.5782680087},{"slug":"godot","similarity":0.4452869885},{"slug":"curl","similarity":0.4402973799},{"slug":"unity3d","similarity":0.5269928831},{"slug":"jargon","similarity":0.5813179892},{"slug":"language-server-protocol","similarity":0.4300332999},{"slug":"clean-code","similarity":0.5436930434},{"slug":"java","similarity":0.7436636677},{"slug":"windows-subsystem-for-linux","similarity":0.464973472},{"slug":"test-driven-development","similarity":0.4456680247},{"slug":"philosophy","similarity":0.5303407734},{"slug":"github","similarity":0.5493408063},{"slug":"network","similarity":0.3376294109},{"slug":"ollama","similarity":0.5405621195},{"slug":"kotlin","similarity":1},{"slug":"c-sharp","similarity":0.424233009},{"slug":"angularjs","similarity":0.6099768144},{"slug":"treesitter","similarity":0.4936156306},{"slug":"vim","similarity":0.5556235849},{"slug":"ionic-framework","similarity":0.4133521131},{"slug":"physics","similarity":0.4077972179},{"slug":"html-canvas","similarity":0.3647129645},{"slug":"reverse-engineering","similarity":0.2764664187},{"slug":"space","similarity":0.3317733389},{"slug":"css","similarity":0.3850064241},{"slug":"code-review","similarity":0.5112302679},{"slug":"software-development","similarity":0.5767177693},{"slug":"database","similarity":0.5901928786},{"slug":"reactive-extensions","similarity":0.38780782},{"slug":"redis","similarity":0.4025537327},{"slug":"mail","similarity":0.2790017863},{"slug":"experience-review","similarity":0.3873648888},{"slug":"google-analytics","similarity":0.2730077562},{"slug":"data-structure","similarity":0.4420911268},{"slug":"vimwiki","similarity":0.466150202},{"slug":"embeddings","similarity":0.4375196182},{"slug":"추론 애플리케이션","similarity":0.3850654252}]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#kotlin-programming-language\">Kotlin Programming Language</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">시작하기</a></p>\n</li>\n<li>\n<p><a href=\"#features\">Features</a></p>\n<ul>\n<li><a href=\"#scope-functions\">Scope Functions</a></li>\n<li><a href=\"#%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC\">예외 처리</a></li>\n<li><a href=\"#destructuring-declarations\">Destructuring declarations</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#testing\">Testing</a></p>\n<ul>\n<li>\n<p><a href=\"#better-specs\">Better Specs</a></p>\n</li>\n<li>\n<p><a href=\"#kotest\">Kotest</a></p>\n<ul>\n<li><a href=\"#intellij--kotest-integration\">IntelliJ + Kotest Integration</a></li>\n<li><a href=\"#rollback-test-test-method-callbacks\">Rollback Test (test method callbacks)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#language-server\">Language Server</a></p>\n<ul>\n<li><a href=\"#kls_databasedb-%ED%8C%8C%EC%9D%BC\">kls_database.db 파일</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ranges\">ranges</a></p>\n<ul>\n<li><a href=\"#hierarchy\">Hierarchy</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#kotlin-dsl\">Kotlin DSL</a></p>\n</li>\n<li>\n<p><a href=\"#exposed\">Exposed</a></p>\n</li>\n<li>\n<p><a href=\"#annotation-processing\">Annotation Processing</a></p>\n</li>\n</ul>\n</li>\n</ul>","html":"<h1 id=\"kotlin-programming-language\" style=\"position:relative;\"><a href=\"#kotlin-programming-language\" aria-label=\"kotlin programming language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kotlin Programming Language</h1>\n<p>오픈 소스, 정적 타입 언어로 JVM, 안드로이드, JavaScript, WASM, Native를 대상으로 한다.<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup></p>\n<h2 id=\"시작하기\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\"시작하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시작하기</h2>\n<p><a href=\"../jetbrains#intellij\">IntelliJ IDEA</a>를 사용하는 것이 좋지만.</p>\n<p>직접 컴파일하고 실행해 보려면 kotlin compiler를 설치해야 한다.\nOSX는 <code class=\"language-text\">brew install kotlin</code>으로 설치하면 간단.\n<code class=\"language-text\">kotlinc</code>와 <code class=\"language-text\">kotlin</code> 그리고 <code class=\"language-text\">kotlinc-jvm</code> 등 플랫폼 별 명령어가 제공된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello, World!\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">hello.kt</code> 파일로 저장했다면.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kotlinc hello.kt -include-runtime <span class=\"token parameter variable\">-d</span> hello.jar</code></pre></div>\n<p><code class=\"language-text\">kotlinc</code>로 jar 파일을 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">java</span> <span class=\"token parameter variable\">-jar</span> hello.jar\nHello, World<span class=\"token operator\">!</span></code></pre></div>\n<p><code class=\"language-text\">java</code>로 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kotlinc hello.kt\n$ kotlin HelloKt.class\nHello, World<span class=\"token operator\">!</span></code></pre></div>\n<p>인자를 생략하면 <code class=\"language-text\">HelloKt.class</code> 파일이 생성되고, <code class=\"language-text\">kotlin</code>으로 실행할 수도 있다.</p>\n<h2 id=\"features\" style=\"position:relative;\"><a href=\"#features\" aria-label=\"features permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Features</h2>\n<h3 id=\"scope-functions\" style=\"position:relative;\"><a href=\"#scope-functions\" aria-label=\"scope functions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scope Functions</h3>\n<p><a href=\"https://kotlinlang.org/docs/scope-functions.html\">https://kotlinlang.org/docs/scope-functions.html</a></p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">// run</span>\n<span class=\"token keyword\">val</span> totalPrice <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span><span class=\"token function\">run</span> <span class=\"token punctuation\">{</span> price <span class=\"token operator\">*</span> amount <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// apply</span>\nitem<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">decreaseQuantity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">updatePrice</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>scope functions는 lambda 함수 내에서 context object를 액세스하는 함수이다.</p>\n<p><code class=\"language-text\">let</code>, <code class=\"language-text\">run</code>, <code class=\"language-text\">with</code>, <code class=\"language-text\">apply</code>, <code class=\"language-text\">also</code>가 있는데,\ncontext object를 <code class=\"language-text\">it</code> 또는 <code class=\"language-text\">this</code> 중 어느 것으로 접근할 것인지\n그리고 반환 값은 Lambda Result 또는 Context Object 중 어느 것인지 따라서 선택한다.</p>\n<p>예를들어 context object로 추가 로직을 처리하고, 특별히 반환할 것이 없으면 <code class=\"language-text\">also</code>.\ncontext object의 상태로 계산하여 반환하고 싶으면 <code class=\"language-text\">let</code>이 적합하다.</p>\n<p>어느 scope function을 사용할 지는 <a href=\"https://kotlinlang.org/docs/scope-functions.html#function-selection\">공식 문서</a>에서 설명하고 있으니 참고하자.</p>\n<p>처음 kotlin을 접하는 개발자와 함께 일하면 scope function으로 리뷰가 많이 오간다.\n어떤 scope function을 사용하던 구현이 가능할 수 있는 경우가 많다보니 갑론을박이 이어진다.\n너무 목매지 않는 편이 현명한데, 세심한 개발자라면 올바른 scope function을 사용하는 것이 리뷰하는 입장에서 도움이 된다.</p>\n<p>예를들어 <code class=\"language-text\">let</code> 대신 <code class=\"language-text\">also</code>를 사용했다면, lambda에서 계산이 이루어지지 않는다는 것을 직관적으로 알 수 있다.</p>\n<hr>\n<p>다른 언어로 개발할 때면 scope function이 매우 그리워진다.\n특히 javascript 같이 null check가 잦으면 더욱 그렇다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>foo<span class=\"token operator\">?.</span>bar<span class=\"token operator\">?.</span>baz <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  foo<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>baz<span class=\"token punctuation\">.</span><span class=\"token function\">something1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  foo<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>baz<span class=\"token punctuation\">.</span><span class=\"token function\">something2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드처럼 이미 체크된 변수를 다시 사용해야 할 때 scope function가 빛을 발한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">foo<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>bar<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>baz<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">something1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">something2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>변수이름이 길어질수록 줄바꿈도 생기고 코드도 길어져서 읽기 어려워지는데, scope function은 획기적으로 줄여준다.</p>\n<h3 id=\"예외-처리\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC\" aria-label=\"예외 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예외 처리</h3>\n<p>Java와 달리 Kotlin은 checked exception을 지원하지 않는다.\nchecked exception은 예외 처리를 강제하는 기능이다.</p>\n<p><a href=\"https://kotlinlang.org/docs/exceptions.html#checked-exceptions\">https://kotlinlang.org/docs/exceptions.html#checked-exceptions</a></p>\n<p>코틀린의 공식 문서에 Checked Exception에 대한 언급이 있다:</p>\n<blockquote>\n<p>Bruce Eckel says this about checked exceptions:</p>\n<blockquote>\n<p>Examination of small programs leads to the conclusion that requiring exception specifications could both enhance developer productivity and enhance code quality, but experience with large software projects suggests a different result – decreased productivity and little or no increase in code quality.</p>\n</blockquote>\n</blockquote>\n<p>작은 프로그램에서는 코드 품질과 생산성을 높일 수 있었지만, 대규모 프로젝트에서는 생산성이 감소하고 코드 품질 또한 적거나 증가하지 않았다고.</p>\n<h3 id=\"destructuring-declarations\" style=\"position:relative;\"><a href=\"#destructuring-declarations\" aria-label=\"destructuring declarations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Destructuring declarations</h3>\n<p>객체를 여러개의 변수로 분리하는 기능이다</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> person</code></pre></div>\n<p><a href=\"https://kotlinlang.org/docs/destructuring-declarations.html\">https://kotlinlang.org/docs/destructuring-declarations.html</a></p>\n<p>모든 객체가 가능한 것은 아니고, <code class=\"language-text\">componentN</code> 함수를 제공하는 객체만 가능하다.(<code class=\"language-text\">component1</code>, <code class=\"language-text\">component2</code> 등)\ndata class는 기본적으로 <code class=\"language-text\">componentN</code> 함수를 제공한다. data class의 생성자 순서에 따라 <code class=\"language-text\">componentN</code> 함수가 생성된다.</p>\n<p>refactor project는 <a href=\"https://github.com/reactor/reactor-kotlin-extension\">reactor-kotlin-extensions</a>를 사용하면 <code class=\"language-text\">Tuples</code>의 <code class=\"language-text\">componentN</code> 함수를 사용할 수 있다.\n<code class=\"language-text\">Tuples</code>는 <code class=\"language-text\">zipWhen</code> 등에서 주로 사용하고, <code class=\"language-text\">it.t1</code> <code class=\"language-text\">it.t2</code> 등으로 접근하게 되는데 가독성이 떨어지는데 destructuring declarations를 사용하면 가독성이 개선된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">Mono<span class=\"token punctuation\">.</span><span class=\"token function\">just</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello, \"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">zipWhen</span> <span class=\"token punctuation\">{</span> Mono<span class=\"token punctuation\">.</span><span class=\"token function\">just</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"World!\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span> <span class=\"token punctuation\">{</span> it<span class=\"token punctuation\">.</span>t1 <span class=\"token operator\">+</span> it<span class=\"token punctuation\">.</span>t2 <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">block</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> reactor<span class=\"token punctuation\">.</span>kotlin<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>function<span class=\"token punctuation\">.</span>component1\n<span class=\"token keyword\">import</span> reactor<span class=\"token punctuation\">.</span>kotlin<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>function<span class=\"token punctuation\">.</span>component2\n\nMono<span class=\"token punctuation\">.</span><span class=\"token function\">just</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello, \"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">zipWhen</span> <span class=\"token punctuation\">{</span> Mono<span class=\"token punctuation\">.</span><span class=\"token function\">just</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"World!\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">(</span>hello<span class=\"token punctuation\">,</span> world<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> hello <span class=\"token operator\">+</span> world <span class=\"token punctuation\">}</span>  <span class=\"token comment\">// it.t1, it.t2 대신 destructuring declarations 사용</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">block</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>다만 확장 함수로 <code class=\"language-text\">componentN</code> 함수를 제공하고 있어서, <code class=\"language-text\">import reactor.kotlin.core.util.function.component1</code> import 구문을 직접 추가해야 한다.\nIntelliJ 2024 버전 기준으로는 아직 자동 import 기능이 없다.</p>\n<h2 id=\"testing\" style=\"position:relative;\"><a href=\"#testing\" aria-label=\"testing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing</h2>\n<p>test framework: <a href=\"https://github.com/kotest/kotest\">Kotest</a>\nmocking: <a href=\"https://github.com/mockk/mockk\">MockK</a></p>\n<p>junit + mockito 대신 Kotest + MockK를 사용하자.\nkotlin의 타입 관련 문제가 없고, kotlin DSL와 infix 함수로 테스트 코드의 가독성이 좋다.</p>\n<p>e.g. assertion</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">name shouldBe <span class=\"token string-literal singleline\"><span class=\"token string\">\"john doe\"</span></span>\n<span class=\"token number\">3</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span> shouldBe <span class=\"token number\">8</span></code></pre></div>\n<p>e.g. mocking</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">every <span class=\"token punctuation\">{</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span> returns 'bar'\njustRun <span class=\"token punctuation\">{</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>  <span class=\"token comment\">// Unit 반환하는 경우</span></code></pre></div>\n<h3 id=\"better-specs\" style=\"position:relative;\"><a href=\"#better-specs\" aria-label=\"better specs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Better Specs</h3>\n<p><a href=\"https://www.betterspecs.org/\">https://www.betterspecs.org/</a></p>\n<p>정확한 역사는 잘 모르지만, Ruby 쪽 테스트 도구인 RSpec으로 작성된 테스트 코드 Best Practice 모음이다.\nKotest의 <code class=\"language-text\">DescribeSpec</code> 스타일을 사용하면 RSpec와 유사하게 작성할 수 있다.\n테스트 코드 구조도 참고하면 도움이 많이 된다. 큰 구조는 <code class=\"language-text\">describe</code> <code class=\"language-text\">context</code> <code class=\"language-text\">it</code> 3개의 범위로 이루어진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> BuyerSendingAddressServiceTest <span class=\"token operator\">:</span> <span class=\"token function\">DescribeSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"add 함수는\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    beforeEach <span class=\"token punctuation\">{</span> <span class=\"token comment\">/** 각 컨테이너 이전에 실행 할 코드. */</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">/** 여기는 context 이전에 실행된다. */</span>\n\n    <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"3과 5를 입력하면\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"8을 반환한다.\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> shouldBe <span class=\"token number\">8</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>추가 내용은 <a href=\"../testing#better-specs\">테스팅 문서</a>에 기술했다.</p>\n<h3 id=\"kotest\" style=\"position:relative;\"><a href=\"#kotest\" aria-label=\"kotest permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kotest</h3>\n<p><a href=\"https://kotest.io/docs/framework/testing-styles.html\">https://kotest.io/docs/framework/testing-styles.html</a></p>\n<p>Kotest는 테스트 레이아웃을 다양한 스타일로 표현할 수 있다.\n내가 자주 사용하는 스타일은 <code class=\"language-text\">DescribeSpec</code>.</p>\n<p>Kotest의 Style은 모두 Kotlin DSL로 구성되어 있어 직관적인 구조를 가진다.</p>\n<p>IntelliJ 사용한다면 <a href=\"https://plugins.jetbrains.com/plugin/14080-kotest\">플러그인</a>은 반드시 설치하자.\nJUnit처럼 테스트 파일에서 테스트를 실행하거나, 테스트 레이아웃을 위한 별도 창을 제공한다.</p>\n<h4 id=\"intellij--kotest-integration\" style=\"position:relative;\"><a href=\"#intellij--kotest-integration\" aria-label=\"intellij  kotest integration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IntelliJ + Kotest Integration</h4>\n<p>플러그인은 모듈로부터 테스트 파일을 만들 수 있는 기능도 제공한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 554px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cat-logic/static/1068247f2165b53f4722aa3029827409/04abd/kotest-test-creation1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVUlEQVR42k2QwW7TQBRF8z+F2DOesT22Y4/t2HUSx6GJVFCltqsCQghRUKEbvoI9KCDxm4ex00UXR1fv3aenqzsryoo4tzR1SNf4dH1CtzXYpSFMDDoK8X3hkHhOPc93COajjvOTNxIEAbNqWWM3DXlqaDLF8Kql37d0Q8PwZuDwekfblJy3JeuuZte3bN390Df066XbVay60t1Y4jhitrAVi9INSUaoAhI1xwRztHfG/voHNw//uPl65Pr+yNXnPxw+jvyd9OLDkd37XwzvfrO6/YlUqXtYVJgkJ4oNUeCTRZosqSizmm59x+bwnXb/he7ygfbyEbP9RlS/JTr/RLy552VxN/Eiu8UX+pTQZAVKa6QURDqkSCy5sRilSV1qE4xIUi2xcUiuA7JQsLIeC+NR25QkHrv0nhJOD0OUUlOxQogJKSUyUCekQowI58vnnPyTJ/gP2gjUaGh46o4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kotest creation 1\"\n        title=\"\"\n        src=\"/cat-logic/static/1068247f2165b53f4722aa3029827409/04abd/kotest-test-creation1.png\"\n        srcset=\"/cat-logic/static/1068247f2165b53f4722aa3029827409/12f09/kotest-test-creation1.png 148w,\n/cat-logic/static/1068247f2165b53f4722aa3029827409/e4a3f/kotest-test-creation1.png 295w,\n/cat-logic/static/1068247f2165b53f4722aa3029827409/04abd/kotest-test-creation1.png 554w\"\n        sizes=\"(max-width: 554px) 100vw, 554px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>테스트를 만들 대상에 커서를 두고 <code class=\"language-text\">shift + cmd + t</code> 또는 컨텍스트 메뉴를 열고 <code class=\"language-text\">Create test</code>를 선택한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/3d4b6/kotest-test-creation2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACe0lEQVR42pWUu2/bMBDGhRox0CXI0tmLh9hOajeJExRNZMsPvShSL+rlV9qmW5f+ydHSrTHQtSGvRzmO8+hSAT+QOpIfv7uDpCWaVjs/b+53u90DRaPR2NFtHGzjr9ae0Gw29zVNe6OpZ3Lx6TJzrXJABuXVlX47GAxKxXAwLK8u9ZIQWuZFUVLGSl1Xa8NnYOzWMIyfH/r9j5Xg2dlFHkQxhGkq/YjLqUNgahOYEBfcPIAwTsD26Aayw9ohaBjB8XGPV4Ldk5O5F0QQJZnwglBMbFdOLFeaxJNRUcgoLaTPM0nDGC/DuEMqLNerwPk98UNoHR2lj4K4GeI0l7bH5Mi0YWw5YFMf8tVXyJZfIFdU889QXOO4uAaGzmnEwQu5CJMMWq1O9ijo4yLPZzKIE4lOwXRcMGkIabrEw98gu/kONL8GL1siK/AwTpLFBj4TAU+fC6qUA55IU6XgeoBpgxoj3JjPFpAhql7KuVp7ythyhYPZtDrvd4KqBgwbQoNIUmyQusBEgTgrKrFisQKOc8KCV6L4/lzwqIsOUXC+WkkUkMq+qokqA0NxP+bAQg6qk6rWLoo+xaGBUAZanYeU273ezMMbkjC8t5l/n+RzwfNCoCOhOp/kMxHyRBhTS2DDhHJkTG0xxPexibHJ5I/lutjl7qbLJ/3+nOHNhPlVl5Ur5WTrSFGVAGu6hfhR5dxiMZjxUpBkCZ2tw+Nez7cc8ksfTda6Mbq7HI7W/0IfjSuujNHa8dg6TpK1QfhaT3/cDaOb34eHTU97eN7VarVRvV5nCH2L1F/wMob7KZ6jdRxrmsYQQ+lsBdVHvYfU/4d2u72Zq/H0dG/7c/gLc2SEcJVw++oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kotest creation 2\"\n        title=\"\"\n        src=\"/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/fcda8/kotest-test-creation2.png\"\n        srcset=\"/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/12f09/kotest-test-creation2.png 148w,\n/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/e4a3f/kotest-test-creation2.png 295w,\n/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/fcda8/kotest-test-creation2.png 590w,\n/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/3d4b6/kotest-test-creation2.png 712w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><em>Testing Library</em>에서 Kotest를 선택하고, <em>Superclass</em>에서 원하는 스타일을 설정하고 확인을 누르면 다음 코드를 자동으로 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>spec<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>DescribeSpec\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>matchers<span class=\"token punctuation\">.</span>shouldBe\n\n<span class=\"token keyword\">class</span> WebClientConfigTest <span class=\"token operator\">:</span> <span class=\"token function\">DescribeSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>테스트를 자주 만드는데 매우 편리한 기능이다.</p>\n<h4 id=\"rollback-test-test-method-callbacks\" style=\"position:relative;\"><a href=\"#rollback-test-test-method-callbacks\" aria-label=\"rollback test test method callbacks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rollback Test (test method callbacks)</h4>\n<p><a href=\"https://kotest.io/docs/extensions/spring.html#test-method-callbacks\">https://kotest.io/docs/extensions/spring.html#test-method-callbacks</a></p>\n<p>Kotest는 <code class=\"language-text\">@Transactional</code>을 테스트 클래스에 붙여도 트랜잭션을 시작하지 않는다.\nbefore test method와 같은 콜백을 발생시키지 않기 때문이다.\n그래서 <code class=\"language-text\">@DataJpaTest</code>는 <code class=\"language-text\">@Transactional</code>이 붙어있지만 이 설정 없이는 롤백하지 않는다.</p>\n<p>Kotest는 콜백을 발생시키지 위한 설정을 <code class=\"language-text\">extensions</code>으로 제공한다:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> KotestProjectConfig <span class=\"token operator\">:</span> <span class=\"token function\">AbstractProjectConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">extensions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>Extension<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span>SpringExtension<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">DescribeSpec</code> 기준 Test Case인 <code class=\"language-text\">it</code> 전후로 콜백이 발생한다.\n<code class=\"language-text\">mode</code>를 <code class=\"language-text\">Root</code>로 설정하면 기준을 변경할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">extensions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>Extension<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span><span class=\"token function\">SpringTestExtension</span><span class=\"token punctuation\">(</span>SpringTestLifecycleMode<span class=\"token punctuation\">.</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">Root</code> 모드는 최상위의 노드를 기준으로 콜백을 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Transactional</span>\n<span class=\"token keyword\">class</span> MyTest <span class=\"token operator\">:</span> <span class=\"token function\">DescribeSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"test1\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"test2\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"test3\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 코드에서 <code class=\"language-text\">test1</code> <code class=\"language-text\">test2</code> <code class=\"language-text\">test3</code>에 대해서만 트랜잭션을 시작한다.</p>\n<p>아쉬운 점은 2가지 모드로는 중첩된 구조를 지원하지 않는다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"foo method\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"when something\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"result should be 1\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"result should be 2\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"when something else\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"result should be 3\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"result should be 4\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드에서 <code class=\"language-text\">Root</code> 모드라면 <code class=\"language-text\">describe</code> 트랜잭션 하나만,<br>\n<code class=\"language-text\">Test</code> 모드라면 <code class=\"language-text\">it</code> 4개에 대해서만 트랜잭션을 시작한다.</p>\n<p>원하는 것은 <code class=\"language-text\">context</code> 기준으로 트랜잭션을 시작하는 것이다.</p>\n<p><a href=\"https://github.com/kotest/kotest/issues/2629\">https://github.com/kotest/kotest/issues/2629</a> <br>\n관련 문제로 Kotest 이슈에 문의한 내역이 있다. <code class=\"language-text\">BehaviorSpec</code>의 <code class=\"language-text\">Then</code>에서는 검증만 하는데, 격리가 된다는 내용.\n답변은 이미 디자인되어 있는 상황이라 변경하기 어렵다고 한다.</p>\n<p><code class=\"language-text\">SpringTestExtension</code>을 잘 구현하면 가능할지도.</p>\n<h2 id=\"language-server\" style=\"position:relative;\"><a href=\"#language-server\" aria-label=\"language server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"../language-server-protocol\">Language Server</a></h2>\n<p><a href=\"https://github.com/fwcd/kotlin-language-server\">https://github.com/fwcd/kotlin-language-server</a></p>\n<p>2022-11-29 아직 퍼포먼스가 안나온다. 자주 끊기고, 느리다. <br>\nref. <a href=\"https://www.reddit.com/r/neovim/comments/yf0v86/kotlin_language_server_very_slow/\">https://www.reddit.com/r/neovim/comments/yf0v86/kotlin_language_server_very_slow/</a></p>\n<h3 id=\"kls_databasedb-파일\" style=\"position:relative;\"><a href=\"#kls_databasedb-%ED%8C%8C%EC%9D%BC\" aria-label=\"kls_databasedb 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kls_database.db 파일</h3>\n<p>kotlin-language-server를 사용하면 프로젝트 루트에 <code class=\"language-text\">kls_database.db</code> 파일이 생성된다.</p>\n<p>저장소에 <a href=\"https://github.com/fwcd/kotlin-language-server/blob/8c40b4fb846086e5cbdea6bc1c11aeba19c7bf52/shared/src/main/kotlin/org/javacs/kt/database/DatabaseService.kt#L30\">상수로 정의</a>되어 있다.\n이 정보 말고는 어떤 용도로 사용하는지 저장소에서 설명하지 않기 때문에 자세한 내용은 제대로 알 수 없다.\n<code class=\"language-text\">.gitignore</code>에 추가해도 무방해 보인다.</p>\n<h2 id=\"ranges\" style=\"position:relative;\"><a href=\"#ranges\" aria-label=\"ranges permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ranges</h2>\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/</a></p>\n<p><code class=\"language-text\">IntRange</code>를 사용하면 다음과 같은 일을 할 수 있다.</p>\n<p>범위 비교:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token number\">30</span> <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>순회:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token function\">rangeTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 1, 2, 3, 4, 5...100</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Step 순회:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token function\">rangeTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> step <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 1, 6, 11...96</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>항상 end 값은 포함(inclusive)한다.</p>\n<p>Char, Int, Long 등 비교할 수 있는 타입이라면 내장된 <code class=\"language-text\">Range</code> 클래스를 제공한다.</p>\n<h3 id=\"hierarchy\" style=\"position:relative;\"><a href=\"#hierarchy\" aria-label=\"hierarchy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hierarchy</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">IntRange --|> IntProgression    --|> Iterable&lt;Int>\n         --|> ClosedRange&lt;Int>  --|> Comparable&lt;Int></code></pre></div>\n<p>Iterable을 구현함으로써 순회할 수 있고, Comparable을 구현함으로써 범위를 비교할 수 있다.</p>\n<p>응용하면 <code class=\"language-text\">LocalDate</code> 같은 것도 만들 수 있다:\n<a href=\"https://www.netguru.com/blog/traversing-through-dates-with-kotlin-range-expressions\">https://www.netguru.com/blog/traversing-through-dates-with-kotlin-range-expressions</a></p>\n<p>보통 순회, 비교 모두 당장 필요하지는 않을텐데,<br>\n예를들면, 날짜 범위를 나타내는 클래스를 구현하고 싶다면 <code class=\"language-text\">ClosedRange&lt;LocalDate></code>만 구현해도 충분하다.\n<code class=\"language-text\">Pair&lt;LocalDate, LocalDate></code> 보다는 좀 더 명확할 것이다.</p>\n<h2 id=\"kotlin-dsl\" style=\"position:relative;\"><a href=\"#kotlin-dsl\" aria-label=\"kotlin dsl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kotlin DSL</h2>\n<p><a href=\"https://kotlinlang.org/docs/type-safe-builders.html\">https://kotlinlang.org/docs/type-safe-builders.html</a></p>\n<blockquote>\n<p>Type-safe builders allow creating Kotlin-based domain-specific languages (DSLs) suitable for building complex hierarchical data structures in a semi-declarative way.</p>\n</blockquote>\n<p>Type-safe 빌더는 비 선언적인 방법으로, 복잡한 계층의 데이터 구조를 만드는데 적합한 Kotlin DSL을 만들 수 있습니다.</p>\n<p>대표적인 예시인 <a href=\"https://ktor.io/docs/routing-in-ktor.html#define_route\">Kotr</a>의 route handler:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>ktor<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>routing<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>ktor<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>ktor<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n\nrouting <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">route</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"/hello\"</span></span><span class=\"token punctuation\">,</span> HttpMethod<span class=\"token punctuation\">.</span>Get<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        handle <span class=\"token punctuation\">{</span>\n            call<span class=\"token punctuation\">.</span><span class=\"token function\">respondText</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>builder 유형의 모듈을 만드는데 유용한 방법이다.</p>\n<p>위 코드에서 <code class=\"language-text\">routing</code> <code class=\"language-text\">route</code> <code class=\"language-text\">handle</code>는 각각 lambda 표현식을 받는 함수이다.\nlambda 함수의 <a href=\"https://kotlinlang.org/docs/this-expressions.html\">this</a>를 정의함으로써 DSL을 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">html <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이런 표현을 가능케 하려면 다음과 같이 <code class=\"language-text\">html</code> 함수를 만든다:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">html</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> HTML<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> HTML <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> html <span class=\"token operator\">=</span> <span class=\"token function\">HTML</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    html<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> html\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">html {}</code>의 lambda 표현식의 this는 이제 <code class=\"language-text\">HTML</code> 객체가 된다.\n<code class=\"language-text\">HTML</code> 클래스에 다시 lambda expression을 받도록 함수를 제공하면 중첩된 표현이 가능해진다:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> HTML <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">head</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> Head<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Head <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">val</span> head <span class=\"token operator\">=</span> <span class=\"token function\">Head</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        head<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>head<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> head\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> Body<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Body <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">val</span> body <span class=\"token operator\">=</span> <span class=\"token function\">Body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        body<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> body\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">html <span class=\"token punctuation\">{</span>\n    head <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n    body <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"exposed\" style=\"position:relative;\"><a href=\"#exposed\" aria-label=\"exposed permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exposed</h2>\n<p><a href=\"https://github.com/JetBrains/Exposed\">https://github.com/JetBrains/Exposed</a></p>\n<p>Jetbrains에서 만든 ORM 라이브러리.</p>\n<p>2023-07-18 <a href=\"https://tech.kakao.com/2023/07/04/kakao-tech-meet-2/\">Kakao tech meet 2회</a>의 세션 2, <em>Spring Batch 애플리케이션 성능 향상을 위한 주요 팁</em>에서 처음 알게 되었다.</p>\n<p>DSL로 쿼리를 작성할 수 있고, <a href=\"https://github.com/JetBrains/Exposed/wiki/DSL#union\">Union 쿼리</a>도 지원한다.</p>\n<p>Exposed issue에 <a href=\"https://github.com/JetBrains/Exposed/issues/1504\">Spring with exposed or jpa?</a>글이 있다.\nExposed를 사용했는데 JPA 대신 사용한 근거를 찾고싶다는 내용이다.</p>\n<p>JPA와 QueryDSL을 많이 사용했다는 누군가 Kotlin + JPA를 사용하면서 불편한 4가지를 나열했다:</p>\n<ol>\n<li>plugin 없이 동작하지 않음</li>\n<li>Entity를 data class로 사용할 수 없음</li>\n<li>Entity를 불변으로 사용할 수 없음. <code class=\"language-text\">val</code> 대신 <code class=\"language-text\">var</code>를 사용해야 함</li>\n<li>도메인 지향인 clean architecture로 개발하면 JPA의 강력한 기능을 사용할 수 없음. <code class=\"language-text\">spring-data-jpa</code>나 다른 ORM을 사용하면 더 쉽게 사용 가능</li>\n</ol>\n<p>추가로 clean architecture로 개발하면 JPA의 영속 계층의 cache나 dirty-checking을 사용하기 어려웠다고 한다.</p>\n<p>그래서 <code class=\"language-text\">spring-data-jpa</code> + <code class=\"language-text\">jooq</code>를 사용하다가, Exposed를 사용중이라고.</p>\n<h2 id=\"annotation-processing\" style=\"position:relative;\"><a href=\"#annotation-processing\" aria-label=\"annotation processing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Annotation Processing</h2>\n<p>QueryDSL의 QClass와 같이 annotation processing로 생성되는 모듈은 gradle 명령어로 생성할 수 있다: <code class=\"language-text\">gradle kaptKotlin</code>.</p>\n<p>간편하게 프로젝트 빌드를 할 수도 있겠지만 불필요한 task가 포함되어 있고, 완성되지 않는 코드에 대해서 빌드하여 결국 실패할 것이므로,\n소요시간도 짧은 <code class=\"language-text\">gradle kaptKotlin</code>을 사용하는 것이 좋다.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\"><a href=\"https://kotlinlang.org/docs/faq.html\">https://kotlinlang.org/docs/faq.html</a><a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>"}},"allMarkdownRemark":{"nodes":[{"headings":[{"value":"Airflow"}],"fields":{"slug":"/airflow/"}},{"headings":[{"value":"2016-08-27 GDG WebTech Workshop \"측정하는 놈, 로딩하는 놈, 그리는 놈\""}],"fields":{"slug":"/2016-08-27-gdg-webtech-workshop-nnn/"}},{"headings":[{"value":"2016-11-16 캠퍼스 스타트업 스쿨의 \"구글 플레이에서 꼭 지켜야 할 두 가지\""}],"fields":{"slug":"/2016-11-16-google-campus-two-things-you-must-keep-in-google-play/"}},{"headings":[{"value":"알고리즘"}],"fields":{"slug":"/algorithm/"}},{"headings":[{"value":"Amazon Redshift"}],"fields":{"slug":"/amazon-redshift/"}},{"headings":[{"value":"Architecture"}],"fields":{"slug":"/architecture/"}},{"headings":[{"value":"Angular JS"}],"fields":{"slug":"/angularjs/"}},{"headings":[{"value":"Amazon Web Service"}],"fields":{"slug":"/aws/"}},{"headings":[{"value":"책"}],"fields":{"slug":"/book/"}},{"headings":[{"value":"C# Programming Language"}],"fields":{"slug":"/c-sharp/"}},{"headings":[{"value":"The Cat Logic"}],"fields":{"slug":"/cat-logic/"}},{"headings":[{"value":"크롬 브라우저"}],"fields":{"slug":"/chrome-browser/"}},{"headings":[{"value":"Computer Graphics"}],"fields":{"slug":"/computer-graphics/"}},{"headings":[{"value":"회사"}],"fields":{"slug":"/company/"}},{"headings":[{"value":"Clean Code"}],"fields":{"slug":"/clean-code/"}},{"headings":[{"value":"CI/CD"}],"fields":{"slug":"/continuous-integration-and-deployment/"}},{"headings":[{"value":"crontab"}],"fields":{"slug":"/crontab/"}},{"headings":[{"value":"CSS"}],"fields":{"slug":"/css/"}},{"headings":[{"value":"CURL"}],"fields":{"slug":"/curl/"}},{"headings":[{"value":"자료구조"}],"fields":{"slug":"/data-structure/"}},{"headings":[{"value":"Data analysis"}],"fields":{"slug":"/data-analysis/"}},{"headings":[{"value":"Database"}],"fields":{"slug":"/database/"}},{"headings":[{"value":"Design Pattern"}],"fields":{"slug":"/design-pattern/"}},{"headings":[{"value":"DevOps"}],"fields":{"slug":"/devops/"}},{"headings":[{"value":"Docker"}],"fields":{"slug":"/docker/"}},{"headings":[{"value":"Elasticsearch"}],"fields":{"slug":"/elasticsearch/"}},{"headings":[{"value":"임베딩"}],"fields":{"slug":"/embeddings/"}},{"headings":[{"value":"Game"}],"fields":{"slug":"/game/"}},{"headings":[{"value":"세미나 및 컨퍼런스 후기"}],"fields":{"slug":"/experience-review/"}},{"headings":[{"value":"Git"}],"fields":{"slug":"/git/"}},{"headings":[{"value":"GatsbyJS"}],"fields":{"slug":"/gatsbyjs/"}},{"headings":[{"value":"Godot Engine"}],"fields":{"slug":"/godot/"}},{"headings":[{"value":"GitHub"}],"fields":{"slug":"/github/"}},{"headings":[{"value":"Google Analytics"}],"fields":{"slug":"/google-analytics/"}},{"headings":[{"value":"Gradle"}],"fields":{"slug":"/gradle/"}},{"headings":[{"value":"Hardware"}],"fields":{"slug":"/hardware/"}},{"headings":[{"value":"아이디어 방법론"}],"fields":{"slug":"/idea-methodology/"}},{"headings":[{"value":"HTML"}],"fields":{"slug":"/html/"}},{"headings":[{"value":"Canvas"}],"fields":{"slug":"/html-canvas/"}},{"headings":[{"value":"Ionic Framework"}],"fields":{"slug":"/ionic-framework/"}},{"headings":[{"value":"개발 용어"}],"fields":{"slug":"/jargon/"}},{"headings":[{"value":"영감을 주는 것"}],"fields":{"slug":"/inspiration/"}},{"headings":[{"value":"Javascript & Typescript Programming Language"}],"fields":{"slug":"/javascript/"}},{"headings":[{"value":"Java Programming Language"}],"fields":{"slug":"/java/"}},{"headings":[{"value":"JetBrains"}],"fields":{"slug":"/jetbrains/"}},{"headings":[{"value":"Jira"}],"fields":{"slug":"/jira/"}},{"headings":[{"value":"Kubernetes"}],"fields":{"slug":"/kubernetes/"}},{"headings":[{"value":"Kotlin Programming Language"}],"fields":{"slug":"/kotlin/"}},{"headings":[{"value":"Large Language Model"}],"fields":{"slug":"/large-language-model/"}},{"headings":[{"value":"Language Server Protocol"}],"fields":{"slug":"/language-server-protocol/"}},{"headings":[{"value":"Linux"}],"fields":{"slug":"/linux/"}},{"headings":[{"value":"Logging"}],"fields":{"slug":"/logging/"}},{"headings":[{"value":"Mac OS"}],"fields":{"slug":"/mac-os/"}},{"headings":[{"value":"Mail"}],"fields":{"slug":"/mail/"}},{"headings":[{"value":"Machine Learning"}],"fields":{"slug":"/machine-learning/"}},{"headings":[{"value":"코드 리뷰"}],"fields":{"slug":"/code-review/"}},{"headings":[{"value":"Markdown"}],"fields":{"slug":"/markdown/"}},{"headings":[{"value":"Network"}],"fields":{"slug":"/network/"}},{"headings":[{"value":"Node JS"}],"fields":{"slug":"/nodejs/"}},{"headings":[{"value":"Ollama"}],"fields":{"slug":"/ollama/"}},{"headings":[{"value":"Object Oriented Programming"}],"fields":{"slug":"/object-oriented-programming/"}},{"headings":[{"value":"개인적인 철학"}],"fields":{"slug":"/philosophy/"}},{"headings":[{"value":"OpenAI"}],"fields":{"slug":"/openai/"}},{"headings":[{"value":"Physics"}],"fields":{"slug":"/physics/"}},{"headings":[{"value":"Podman"}],"fields":{"slug":"/podman/"}},{"headings":[{"value":"PostgreSQL"}],"fields":{"slug":"/postgresql/"}},{"headings":[{"value":"Programming Convention"}],"fields":{"slug":"/programming-convention/"}},{"headings":[{"value":"Programming Paradigm"}],"fields":{"slug":"/programming-paradigm/"}},{"headings":[{"value":"Python Programming Language"}],"fields":{"slug":"/python/"}},{"headings":[{"value":"인용문"}],"fields":{"slug":"/quotation/"}},{"headings":[{"value":"React JS"}],"fields":{"slug":"/reactjs/"}},{"headings":[{"value":"Reactive Extensions (Reactive X, RX)"}],"fields":{"slug":"/reactive-extensions/"}},{"headings":[{"value":"Redis"}],"fields":{"slug":"/redis/"}},{"headings":[{"value":"Reverse Engineering"}],"fields":{"slug":"/reverse-engineering/"}},{"headings":[{"value":"Rust Programming Language"}],"fields":{"slug":"/rust/"}},{"headings":[{"value":"SCP"}],"fields":{"slug":"/scp/"}},{"headings":[{"value":"보안"}],"fields":{"slug":"/security/"}},{"headings":[{"value":"Sentry - APM & Error Tracking"}],"fields":{"slug":"/sentry/"}},{"headings":[{"value":"Shell 명령어"}],"fields":{"slug":"/shell/"}},{"headings":[{"value":"SFML"}],"fields":{"slug":"/sfml/"}},{"headings":[{"value":"소프트웨어 개발"}],"fields":{"slug":"/software-development/"}},{"headings":[{"value":"우주"}],"fields":{"slug":"/space/"}},{"headings":[{"value":"Spring framework"}],"fields":{"slug":"/spring-framework/"}},{"headings":[{"value":"Swagger"}],"fields":{"slug":"/swagger/"}},{"headings":[{"value":"시스템 장애"}],"fields":{"slug":"/system-failures/"}},{"headings":[{"value":"Testing"}],"fields":{"slug":"/testing/"}},{"headings":[{"value":"테스트 주도 개발 (Test Driven Development)"}],"fields":{"slug":"/test-driven-development/"}},{"headings":[{"value":"Tmux"}],"fields":{"slug":"/tmux/"}},{"headings":[{"value":"Treesitter"}],"fields":{"slug":"/treesitter/"}},{"headings":[{"value":"개발/비개발 도구"}],"fields":{"slug":"/tools/"}},{"headings":[{"value":"Unicode"}],"fields":{"slug":"/unicode/"}},{"headings":[{"value":"Unity 3D"}],"fields":{"slug":"/unity3d/"}},{"headings":[{"value":"Valve사의 신규 입사자를 위한 핸드북"}],"fields":{"slug":"/valve/"}},{"headings":[{"value":"VimEnter 2023"}],"fields":{"slug":"/vimenter-2023/"}},{"headings":[{"value":"Vim"}],"fields":{"slug":"/vim/"}},{"headings":[{"value":"Vue JS"}],"fields":{"slug":"/vuejs/"}},{"headings":[{"value":"Windows Subsystem for Linux (WSL)"}],"fields":{"slug":"/windows-subsystem-for-linux/"}},{"headings":[{"value":"VimWiki"}],"fields":{"slug":"/vimwiki/"}},{"headings":[{"value":"WebGL"}],"fields":{"slug":"/webgl/"}},{"headings":[{"value":"웹 개발"}],"fields":{"slug":"/web/"}},{"headings":[{"value":"Windows"}],"fields":{"slug":"/windows/"}},{"headings":[{"value":"추론 애플리케이션"}],"fields":{"slug":"/인공지능/용어/추론 애플리케이션/"}}]},"site":{"siteMetadata":{"gitHubRepositoryUrl":"https://github.com/edunga1/cat-logic"}}},"pageContext":{"id":"4bcd833e-c893-574f-a38e-50b2e268183e"}},"staticQueryHashes":[],"slicesMap":{}}