{"componentChunkName":"component---src-components-gatsby-templates-wiki-tsx","path":"/wiki/kotlin/","result":{"data":{"markdownRemark":{"headings":[{"value":"Kotlin Programming Language"}],"fields":{"slug":"/kotlin/","relatedDocs":[{"slug":"javascript","similarity":0.5297705543},{"slug":"web","similarity":0.5202622915},{"slug":"2016-08-27-gdg-webtech-workshop-nnn","similarity":0.4977401222},{"slug":"crontab","similarity":0.3391657302},{"slug":"gradle","similarity":0.6264790432},{"slug":"idea-methodology","similarity":0.4508299645},{"slug":"2016-11-16-google-campus-two-things-you-must-keep-in-google-play","similarity":0.5339552195},{"slug":"spring-framework","similarity":0.6339735857},{"slug":"aws","similarity":0.4964003834},{"slug":"git","similarity":0.4921977058},{"slug":"algorithm-practice","similarity":0.329314395},{"slug":"docker","similarity":0.4400391255},{"slug":"scp","similarity":0.2490304746},{"slug":"mac-os","similarity":0.4542172868},{"slug":"testing","similarity":0.6354277716},{"slug":"machine-learning","similarity":0.5972863565},{"slug":"devops","similarity":0.4213454153},{"slug":"python","similarity":0.5345789528},{"slug":"object-oriented-programming","similarity":0.6067424979},{"slug":"linux","similarity":0.3687654737},{"slug":"sfml","similarity":0.4672648485},{"slug":"windows","similarity":0.4041869578},{"slug":"markdown","similarity":0.4550212616},{"slug":"cat-logic","similarity":0.5498393597},{"slug":"vuejs","similarity":0.3692902244},{"slug":"shell","similarity":0.5223800545},{"slug":"html","similarity":0.4929678864},{"slug":"vimenter-2023","similarity":0.5291504878},{"slug":"data-analysis","similarity":0.5354357833},{"slug":"hardware","similarity":0.3094416713},{"slug":"programming-convention","similarity":0.4174862104},{"slug":"webgl","similarity":0.414388603},{"slug":"sentry","similarity":0.3792355071},{"slug":"valve","similarity":0.3692475293},{"slug":"security","similarity":0.3666172472},{"slug":"reactjs","similarity":0.5286401066},{"slug":"airflow","similarity":0.3825496636},{"slug":"computer-graphics","similarity":0.2404019143},{"slug":"elasticsearch","similarity":0.5435793327},{"slug":"unicode","similarity":0.3293053067},{"slug":"logging","similarity":0.2983666101},{"slug":"tools","similarity":0.5779107405},{"slug":"programming-paradigm","similarity":0.6320401304},{"slug":"system-failures","similarity":0.3270745334},{"slug":"amazon-redshift","similarity":0.3154614367},{"slug":"inspiration","similarity":0.3781017545},{"slug":"gatsbyjs","similarity":0.5695760891},{"slug":"design-pattern","similarity":0.6484216276},{"slug":"game","similarity":0.4806181711},{"slug":"kubernetes","similarity":0.4122592354},{"slug":"llm-tools","similarity":0.534483994},{"slug":"nodejs","similarity":0.6266140893},{"slug":"continuous-integration-and-deployment","similarity":0.4011296261},{"slug":"rust","similarity":0.5839711176},{"slug":"book","similarity":0.3792873548},{"slug":"jetbrains","similarity":0.6153037595},{"slug":"quotation","similarity":0.3197089197},{"slug":"postgresql","similarity":0.4558974037},{"slug":"jira","similarity":0.3912941399},{"slug":"swagger","similarity":0.5525678378},{"slug":"architecture","similarity":0.5672485341},{"slug":"unity3d","similarity":0.5168498616},{"slug":"jargon","similarity":0.577806095},{"slug":"language-server-protocol","similarity":0.4187910728},{"slug":"clean-code","similarity":0.5261197757},{"slug":"java","similarity":0.7395536229},{"slug":"windows-subsystem-for-linux","similarity":0.449040748},{"slug":"test-driven-development","similarity":0.4450360029},{"slug":"philosophy","similarity":0.5178613194},{"slug":"github","similarity":0.5392645056},{"slug":"network","similarity":0.334743202},{"slug":"kotlin","similarity":1},{"slug":"c-sharp","similarity":0.413008874},{"slug":"angularjs","similarity":0.6003002656},{"slug":"vim","similarity":0.5084703484},{"slug":"ionic-framework","similarity":0.4022851808},{"slug":"physics","similarity":0.4014011142},{"slug":"html-canvas","similarity":0.3596091464},{"slug":"reverse-engineering","similarity":0.2744218011},{"slug":"space","similarity":0.290843901},{"slug":"css","similarity":0.3730469841},{"slug":"code-review","similarity":0.4671479207},{"slug":"software-development","similarity":0.5606836183},{"slug":"database","similarity":0.5807002275},{"slug":"reactive-extensions","similarity":0.3910248734},{"slug":"redis","similarity":0.3689287735},{"slug":"mail","similarity":0.2768756404},{"slug":"experience-review","similarity":0.3541534328},{"slug":"google-analytics","similarity":0.2695267271},{"slug":"data-structure","similarity":0.4373936985},{"slug":"vimwiki","similarity":0.4613191933},{"slug":"embeddings","similarity":0.4278493051},{"slug":"추론 애플리케이션","similarity":0.3772479526}]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#kotlin-programming-language\">Kotlin Programming Language</a></p>\n<ul>\n<li>\n<p><a href=\"#features\">Features</a></p>\n<ul>\n<li><a href=\"#scope-functions\">Scope Functions</a></li>\n<li><a href=\"#%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC\">예외 처리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#testing\">Testing</a></p>\n<ul>\n<li>\n<p><a href=\"#better-specs\">Better Specs</a></p>\n</li>\n<li>\n<p><a href=\"#kotest\">Kotest</a></p>\n<ul>\n<li><a href=\"#intellij--kotest-integration\">IntelliJ + Kotest Integration</a></li>\n<li><a href=\"#rollback-test-test-method-callbacks\">Rollback Test (test method callbacks)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#language-server\">Language Server</a></p>\n</li>\n<li>\n<p><a href=\"#ranges\">ranges</a></p>\n<ul>\n<li><a href=\"#hierarchy\">Hierarchy</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#kotlin-dsl\">Kotlin DSL</a></p>\n</li>\n<li>\n<p><a href=\"#exposed\">Exposed</a></p>\n</li>\n<li>\n<p><a href=\"#annotation-processing\">Annotation Processing</a></p>\n</li>\n</ul>\n</li>\n</ul>","html":"<h1 id=\"kotlin-programming-language\" style=\"position:relative;\"><a href=\"#kotlin-programming-language\" aria-label=\"kotlin programming language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kotlin Programming Language</h1>\n<p>오픈 소스, 정적 타입 언어로 JVM, 안드로이드, JavaScript, WASM, Native를 대상으로 한다.<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup></p>\n<h2 id=\"features\" style=\"position:relative;\"><a href=\"#features\" aria-label=\"features permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Features</h2>\n<h3 id=\"scope-functions\" style=\"position:relative;\"><a href=\"#scope-functions\" aria-label=\"scope functions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scope Functions</h3>\n<p><a href=\"https://kotlinlang.org/docs/scope-functions.html\">https://kotlinlang.org/docs/scope-functions.html</a></p>\n<p>e.g. <code class=\"language-text\">run</code></p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> totalPrice <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span><span class=\"token function\">run</span> <span class=\"token punctuation\">{</span> price <span class=\"token operator\">*</span> amount <span class=\"token punctuation\">}</span></code></pre></div>\n<p>scope functions는 모두 같은 일을 한다.\ncontext object를 어떻게 접근하는 지, 반환 값은 무엇인지에 따라 의미론적으로 맞게 골라서 사용하면 좋다.\n예를들어, context object로 추가 로직을 처리하고, 특별히 반환할 것이 없으면 <code class=\"language-text\">also</code>.\ncontext object의 상태로 계산하여 반환하고 싶으면 <code class=\"language-text\">let</code>을 사용하면 의미가 맞다.</p>\n<p>어떤 함수를 사용할 지 시나리오를 공식 문서에서 설명한다:  <a href=\"https://kotlinlang.org/docs/scope-functions.html#function-selection\">https://kotlinlang.org/docs/scope-functions.html#function-selection</a></p>\n<p>처음 kotlin을 접하는 개발자와 함께 일하면 이 부분에서 유독 많이 이야기하게 된다.\n같은 일을 하는 함수가 많이 있으니 말이다. 언제, 어떤 scope function을 사용할 지 계속 이야기한다.\n너무 목매지 않는 편이 현명하다.</p>\n<hr>\n<p>다른 언어로 개발할 때면 scope function이 매우 그리워진다.\n특히 웹 개발과 같이 null check가 잦으면 더욱 그렇다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>foo<span class=\"token operator\">?.</span>bar<span class=\"token operator\">?.</span>baz <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  foo<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>baz<span class=\"token punctuation\">.</span><span class=\"token function\">something1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  foo<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">.</span>baz<span class=\"token punctuation\">.</span><span class=\"token function\">something2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드처럼 이미 체크된 변수를 다시 사용해야 할 때 scope function가 빛을 발한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">foo<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>bar<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>baz<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">something1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">something2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>변수이름이 길어질수록 줄바꿈도 생기고 코드도 길어져서 읽기 어려워지는데, scope function은 획기적으로 줄여준다.\n계산 결과를 담아야 하는 경우가 생기면 담을 변수를 미리 선언하여 초기화 할 필요가 있으니 더욱 답답해진다.</p>\n<h3 id=\"예외-처리\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC\" aria-label=\"예외 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예외 처리</h3>\n<p>Java와 달리 Kotlin은 checked exception을 지원하지 않는다.\nchecked exception은 예외 처리를 강제하는 기능이다.</p>\n<p><a href=\"https://kotlinlang.org/docs/exceptions.html#checked-exceptions\">https://kotlinlang.org/docs/exceptions.html#checked-exceptions</a></p>\n<p>코틀린의 공식 문서에 Checked Exception에 대한 언급이 있다:</p>\n<blockquote>\n<p>Bruce Eckel says this about checked exceptions:</p>\n<blockquote>\n<p>Examination of small programs leads to the conclusion that requiring exception specifications could both enhance developer productivity and enhance code quality, but experience with large software projects suggests a different result – decreased productivity and little or no increase in code quality.</p>\n</blockquote>\n</blockquote>\n<p>작은 프로그램에서는 코드 품질과 생산성을 높일 수 있었지만, 대규모 프로젝트에서는 생산성이 감소하고 코드 품질 또한 적거나 증가하지 않았다고.</p>\n<h2 id=\"testing\" style=\"position:relative;\"><a href=\"#testing\" aria-label=\"testing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing</h2>\n<p>test framework: <a href=\"https://github.com/kotest/kotest\">Kotest</a>\nmocking: <a href=\"https://github.com/mockk/mockk\">MockK</a></p>\n<p>junit + mockito 대신 Kotest + MockK를 사용하자.\nkotlin의 타입 관련 문제가 없고, kotlin DSL와 infix 함수로 테스트 코드의 가독성이 좋다.</p>\n<p>e.g. assertion</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">name shouldBe <span class=\"token string-literal singleline\"><span class=\"token string\">\"john doe\"</span></span>\n<span class=\"token number\">3</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span> shouldBe <span class=\"token number\">8</span></code></pre></div>\n<p>e.g. mocking</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">every <span class=\"token punctuation\">{</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span> returns 'bar'\njustRun <span class=\"token punctuation\">{</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>  <span class=\"token comment\">// Unit 반환하는 경우</span></code></pre></div>\n<h3 id=\"better-specs\" style=\"position:relative;\"><a href=\"#better-specs\" aria-label=\"better specs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Better Specs</h3>\n<p><a href=\"https://www.betterspecs.org/\">https://www.betterspecs.org/</a></p>\n<p>정확한 역사는 잘 모르지만, Ruby 쪽 테스트 도구인 RSpec으로 작성된 테스트 코드 Best Practice 모음이다.\nKotest의 <code class=\"language-text\">DescribeSpec</code> 스타일을 사용하면 RSpec와 유사하게 작성할 수 있다.\n테스트 코드 구조도 참고하면 도움이 많이 된다. 큰 구조는 <code class=\"language-text\">describe</code> <code class=\"language-text\">context</code> <code class=\"language-text\">it</code> 3개의 범위로 이루어진다.</p>\n<p>e.g. 테스트 코드 예시</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> BuyerSendingAddressServiceTest <span class=\"token operator\">:</span> <span class=\"token function\">DescribeSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"add 함수는\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    beforeEach <span class=\"token punctuation\">{</span> <span class=\"token comment\">/** 각 컨테이너 이전에 실행 할 코드. */</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">/** 여기는 context 이전에 실행된다. */</span>\n\n    <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"3과 5를 입력하면\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"8을 반환한다.\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> shouldBe <span class=\"token number\">8</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"kotest\" style=\"position:relative;\"><a href=\"#kotest\" aria-label=\"kotest permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kotest</h3>\n<p><a href=\"https://kotest.io/docs/framework/testing-styles.html\">https://kotest.io/docs/framework/testing-styles.html</a></p>\n<p>Kotest는 테스트 레이아웃을 다양한 스타일로 표현할 수 있다.\n내가 자주 사용하는 스타일은 <code class=\"language-text\">DescribeSpec</code>.</p>\n<p>Kotest의 Style은 모두 Kotlin DSL로 구성되어 있어 직관적인 구조를 가진다.</p>\n<p>IntelliJ 사용한다면 <a href=\"https://plugins.jetbrains.com/plugin/14080-kotest\">플러그인</a>은 반드시 설치하자.\nJUnit처럼 테스트 파일에서 테스트를 실행하거나, 테스트 레이아웃을 위한 별도 창을 제공한다.</p>\n<h4 id=\"intellij--kotest-integration\" style=\"position:relative;\"><a href=\"#intellij--kotest-integration\" aria-label=\"intellij  kotest integration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IntelliJ + Kotest Integration</h4>\n<p>플러그인은 모듈로부터 테스트 파일을 만들 수 있는 기능도 제공한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 554px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cat-logic/static/1068247f2165b53f4722aa3029827409/04abd/kotest-test-creation1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.43243243243243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVUlEQVR42k2QwW7TQBRF8z+F2DOesT22Y4/t2HUSx6GJVFCltqsCQghRUKEbvoI9KCDxm4ex00UXR1fv3aenqzsryoo4tzR1SNf4dH1CtzXYpSFMDDoK8X3hkHhOPc93COajjvOTNxIEAbNqWWM3DXlqaDLF8Kql37d0Q8PwZuDwekfblJy3JeuuZte3bN390Df066XbVay60t1Y4jhitrAVi9INSUaoAhI1xwRztHfG/voHNw//uPl65Pr+yNXnPxw+jvyd9OLDkd37XwzvfrO6/YlUqXtYVJgkJ4oNUeCTRZosqSizmm59x+bwnXb/he7ygfbyEbP9RlS/JTr/RLy552VxN/Eiu8UX+pTQZAVKa6QURDqkSCy5sRilSV1qE4xIUi2xcUiuA7JQsLIeC+NR25QkHrv0nhJOD0OUUlOxQogJKSUyUCekQowI58vnnPyTJ/gP2gjUaGh46o4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kotest creation 1\"\n        title=\"\"\n        src=\"/cat-logic/static/1068247f2165b53f4722aa3029827409/04abd/kotest-test-creation1.png\"\n        srcset=\"/cat-logic/static/1068247f2165b53f4722aa3029827409/12f09/kotest-test-creation1.png 148w,\n/cat-logic/static/1068247f2165b53f4722aa3029827409/e4a3f/kotest-test-creation1.png 295w,\n/cat-logic/static/1068247f2165b53f4722aa3029827409/04abd/kotest-test-creation1.png 554w\"\n        sizes=\"(max-width: 554px) 100vw, 554px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>테스트를 만들 대상에 커서를 두고 <code class=\"language-text\">shift + cmd + t</code> 또는 컨텍스트 메뉴를 열고 <code class=\"language-text\">Create test</code>를 선택한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/3d4b6/kotest-test-creation2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.24324324324324%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACe0lEQVR42pWUu2/bMBDGhRox0CXI0tmLh9hOajeJExRNZMsPvShSL+rlV9qmW5f+ydHSrTHQtSGvRzmO8+hSAT+QOpIfv7uDpCWaVjs/b+53u90DRaPR2NFtHGzjr9ae0Gw29zVNe6OpZ3Lx6TJzrXJABuXVlX47GAxKxXAwLK8u9ZIQWuZFUVLGSl1Xa8NnYOzWMIyfH/r9j5Xg2dlFHkQxhGkq/YjLqUNgahOYEBfcPIAwTsD26Aayw9ohaBjB8XGPV4Ldk5O5F0QQJZnwglBMbFdOLFeaxJNRUcgoLaTPM0nDGC/DuEMqLNerwPk98UNoHR2lj4K4GeI0l7bH5Mi0YWw5YFMf8tVXyJZfIFdU889QXOO4uAaGzmnEwQu5CJMMWq1O9ijo4yLPZzKIE4lOwXRcMGkIabrEw98gu/kONL8GL1siK/AwTpLFBj4TAU+fC6qUA55IU6XgeoBpgxoj3JjPFpAhql7KuVp7ythyhYPZtDrvd4KqBgwbQoNIUmyQusBEgTgrKrFisQKOc8KCV6L4/lzwqIsOUXC+WkkUkMq+qokqA0NxP+bAQg6qk6rWLoo+xaGBUAZanYeU273ezMMbkjC8t5l/n+RzwfNCoCOhOp/kMxHyRBhTS2DDhHJkTG0xxPexibHJ5I/lutjl7qbLJ/3+nOHNhPlVl5Ur5WTrSFGVAGu6hfhR5dxiMZjxUpBkCZ2tw+Nez7cc8ksfTda6Mbq7HI7W/0IfjSuujNHa8dg6TpK1QfhaT3/cDaOb34eHTU97eN7VarVRvV5nCH2L1F/wMob7KZ6jdRxrmsYQQ+lsBdVHvYfU/4d2u72Zq/H0dG/7c/gLc2SEcJVw++oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kotest creation 2\"\n        title=\"\"\n        src=\"/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/fcda8/kotest-test-creation2.png\"\n        srcset=\"/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/12f09/kotest-test-creation2.png 148w,\n/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/e4a3f/kotest-test-creation2.png 295w,\n/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/fcda8/kotest-test-creation2.png 590w,\n/cat-logic/static/7790e9a6db1946c7889cc67aa8788a1e/3d4b6/kotest-test-creation2.png 712w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><em>Testing Library</em>에서 Kotest를 선택하고, <em>Superclass</em>에서 원하는 스타일을 설정하고 확인을 누르면 다음 코드를 자동으로 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>spec<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>DescribeSpec\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>matchers<span class=\"token punctuation\">.</span>shouldBe\n\n<span class=\"token keyword\">class</span> WebClientConfigTest <span class=\"token operator\">:</span> <span class=\"token function\">DescribeSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>테스트를 자주 만드는데 매우 편리한 기능이다.</p>\n<h4 id=\"rollback-test-test-method-callbacks\" style=\"position:relative;\"><a href=\"#rollback-test-test-method-callbacks\" aria-label=\"rollback test test method callbacks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rollback Test (test method callbacks)</h4>\n<p><a href=\"https://kotest.io/docs/extensions/spring.html#test-method-callbacks\">https://kotest.io/docs/extensions/spring.html#test-method-callbacks</a></p>\n<p>Kotest는 <code class=\"language-text\">@Transactional</code>을 테스트 클래스에 붙여도 트랜잭션을 시작하지 않는다.\nbefore test method와 같은 콜백을 발생시키지 않기 때문이다.\n그래서 <code class=\"language-text\">@DataJpaTest</code>는 <code class=\"language-text\">@Transactional</code>이 붙어있지만 이 설정 없이는 롤백하지 않는다.</p>\n<p>Kotest는 콜백을 발생시키지 위한 설정을 <code class=\"language-text\">extensions</code>으로 제공한다:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> KotestProjectConfig <span class=\"token operator\">:</span> <span class=\"token function\">AbstractProjectConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">extensions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>Extension<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span>SpringExtension<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">DescribeSpec</code> 기준 Test Case인 <code class=\"language-text\">it</code> 전후로 콜백이 발생한다.\n<code class=\"language-text\">mode</code>를 <code class=\"language-text\">Root</code>로 설정하면 기준을 변경할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">extensions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>Extension<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span><span class=\"token function\">SpringTestExtension</span><span class=\"token punctuation\">(</span>SpringTestLifecycleMode<span class=\"token punctuation\">.</span>Root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">Root</code> 모드는 최상위의 노드를 기준으로 콜백을 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Transactional</span>\n<span class=\"token keyword\">class</span> MyTest <span class=\"token operator\">:</span> <span class=\"token function\">DescribeSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"test1\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"test2\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"test3\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 코드에서 <code class=\"language-text\">test1</code> <code class=\"language-text\">test2</code> <code class=\"language-text\">test3</code>에 대해서만 트랜잭션을 시작한다.</p>\n<p>아쉬운 점은 2가지 모드로는 중첩된 구조를 지원하지 않는다는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"foo method\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"when something\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"result should be 1\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"result should be 2\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">context</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"when something else\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"result should be 3\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"result should be 4\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드에서 <code class=\"language-text\">Root</code> 모드라면 <code class=\"language-text\">describe</code> 트랜잭션 하나만,<br>\n<code class=\"language-text\">Test</code> 모드라면 <code class=\"language-text\">it</code> 4개에 대해서만 트랜잭션을 시작한다.</p>\n<p>원하는 것은 <code class=\"language-text\">context</code> 기준으로 트랜잭션을 시작하는 것이다.</p>\n<p><a href=\"https://github.com/kotest/kotest/issues/2629\">https://github.com/kotest/kotest/issues/2629</a> <br>\n관련 문제로 Kotest 이슈에 문의한 내역이 있다. <code class=\"language-text\">BehaviorSpec</code>의 <code class=\"language-text\">Then</code>에서는 검증만 하는데, 격리가 된다는 내용.\n답변은 이미 디자인되어 있는 상황이라 변경하기 어렵다고 한다.</p>\n<p><code class=\"language-text\">SpringTestExtension</code>을 잘 구현하면 가능할지도.</p>\n<h2 id=\"language-server\" style=\"position:relative;\"><a href=\"#language-server\" aria-label=\"language server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"../language-server-protocol\">Language Server</a></h2>\n<p><a href=\"https://github.com/fwcd/kotlin-language-server\">https://github.com/fwcd/kotlin-language-server</a></p>\n<p>2022-11-29 아직 퍼포먼스가 안나온다. 자주 끊기고, 느리다.\nref. <a href=\"https://www.reddit.com/r/neovim/comments/yf0v86/kotlin_language_server_very_slow/\">https://www.reddit.com/r/neovim/comments/yf0v86/kotlin_language_server_very_slow/</a></p>\n<h2 id=\"ranges\" style=\"position:relative;\"><a href=\"#ranges\" aria-label=\"ranges permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ranges</h2>\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/</a></p>\n<p><code class=\"language-text\">IntRange</code>를 사용하면 다음과 같은 일을 할 수 있다.</p>\n<p>범위 비교:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token number\">30</span> <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token operator\">..</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>순회:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token function\">rangeTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 1, 2, 3, 4, 5...100</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Step 순회:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token function\">rangeTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> step <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 1, 6, 11...96</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>항상 end 값은 포함(inclusive)한다.</p>\n<p>Char, Int, Long 등 비교할 수 있는 타입이라면 내장된 <code class=\"language-text\">Range</code> 클래스를 제공한다.</p>\n<h3 id=\"hierarchy\" style=\"position:relative;\"><a href=\"#hierarchy\" aria-label=\"hierarchy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hierarchy</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">IntRange --|> IntProgression    --|> Iterable&lt;Int>\n         --|> ClosedRange&lt;Int>  --|> Comparable&lt;Int></code></pre></div>\n<p>Iterable을 구현함으로써 순회할 수 있고, Comparable을 구현함으로써 범위를 비교할 수 있다.</p>\n<p>응용하면 <code class=\"language-text\">LocalDate</code> 같은 것도 만들 수 있다:\n<a href=\"https://www.netguru.com/blog/traversing-through-dates-with-kotlin-range-expressions\">https://www.netguru.com/blog/traversing-through-dates-with-kotlin-range-expressions</a></p>\n<p>보통 순회, 비교 모두 당장 필요하지는 않을텐데,<br>\n예를들면, 날짜 범위를 나타내는 클래스를 구현하고 싶다면 <code class=\"language-text\">ClosedRange&lt;LocalDate></code>만 구현해도 충분하다.\n<code class=\"language-text\">Pair&lt;LocalDate, LocalDate></code> 보다는 좀 더 명확할 것이다.</p>\n<h2 id=\"kotlin-dsl\" style=\"position:relative;\"><a href=\"#kotlin-dsl\" aria-label=\"kotlin dsl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kotlin DSL</h2>\n<p><a href=\"https://kotlinlang.org/docs/type-safe-builders.html\">https://kotlinlang.org/docs/type-safe-builders.html</a></p>\n<blockquote>\n<p>Type-safe builders allow creating Kotlin-based domain-specific languages (DSLs) suitable for building complex hierarchical data structures in a semi-declarative way.</p>\n</blockquote>\n<p>Type-safe 빌더는 비 선언적인 방법으로, 복잡한 계층의 데이터 구조를 만드는데 적합한 Kotlin DSL을 만들 수 있습니다.</p>\n<p>대표적인 예시인 <a href=\"https://ktor.io/docs/routing-in-ktor.html#define_route\">Kotr</a>의 route handler:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>ktor<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>routing<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>ktor<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>ktor<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n\nrouting <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">route</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"/hello\"</span></span><span class=\"token punctuation\">,</span> HttpMethod<span class=\"token punctuation\">.</span>Get<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        handle <span class=\"token punctuation\">{</span>\n            call<span class=\"token punctuation\">.</span><span class=\"token function\">respondText</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hello\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>builder 유형의 모듈을 만드는데 유용한 방법이다.</p>\n<p>위 코드에서 <code class=\"language-text\">routing</code> <code class=\"language-text\">route</code> <code class=\"language-text\">handle</code>는 각각 lambda 표현식을 받는 함수이다.\nlambda 함수의 <a href=\"https://kotlinlang.org/docs/this-expressions.html\">this</a>를 정의함으로써 DSL을 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">html <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이런 표현을 가능케 하려면 다음과 같이 <code class=\"language-text\">html</code> 함수를 만든다:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">html</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> HTML<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> HTML <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> html <span class=\"token operator\">=</span> <span class=\"token function\">HTML</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    html<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> html\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">html {}</code>의 lambda 표현식의 this는 이제 <code class=\"language-text\">HTML</code> 객체가 된다.\n<code class=\"language-text\">HTML</code> 클래스에 다시 lambda expression을 받도록 함수를 제공하면 중첩된 표현이 가능해진다:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> HTML <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">head</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> Head<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Head <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">val</span> head <span class=\"token operator\">=</span> <span class=\"token function\">Head</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        head<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>head<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> head\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">body</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> Body<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Body <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">val</span> body <span class=\"token operator\">=</span> <span class=\"token function\">Body</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        body<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> body\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">html <span class=\"token punctuation\">{</span>\n    head <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n    body <span class=\"token punctuation\">{</span> <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"exposed\" style=\"position:relative;\"><a href=\"#exposed\" aria-label=\"exposed permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exposed</h2>\n<p><a href=\"https://github.com/JetBrains/Exposed\">https://github.com/JetBrains/Exposed</a></p>\n<p>Jetbrains에서 만든 ORM 라이브러리.</p>\n<p>2023-07-18 <a href=\"https://tech.kakao.com/2023/07/04/kakao-tech-meet-2/\">Kakao tech meet 2회</a>의 세션 2, <em>Spring Batch 애플리케이션 성능 향상을 위한 주요 팁</em>에서 처음 알게 되었다.</p>\n<p>DSL로 쿼리를 작성할 수 있고, <a href=\"https://github.com/JetBrains/Exposed/wiki/DSL#union\">Union 쿼리</a>도 지원한다.</p>\n<p>Exposed issue에 <a href=\"https://github.com/JetBrains/Exposed/issues/1504\">Spring with exposed or jpa?</a>글이 있다.\nExposed를 사용했는데 JPA 대신 사용한 근거를 찾고싶다는 내용이다.</p>\n<p>JPA와 QueryDSL을 많이 사용했다는 누군가 Kotlin + JPA를 사용하면서 불편한 4가지를 나열했다:</p>\n<ol>\n<li>plugin 없이 동작하지 않음</li>\n<li>Entity를 data class로 사용할 수 없음</li>\n<li>Entity를 불변으로 사용할 수 없음. <code class=\"language-text\">val</code> 대신 <code class=\"language-text\">var</code>를 사용해야 함</li>\n<li>도메인 지향인 clean architecture로 개발하면 JPA의 강력한 기능을 사용할 수 없음. <code class=\"language-text\">spring-data-jpa</code>나 다른 ORM을 사용하면 더 쉽게 사용 가능</li>\n</ol>\n<p>추가로 clean architecture로 개발하면 JPA의 영속 계층의 cache나 dirty-checking을 사용하기 어려웠다고 한다.</p>\n<p>그래서 <code class=\"language-text\">spring-data-jpa</code> + <code class=\"language-text\">jooq</code>를 사용하다가, Exposed를 사용중이라고.</p>\n<h2 id=\"annotation-processing\" style=\"position:relative;\"><a href=\"#annotation-processing\" aria-label=\"annotation processing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Annotation Processing</h2>\n<p>QueryDSL의 QClass와 같이 annotation processing로 생성되는 모듈은 gradle 명령어로 생성할 수 있다: <code class=\"language-text\">gradle kaptKotlin</code>.</p>\n<p>간편하게 프로젝트 빌드를 할 수도 있겠지만 불필요한 task가 포함되어 있고, 완성되지 않는 코드에 대해서 빌드하여 결국 실패할 것이므로,\n소요시간도 짧은 <code class=\"language-text\">gradle kaptKotlin</code>을 사용하는 것이 좋다.</p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\"><a href=\"https://kotlinlang.org/docs/faq.html\">https://kotlinlang.org/docs/faq.html</a><a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>"}},"pageContext":{"id":"4bcd833e-c893-574f-a38e-50b2e268183e"}},"staticQueryHashes":[],"slicesMap":{}}